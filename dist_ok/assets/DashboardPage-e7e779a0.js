import{c as je,j as e,J as T,_ as F,$,a0 as W,K as R,b as Y,o as X,r as m,t as S,O as me,S as K,U as Ea,d as Ke,s as Re,B as _,a3 as ue,q as A,u as V,a4 as Aa,a5 as Ta,D as $e,v as We,w as Oe,x as Le,z as Ie,G as ve,Q as ge,F as Fa,a6 as Ra,a7 as qa,a8 as $a,a1 as Ue,f as ha,a9 as Wa,aa as Oa,L as O,Z as z,ab as La,M as Ia,ac as Ua,a as za,g as Ze,h as ea,i as aa,k as ta,l as sa,ad as Xa,W as qe,E as ae,ae as Va,af as Ba,ag as Ha,ah as ye,ai as we,C as ra,aj as Ne}from"./index-1d87757c.js";import{A as te,a as se,b as re,U as pa,D as xa,T as Ya,c as Ga,d as na,e as he,f as Qa,g as pe,C as Ja,L as Ka,h as Za}from"./table-4cc4b283.js";import{C as ze}from"./calendar-ddbfb0cc.js";import{P as fa,a as et,A as ga,b as ba,c as ja,d as va,e as ya,f as wa,g as Na,h as _a,i as Ca,S as at}from"./textarea-bd3e9a46.js";import{S as ia}from"./shield-check-7b3002bb.js";import{A as tt,P as Sa,M as st,V as rt,F as nt,S as it,I as ot}from"./MediaForm-2d488de0.js";import{P as lt,U as ct,D as oe,a as _e,f as oa,b as Ce,v as dt}from"./verificationFormUtils-4c5770fb.js";import{T as Xe}from"./trash-2-18ebab21.js";import{u as mt,S as ut,a as ht,P as pt}from"./PaymentDisabledModal-0234c645.js";import{T as Ve,a as Be,b as He,c as Ye}from"./tooltip-d02ea239.js";import{S as xt,a as la,b as ft}from"./sheet-74228ed3.js";import{A as Se}from"./alert-triangle-bda1dbcf.js";import"./crop-74373485.js";import"./ProfileFormHandler-24dd2d47.js";const gt=je("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),bt=je("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),jt=je("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),vt=je("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);function D(a){const s=Object.prototype.toString.call(a);return a instanceof Date||typeof a=="object"&&s==="[object Date]"?new a.constructor(+a):typeof a=="number"||s==="[object Number]"||typeof a=="string"||s==="[object String]"?new Date(a):new Date(NaN)}function yt(a,s){return a instanceof Date?new a.constructor(s):new Date(s)}const wt=864e5,xe=43200,ca=1440;let Nt={};function _t(){return Nt}function da(a){const s=D(a);return s.setHours(0,0,0,0),s}function be(a){const s=D(a),t=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return t.setUTCFullYear(s.getFullYear()),+a-+t}function Ct(a,s){const t=da(a),r=da(s),n=+t-be(t),i=+r-be(r);return Math.round((n-i)/wt)}function fe(a,s){const t=D(a),r=D(s),n=t.getTime()-r.getTime();return n<0?-1:n>0?1:n}function St(a){return yt(a,Date.now())}function Pt(a,s){const t=D(a),r=D(s),n=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return n*12+i}function kt(a,s){const t=D(a),r=D(s),n=ma(t,r),i=Math.abs(Ct(t,r));t.setDate(t.getDate()-n*i);const o=+(ma(t,r)===-n),l=n*(i-o);return l===0?0:l}function ma(a,s){const t=a.getFullYear()-s.getFullYear()||a.getMonth()-s.getMonth()||a.getDate()-s.getDate()||a.getHours()-s.getHours()||a.getMinutes()-s.getMinutes()||a.getSeconds()-s.getSeconds()||a.getMilliseconds()-s.getMilliseconds();return t<0?-1:t>0?1:t}function Mt(a){return s=>{const r=(a?Math[a]:Math.trunc)(s);return r===0?0:r}}function Dt(a,s){return+D(a)-+D(s)}function Et(a){const s=D(a);return s.setHours(23,59,59,999),s}function At(a){const s=D(a),t=s.getMonth();return s.setFullYear(s.getFullYear(),t+1,0),s.setHours(23,59,59,999),s}function Tt(a){const s=D(a);return+Et(s)==+At(s)}function Ft(a,s){const t=D(a),r=D(s),n=fe(t,r),i=Math.abs(Pt(t,r));let o;if(i<1)o=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-n*i);let l=fe(t,r)===-n;Tt(D(a))&&i===1&&fe(a,r)===1&&(l=!1),o=n*(i-Number(l))}return o===0?0:o}function Rt(a,s,t){const r=Dt(a,s)/1e3;return Mt(t==null?void 0:t.roundingMethod)(r)}const qt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$t=(a,s,t)=>{let r;const n=qt[a];return typeof n=="string"?r=n:s===1?r=n.one:r=n.other.replace("{{count}}",s.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function le(a){return(s={})=>{const t=s.width?String(s.width):a.defaultWidth;return a.formats[t]||a.formats[a.defaultWidth]}}const Wt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ot={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},It={date:le({formats:Wt,defaultWidth:"full"}),time:le({formats:Ot,defaultWidth:"full"}),dateTime:le({formats:Lt,defaultWidth:"full"})},Ut={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zt=(a,s,t,r)=>Ut[a];function G(a){return(s,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let n;if(r==="formatting"&&a.formattingValues){const o=a.defaultFormattingWidth||a.defaultWidth,l=t!=null&&t.width?String(t.width):o;n=a.formattingValues[l]||a.formattingValues[o]}else{const o=a.defaultWidth,l=t!=null&&t.width?String(t.width):a.defaultWidth;n=a.values[l]||a.values[o]}const i=a.argumentCallback?a.argumentCallback(s):s;return n[i]}}const Xt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ht={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qt=(a,s)=>{const t=Number(a),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Jt={ordinalNumber:Qt,era:G({values:Xt,defaultWidth:"wide"}),quarter:G({values:Vt,defaultWidth:"wide",argumentCallback:a=>a-1}),month:G({values:Bt,defaultWidth:"wide"}),day:G({values:Ht,defaultWidth:"wide"}),dayPeriod:G({values:Yt,defaultWidth:"wide",formattingValues:Gt,defaultFormattingWidth:"wide"})};function Q(a){return(s,t={})=>{const r=t.width,n=r&&a.matchPatterns[r]||a.matchPatterns[a.defaultMatchWidth],i=s.match(n);if(!i)return null;const o=i[0],l=r&&a.parsePatterns[r]||a.parsePatterns[a.defaultParseWidth],u=Array.isArray(l)?Zt(l,x=>x.test(o)):Kt(l,x=>x.test(o));let c;c=a.valueCallback?a.valueCallback(u):u,c=t.valueCallback?t.valueCallback(c):c;const p=s.slice(o.length);return{value:c,rest:p}}}function Kt(a,s){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t)&&s(a[t]))return t}function Zt(a,s){for(let t=0;t<a.length;t++)if(s(a[t]))return t}function Pa(a){return(s,t={})=>{const r=s.match(a.matchPattern);if(!r)return null;const n=r[0],i=s.match(a.parsePattern);if(!i)return null;let o=a.valueCallback?a.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=s.slice(n.length);return{value:o,rest:l}}}const es=/^(\d+)(th|st|nd|rd)?/i,as=/\d+/i,ts={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ss={any:[/^b/i,/^(a|c)/i]},rs={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ns={any:[/1/i,/2/i,/3/i,/4/i]},is={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},os={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ls={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cs={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ds={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ms={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},us={ordinalNumber:Pa({matchPattern:es,parsePattern:as,valueCallback:a=>parseInt(a,10)}),era:Q({matchPatterns:ts,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any"}),quarter:Q({matchPatterns:rs,defaultMatchWidth:"wide",parsePatterns:ns,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Q({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any"}),day:Q({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:cs,defaultParseWidth:"any"}),dayPeriod:Q({matchPatterns:ds,defaultMatchWidth:"any",parsePatterns:ms,defaultParseWidth:"any"})},hs={code:"en-US",formatDistance:$t,formatLong:It,formatRelative:zt,localize:Jt,match:us,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ps(a,s,t){const r=_t(),n=(t==null?void 0:t.locale)??r.locale??hs,i=2520,o=fe(a,s);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o});let u,c;o>0?(u=D(s),c=D(a)):(u=D(a),c=D(s));const p=Rt(c,u),x=(be(c)-be(u))/1e3,g=Math.round((p-x)/60);let v;if(g<2)return t!=null&&t.includeSeconds?p<5?n.formatDistance("lessThanXSeconds",5,l):p<10?n.formatDistance("lessThanXSeconds",10,l):p<20?n.formatDistance("lessThanXSeconds",20,l):p<40?n.formatDistance("halfAMinute",0,l):p<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):g===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",g,l);if(g<45)return n.formatDistance("xMinutes",g,l);if(g<90)return n.formatDistance("aboutXHours",1,l);if(g<ca){const j=Math.round(g/60);return n.formatDistance("aboutXHours",j,l)}else{if(g<i)return n.formatDistance("xDays",1,l);if(g<xe){const j=Math.round(g/ca);return n.formatDistance("xDays",j,l)}else if(g<xe*2)return v=Math.round(g/xe),n.formatDistance("aboutXMonths",v,l)}if(v=Ft(c,u),v<12){const j=Math.round(g/xe);return n.formatDistance("xMonths",j,l)}else{const j=v%12,w=Math.trunc(v/12);return j<3?n.formatDistance("aboutXYears",w,l):j<9?n.formatDistance("overXYears",w,l):n.formatDistance("almostXYears",w+1,l)}}function xs(a,s){return ps(a,St(a),s)}const fs={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},gs=(a,s,t)=>{let r;const n=fs[a];return typeof n=="string"?r=n:s===1?r=n.one:r=n.other.replace("{{count}}",String(s)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+r:"há "+r:r},bs={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},js={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},vs={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ys={date:le({formats:bs,defaultWidth:"full"}),time:le({formats:js,defaultWidth:"full"}),dateTime:le({formats:vs,defaultWidth:"full"})},ws={lastWeek:a=>{const s=a.getDay();return"'"+(s===0||s===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},Ns=(a,s,t,r)=>{const n=ws[a];return typeof n=="function"?n(s):n},_s={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Cs={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Ss={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},Ps={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},ks={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},Ms={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Ds=(a,s)=>{const t=Number(a);return(s==null?void 0:s.unit)==="week"?t+"ª":t+"º"},Es={ordinalNumber:Ds,era:G({values:_s,defaultWidth:"wide"}),quarter:G({values:Cs,defaultWidth:"wide",argumentCallback:a=>a-1}),month:G({values:Ss,defaultWidth:"wide"}),day:G({values:Ps,defaultWidth:"wide"}),dayPeriod:G({values:ks,defaultWidth:"wide",formattingValues:Ms,defaultFormattingWidth:"wide"})},As=/^(\d+)[ºªo]?/i,Ts=/\d+/i,Fs={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Rs={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},qs={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},$s={any:[/1/i,/2/i,/3/i,/4/i]},Ws={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Os={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Ls={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},Is={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},Us={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},zs={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Xs={ordinalNumber:Pa({matchPattern:As,parsePattern:Ts,valueCallback:a=>parseInt(a,10)}),era:Q({matchPatterns:Fs,defaultMatchWidth:"wide",parsePatterns:Rs,defaultParseWidth:"any"}),quarter:Q({matchPatterns:qs,defaultMatchWidth:"wide",parsePatterns:$s,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Q({matchPatterns:Ws,defaultMatchWidth:"wide",parsePatterns:Os,defaultParseWidth:"any"}),day:Q({matchPatterns:Ls,defaultMatchWidth:"wide",parsePatterns:Is,defaultParseWidth:"any"}),dayPeriod:Q({matchPatterns:Us,defaultMatchWidth:"any",parsePatterns:zs,defaultParseWidth:"any"})},Vs={code:"pt-BR",formatDistance:gs,formatLong:ys,formatRelative:Ns,localize:Es,match:Xs,options:{weekStartsOn:0,firstWeekContainsDate:1}},Bs=({user:a})=>e.jsxs(T,{className:"shadow-lg",children:[e.jsxs(F,{children:[e.jsx($,{children:"Vagas Recomendadas"}),e.jsx(W,{children:"Oportunidades que combinam com seu perfil."})]}),e.jsx(R,{children:e.jsxs("div",{className:"text-center py-10",children:[e.jsx(Y,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Sistema de vagas temporariamente indisponível."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Esta funcionalidade estará disponível em breve."})]})})]}),Pe=({user:a,onNavigate:s,onOpenVerificationModal:t})=>{const{toast:r}=X(),[n,i]=m.useState({jobsPublished:0,applicationsSent:0,jobsCompletedModel:0,jobsCompletedContractor:0,totalSpent:0}),[o,l]=m.useState([]),[u,c]=m.useState(!0),p=m.useCallback(async()=>{if(!a){c(!1);return}c(!0);try{const{data:f,error:P}=await S.from("notifications").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(3);if(P)throw P;l(f||[]),i({jobsPublished:0,applicationsSent:0,jobsCompletedModel:0,jobsCompletedContractor:0,totalSpent:0})}catch(f){r({title:"Erro ao buscar dados do dashboard",description:f.message,variant:"destructive"})}finally{c(!1)}},[a,r]);m.useEffect(()=>{p()},[p]);const x=(a==null?void 0:a.subscription_type)==="pro"&&(a==null?void 0:a.subscription_expires_at)&&new Date(a.subscription_expires_at)>new Date,g=["contractor","photographer","admin"].includes(a.user_type),v={blue:{border:"border-blue-500",bg:"bg-blue-100",text:"text-blue-600"},green:{border:"border-green-500",bg:"bg-green-100",text:"text-green-600"},purple:{border:"border-purple-500",bg:"bg-purple-100",text:"text-purple-600"},yellow:{border:"border-yellow-500",bg:"bg-yellow-100",text:"text-yellow-600"}},j=a.user_type==="model"?[{label:"Candidaturas",value:u?"...":n.applicationsSent,icon:jt,color:"blue"},{label:"Trabalhos Feitos",value:u?"...":n.jobsCompletedModel,icon:ze,color:"green"},{label:"Saldo",value:`R$ ${Number(a.wallet_balance||0).toFixed(2)}`,icon:me,color:"purple"},{label:"Sua Nota",value:Number(a.avg_rating||0).toFixed(1),icon:K,color:"yellow"}]:[{label:"Vagas Publicadas",value:u?"...":n.jobsPublished,icon:Y,color:"blue"},{label:"Contratações",value:u?"...":n.jobsCompletedContractor,icon:Ea,color:"green"},{label:"Investimento",value:`R$ ${n.totalSpent.toFixed(2)}`,icon:me,color:"purple"},{label:"Saldo",value:`R$ ${Number(a.wallet_balance||0).toFixed(2)}`,icon:K,color:"yellow"}],w=a.user_type==="model"?[{label:"Buscar Novas Vagas",action:()=>s("vagas"),icon:Ke},{label:"Ver Minhas Candidaturas",action:()=>s("dashboard",null,{tab:"applications"}),icon:Y}]:[{label:"Buscar Modelos",action:()=>s("modelos"),icon:Ke},{label:"Publicar Nova Vaga",action:()=>s("dashboard",null,{tab:"my-jobs"}),icon:fa}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 space-y-4 rounded-xl shadow-lg bg-gradient-to-br from-pink-500 via-purple-600 to-indigo-600 text-white",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Olá, ",a.name||a.email,"! 👋"]}),x?e.jsxs(te,{variant:"default",className:"bg-yellow-900/30 border-2 border-yellow-400 text-white rounded-xl shadow-lg",children:[e.jsx(Re,{className:"h-5 w-5 text-yellow-400"}),e.jsx(se,{className:"font-semibold text-white",children:"Você é um membro PRO!"}),e.jsx(re,{className:"text-yellow-100",children:"Parabéns! Você tem acesso a todos os benefícios exclusivos da plataforma."})]}):e.jsxs(te,{variant:"default",className:"bg-purple-900/30 border-2 border-yellow-400 text-white rounded-xl shadow-lg",children:[e.jsx(Re,{className:"h-5 w-5 text-yellow-400"}),e.jsx(se,{className:"font-semibold text-white",children:"Torne-se PRO e ganhe mais destaque!"}),e.jsxs(re,{className:"text-purple-100 flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:justify-between sm:gap-4",children:[e.jsx("span",{className:"flex-grow",children:g?"Assinantes PRO podem ver os contatos das modelos e têm mais destaque.":"Assinantes PRO têm mais visibilidade e passam mais confiança."}),e.jsx(_,{size:"sm",className:"w-full sm:w-auto flex-shrink-0 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold",onClick:()=>s("/dashboard",null,{tab:"subscription"}),children:"Fazer Upgrade"})]})]}),a.is_identity_verified?e.jsxs(te,{variant:"default",className:"bg-green-900/30 border-2 border-green-400 text-white rounded-xl shadow-lg",children:[e.jsx(ia,{className:"h-5 w-5 text-green-400"}),e.jsx(se,{className:"font-semibold text-white",children:"Seu perfil é verificado!"}),e.jsx(re,{className:"text-green-100",children:"Isso aumenta a confiança de outros usuários em seu perfil."})]}):e.jsxs(te,{variant:"default",className:"bg-blue-900/30 border-2 border-blue-400 text-white rounded-xl shadow-lg",children:[e.jsx(ia,{className:"h-5 w-5 text-blue-400"}),e.jsx(se,{className:"font-semibold text-white",children:"Verifique seu perfil para aumentar a confiança!"}),e.jsxs(re,{className:"text-blue-100 flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:justify-between sm:gap-4",children:[e.jsx("span",{className:"flex-grow",children:"Perfis verificados são mais contratados e vistos como mais seguros."}),e.jsx(_,{size:"sm",className:"w-full sm:w-auto flex-shrink-0 bg-blue-500 hover:bg-blue-600 text-white font-bold",onClick:()=>{typeof t=="function"?t():(console.error("onOpenVerificationModal is not a function or is undefined."),r({title:"Erro",description:"Não foi possível abrir o modal de verificação.",variant:"destructive"}))},children:"Verificar Agora"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((f,P)=>{const L=f.icon,E=v[f.color]||v.blue;return e.jsxs("div",{className:ue("bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-2xl hover:scale-105 border-l-4",E.border),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:ue("w-10 h-10 rounded-full flex items-center justify-center",E.bg),children:e.jsx(L,{className:ue("h-5 w-5",E.text)})}),e.jsx("span",{className:ue("text-3xl font-bold",E.text),children:f.value})]}),e.jsx("p",{className:"text-gray-700 font-semibold text-md",children:f.label})]},P)})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w.map(f=>{const P=f.icon;return e.jsxs(_,{onClick:f.action,size:"lg",variant:"outline",className:"w-full justify-between text-lg py-8 bg-white shadow-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-6 w-6 mr-4 text-pink-600"})," ",f.label]}),e.jsx(tt,{className:"h-5 w-5 text-gray-400"})]},f.label)})}),a.user_type==="model"&&e.jsx(Bs,{user:a}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Atividade Recente"}),u?e.jsx("div",{className:"text-center py-4",children:e.jsx(A,{className:"h-6 w-6 animate-spin text-pink-500"})}):o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(f=>{var P;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:e.jsx(gt,{className:"h-5 w-5 text-pink-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:((P=f.content)==null?void 0:P.message)||"Nova atividade"}),e.jsx("p",{className:"text-xs text-gray-500",children:xs(new Date(f.created_at),{addSuffix:!0,locale:Vs})})]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>s("dashboard",null,{tab:"reviews"}),children:"Ver"})]},f.id)})}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhuma atividade recente."})]})]})},ke=({onProfileUpdate:a})=>{const{user:s,refreshAuthUser:t}=V(),[r,n]=m.useState(s);Aa.useEffect(()=>{n(s)},[s]);const i=async()=>{const o=await t();o&&n(o),a&&a(o)};return r?e.jsxs(T,{className:"overflow-hidden shadow-xl hover:shadow-2xl transition-shadow duration-300",children:[e.jsxs(F,{className:"bg-white p-6 md:p-8",children:[e.jsx($,{className:"text-3xl font-bold text-gray-800",children:"Editar Perfil"}),e.jsx(W,{className:"text-gray-600 text-base",children:"Mantenha seus dados atualizados para melhores oportunidades."})]}),e.jsx(R,{className:"p-6 md:p-8 pt-0",children:e.jsx(lt,{initialProfileData:r,onSuccess:i})})]}):e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(A,{className:"h-12 w-12 animate-spin text-pink-600"}),e.jsx("p",{className:"ml-4 text-lg text-gray-600",children:"Carregando perfil..."})]})},Hs=({onSuccess:a})=>{const{user:s}=V(),{toast:t}=X(),[r,n]=m.useState([]),[i,o]=m.useState(!0),[l,u]=m.useState(!1),[c,p]=m.useState("add"),[x,g]=m.useState(null),[v,j]=m.useState(null),w=m.useRef(null),f=m.useCallback(async()=>{if(s){o(!0);try{const{data:d,error:h}=await S.from("profile_photos").select("*").eq("profile_id",s.id).order("created_at",{ascending:!1});if(h)throw h;const{data:y,error:M}=await S.from("profile_videos").select("*").eq("profile_id",s.id).order("created_at",{ascending:!1});if(M)throw M;const k=[...d.map(q=>({...q,type:"photo",url:q.image_url,thumb:q.image_url})),...y.map(q=>({...q,type:"video",url:q.video_url,thumb:q.thumbnail_url}))];k.sort((q,I)=>new Date(I.created_at)-new Date(q.created_at)),n(k)}catch(d){t({title:"Erro ao buscar mídias",description:d.message,variant:"destructive"})}finally{o(!1)}}},[s,t]);m.useEffect(()=>{f()},[f]);const P=()=>{u(!1),g(null),j(null)},L=d=>{var k;const h=(k=d.target.files)==null?void 0:k[0];if(!h)return;const y=["image/jpeg","image/png","image/gif","image/webp","image/heic","image/heif"],M=["video/mp4","video/webm","video/quicktime"];if(y.includes(h.type)||M.includes(h.type)){if(h.type.startsWith("video/")&&h.size>50*1024*1024){t({title:"Vídeo muito grande",description:"O tamanho máximo é 50MB.",variant:"destructive"});return}j(h),p("add"),u(!0)}else t({title:"Tipo de arquivo não suportado",description:`O formato ${h.type} não é aceito.`,variant:"destructive"});d.target.value=""},E=d=>{g(d),p("edit"),u(!0)},U=()=>{P(),f(),a&&a()},b=async d=>{try{const h=d.type==="photo"?"profile_photos":"profile_videos",{error:y}=await S.from(h).delete().eq("id",d.id);if(y)throw y;const M=[];if(d.url){const k=new URL(d.url).pathname.split("/user_media/")[1];k&&M.push(k)}if(d.type==="video"&&d.thumb){const k=new URL(d.thumb).pathname.split("/user_media/")[1];k&&M.push(k)}M.length>0&&await S.storage.from("user_media").remove(M),t({title:"Mídia excluída!",description:"O item foi removido da sua galeria."}),n(r.filter(k=>k.id!==d.id)),a&&a()}catch(h){t({title:"Erro ao excluir",description:h.message,variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Gerenciar Mídia"}),e.jsxs(_,{onClick:()=>{var d;return(d=w.current)==null?void 0:d.click()},className:"btn-gradient text-white",children:[e.jsx(fa,{className:"h-4 w-4 mr-2"})," Adicionar Mídia"]}),e.jsx("input",{type:"file",ref:w,onChange:L,accept:"image/jpeg,image/png,image/gif,image/webp,image/heic,image/heif,video/mp4,video/webm,video/quicktime",className:"hidden"})]}),i?e.jsx("div",{className:"text-center py-10",children:e.jsx(A,{className:"h-8 w-8 text-pink-500 animate-spin mx-auto"})}):r.length===0?e.jsxs("div",{className:"text-center py-16 border-2 border-dashed rounded-lg",children:[e.jsx(Ta,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Sua galeria está vazia"}),e.jsx("p",{className:"text-gray-500",children:"Comece a adicionar fotos e vídeos para montar seu portfólio."})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:r.map(d=>e.jsxs("div",{className:"group relative aspect-[4/5] overflow-hidden rounded-lg shadow-md bg-black",children:[e.jsx("img",{src:d.thumb,alt:d.caption||"Mídia da galeria",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),d.type==="video"&&e.jsx(Sa,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-10 w-10 text-white/80 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-3",children:[e.jsx("p",{className:"text-white text-sm line-clamp-2",children:d.caption}),e.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(_,{size:"icon",variant:"outline",className:"h-8 w-8 bg-white/80 hover:bg-white",onClick:()=>E(d),children:e.jsx(et,{className:"h-4 w-4 text-gray-700"})}),e.jsxs(ga,{children:[e.jsx(ba,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"destructive",className:"h-8 w-8",children:e.jsx(Xe,{className:"h-4 w-4"})})}),e.jsxs(ja,{children:[e.jsxs(va,{children:[e.jsx(ya,{children:"Confirmar Exclusão"}),e.jsx(wa,{children:"Tem certeza que deseja excluir? Esta ação não pode ser desfeita."})]}),e.jsxs(Na,{children:[e.jsx(_a,{children:"Cancelar"}),e.jsx(Ca,{onClick:()=>b(d),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})]})]},`${d.type}-${d.id}`))})]}),e.jsx($e,{open:l,onOpenChange:d=>!d&&P(),children:e.jsxs(We,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Oe,{children:[e.jsx(Le,{children:c==="add"?"Adicionar Nova Mídia":"Editar Mídia"}),e.jsx(Ie,{children:c==="add"?"Prepare sua mídia para publicação.":"Atualize a capa ou a legenda da sua mídia."})]}),e.jsx(st,{mediaItem:x,file:v,onSuccess:U,onCancel:P})]})})]})},Ys=({onSuccess:a})=>{const{user:s}=V(),{toast:t}=X(),[r,n]=m.useState([]),[i,o]=m.useState(!0),[l,u]=m.useState(null),[c,p]=m.useState(""),[x,g]=m.useState(null),[v,j]=m.useState(!1),[w,f]=m.useState(!1),[P,L]=m.useState(0),[E,U]=m.useState(0),b=m.useRef(null),d=m.useRef(null),h=m.useRef(null),y=m.useCallback(async()=>{if(s){o(!0);try{const{data:N,error:C}=await S.from("profile_videos").select("*").eq("profile_id",s.id).order("sort_order",{ascending:!0});if(C)throw C;n(N||[])}catch(N){t({title:"Erro ao buscar vídeos",description:N.message,variant:"destructive"})}finally{o(!1)}}},[s,t]);m.useEffect(()=>{y()},[y]);const M=m.useCallback(N=>{const C=N[0];if(C){if(C.size>50*1024*1024){t({title:"Vídeo muito grande",description:"O tamanho máximo do vídeo é 50MB.",variant:"destructive"});return}u({file:C,src:URL.createObjectURL(C)}),p(""),g(null),U(0)}},[t]),{getRootProps:k,getInputProps:q,isDragActive:I}=mt({onDrop:M,accept:{"video/*":[".mp4",".mov",".webm"]},multiple:!1}),Z=N=>{if(!b.current||!d.current)return;j(!0);const C=b.current,B=d.current;C.currentTime=N;const H=()=>{const ee=B.getContext("2d");B.width=C.videoWidth,B.height=C.videoHeight,ee.drawImage(C,0,0,C.videoWidth,C.videoHeight),B.toBlob(ie=>{ie&&(g(ie),p(URL.createObjectURL(ie))),j(!1)},"image/jpeg",.9),C.removeEventListener("seeked",H)};C.addEventListener("seeked",H)},J=()=>{b.current&&(L(b.current.duration),Z(0))},ne=N=>{const C=N[0];U(C),Z(C)},ce=N=>{const C=N.target.files[0];C&&(g(C),p(URL.createObjectURL(C)))},de=async()=>{if(!s||!l||!x){t({title:"Erro",description:"Informações do vídeo ou capa ausentes.",variant:"destructive"});return}f(!0);try{const N=l.file.name.split(".").pop(),C=`${Date.now()}.${N}`,B=`videos/${s.id}/${C}`,{error:H}=await S.storage.from("user_media").upload(B,l.file);if(H)throw H;const{data:{publicUrl:ee}}=S.storage.from("user_media").getPublicUrl(B),ie=x.type.split("/")[1],Ma=`${Date.now()}_thumb.${ie}`,Ge=`videos/${s.id}/${Ma}`,{error:Qe}=await S.storage.from("user_media").upload(Ge,x);if(Qe)throw Qe;const{data:{publicUrl:Da}}=S.storage.from("user_media").getPublicUrl(Ge),{error:Je}=await S.from("profile_videos").insert({profile_id:s.id,video_url:ee,thumbnail_url:Da,caption:l.file.name,sort_order:r.length});if(Je)throw Je;t({title:"Sucesso!",description:"Seu vídeo foi enviado."}),u(null),y(),a&&a()}catch(N){t({title:"Erro no upload",description:N.message,variant:"destructive"})}finally{f(!1)}},ka=async(N,C,B)=>{try{const{error:H}=await S.from("profile_videos").delete().eq("id",N);if(H)throw H;const ee=[];C&&ee.push(new URL(C).pathname.split("/user_media/")[1]),B&&ee.push(new URL(B).pathname.split("/user_media/")[1]),ee.length>0&&await S.storage.from("user_media").remove(ee),t({title:"Vídeo removido",description:"O vídeo foi removido com sucesso."}),n(r.filter(ie=>ie.id!==N))}catch(H){t({title:"Erro ao remover vídeo",description:H.message,variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Enviar Novo Vídeo"}),e.jsx(W,{children:"Adicione vídeos ao seu portfólio. Tamanho máximo: 50MB."})]}),e.jsx(R,{children:e.jsxs("div",{...k(),className:`p-10 border-2 border-dashed rounded-lg cursor-pointer text-center hover:border-pink-500 transition-colors ${I?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:[e.jsx("input",{...q()}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ct,{className:"h-10 w-10 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Arraste e solte um vídeo aqui, ou clique para selecionar"}),e.jsx("p",{className:"text-sm text-gray-500",children:"MP4, MOV, WEBM"})]})]})})]}),e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Seus Vídeos"}),e.jsx(W,{children:"Gerencie os vídeos do seu portfólio."})]}),e.jsx(R,{children:i?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):r.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(N=>e.jsxs("div",{className:"relative group overflow-hidden rounded-lg shadow-md bg-black aspect-square",children:[e.jsx("img",{src:N.thumbnail_url,alt:N.caption,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:e.jsx(Sa,{className:"h-12 w-12 text-white/90 opacity-0 group-hover:opacity-100 transition-opacity"})}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-2",children:e.jsx(_,{size:"icon",variant:"destructive",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>ka(N.id,N.video_url,N.thumbnail_url),children:e.jsx(Xe,{className:"h-4 w-4"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent",children:e.jsx("p",{className:"text-white text-xs truncate",children:N.caption||"Sem título"})})]},N.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum vídeo na galeria"}),e.jsx("p",{className:"text-gray-600",children:"Comece enviando seu primeiro vídeo."})]})})]})]}),e.jsx($e,{open:!!l,onOpenChange:N=>!N&&u(null),children:e.jsxs(We,{className:"sm:max-w-4xl",children:[e.jsxs(Oe,{children:[e.jsx(Le,{children:"Editar Vídeo e Capa"}),e.jsx(Ie,{children:"Escolha a capa perfeita para seu vídeo antes de publicar."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Prévia do Vídeo"}),e.jsx("div",{className:"bg-black rounded-lg overflow-hidden aspect-video",children:(l==null?void 0:l.src)&&e.jsx("video",{ref:b,src:l.src,className:"w-full h-full",onLoadedMetadata:J,muted:!0,playsInline:!0})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Selecionar Frame"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(nt,{className:"h-5 w-5"}),e.jsx(it,{min:0,max:P,step:.1,value:[E],onValueChange:ne,disabled:v})]})]}),e.jsxs("div",{children:[e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>{var N;return(N=h.current)==null?void 0:N.click()},children:[e.jsx(ot,{className:"h-4 w-4 mr-2"})," Carregar Capa do Computador"]}),e.jsx("input",{type:"file",ref:h,onChange:ce,accept:"image/*",className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Prévia da Capa"}),e.jsx("div",{className:"bg-gray-200 rounded-lg overflow-hidden aspect-video flex items-center justify-center",children:v||!c?e.jsx(A,{className:"h-8 w-8 animate-spin text-gray-500"}):e.jsx("img",{src:c,alt:"Capa do vídeo",className:"w-full h-full object-contain"})})]})]}),e.jsxs(ve,{className:"mt-6",children:[e.jsx(_,{variant:"outline",onClick:()=>u(null),disabled:w,children:"Cancelar"}),e.jsx(_,{onClick:de,disabled:w||v||!x,className:"btn-gradient text-white",children:w?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"})," Publicando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-4 w-4 mr-2"})," Salvar e Publicar"]})})]}),e.jsx("canvas",{ref:d,className:"hidden"})]})})]})},Me=({onNavigate:a})=>{const{user:s}=V();return!s||s.user_type!=="model"?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(ge,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-700",children:"Esta seção é exclusiva para modelos."})]}):e.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Minhas Propostas de Trabalho"}),e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[e.jsx(Y,{className:"mx-auto h-16 w-16 text-gray-300 mb-6"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Sistema de propostas temporariamente indisponível."}),e.jsx("p",{className:"text-gray-500",children:"Esta funcionalidade estará disponível em breve!"})]})]})},De=({onNavigate:a})=>e.jsx("div",{className:"space-y-6",children:e.jsxs(T,{className:"shadow-lg",children:[e.jsxs(F,{children:[e.jsx($,{children:"Minhas Contratações"}),e.jsx(W,{children:"Acompanhe o status de todos os seus contratos de trabalho."})]}),e.jsx(R,{children:e.jsxs("div",{className:"text-center py-10",children:[e.jsx(Fa,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Sistema de contratações temporariamente indisponível."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Esta funcionalidade estará disponível em breve."})]})})]})}),Gs=({review:a})=>{var r;const{reviewer:s}=a,t=new Date(a.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});return e.jsxs(T,{className:"bg-white shadow-md",children:[e.jsxs(F,{className:"flex flex-row items-center gap-4 space-y-0 pb-2",children:[e.jsxs(Ra,{children:[e.jsx(qa,{src:s.profile_image_url,alt:s.name}),e.jsx($a,{children:((r=s.name)==null?void 0:r.charAt(0))||"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.user_type})]}),e.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[[...Array(5)].map((n,i)=>e.jsx(K,{className:`h-4 w-4 ${i<a.rating?"fill-current":"text-gray-300"}`},i)),e.jsx("span",{className:"text-sm font-bold text-gray-700 ml-1",children:a.rating.toFixed(1)})]})]}),e.jsx(R,{children:e.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',a.comment,'"']})}),e.jsxs(Ue,{className:"text-xs text-gray-400",children:[e.jsx(ze,{className:"h-3 w-3 mr-1.5"})," Avaliado em ",t]})]})},Ee=({user:a})=>{const{toast:s}=X(),[t,r]=m.useState([]),[n,i]=m.useState(!0),o=m.useCallback(async()=>{if(a){i(!0);try{const{data:l,error:u}=await S.from("reviews").select("*, reviewer:reviewer_id (id, name, profile_image_url, user_type)").eq("reviewee_id",a.id).order("created_at",{ascending:!1});if(u)throw u;r(l||[])}catch(l){s({title:"Erro ao buscar avaliações",description:l.message,variant:"destructive"})}finally{i(!1)}}},[a,s]);return m.useEffect(()=>{o()},[o]),n?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-pink-500"})}):e.jsx("div",{className:"space-y-8",children:e.jsxs(T,{className:"shadow-lg",children:[e.jsxs(F,{children:[e.jsx($,{children:"Minhas Avaliações"}),e.jsx(W,{children:"Veja o que outros usuários disseram sobre você."})]}),e.jsx(R,{children:t.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(ut,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Nenhuma avaliação recebida ainda."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Conclua trabalhos e interaja na plataforma para começar a receber feedbacks!"})]}):e.jsx("div",{className:"space-y-4",children:t.map(l=>e.jsx(Gs,{review:l},l.id))})})]})})},Qs=({userType:a})=>{const s=["Selo Pro no perfil","Vagas com selo de destaque","Ver dados de contato e chamar no WhatsApp","Acesso ao chat com as modelos","Suporte prioritário","Vagas ilimitadas"],t=["Destaque na busca","Destaque na página inicial",'Selo de verificado "PRO"',"Suporte prioritário","Candidaturas ilimitadas","Recebimento antecipado de cachês (em breve)"],n=(()=>{if(!a)return[];switch(a){case"model":return t;case"contractor":case"photographer":case"admin":return s;default:return[]}})();return e.jsx("ul",{className:"space-y-2 text-sm",children:n.map(i=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(ha,{className:"h-4 w-4 mr-2 text-pink-500"})," ",i]},i))})},ua=({planType:a,title:s,description:t,price:r,features:n,isCurrentPlan:i,onSubscribe:o,loading:l,isPopular:u,userType:c,canSubscribe:p})=>{const x=a==="pro",g=l||x&&!p,v=()=>{const j=l?e.jsx(A,{className:"h-4 w-4 animate-spin"}):x?"Assinar Agora":"Selecionar Plano",w=e.jsx(_,{onClick:o,className:`w-full ${x?"btn-gradient text-white":""}`,disabled:g,variant:x?"default":"outline",children:j});return x&&!p&&!l?e.jsx(Ve,{children:e.jsxs(Be,{children:[e.jsx(He,{asChild:!0,children:e.jsx("span",{tabIndex:"0",className:"w-full inline-block",children:w})}),e.jsx(Ye,{children:e.jsx("p",{children:"Funcionalidade de assinatura em desenvolvimento. Disponível em breve!"})})]})}):w};return e.jsxs(T,{className:`flex flex-col ${x?"border-pink-500 border-2":""} relative overflow-hidden`,children:[u&&x&&e.jsx("div",{className:"absolute top-0 right-0 px-3 py-1 bg-pink-500 text-white text-xs font-bold rounded-bl-lg z-10",children:"MAIS POPULAR"}),e.jsxs(F,{children:[e.jsxs($,{className:`text-xl font-bold ${x?"text-pink-600 flex items-center gap-2":""}`,children:[x&&e.jsx(Re,{className:"text-yellow-400"})," ",s]}),e.jsx(W,{children:r?`R$ ${r} / mês`:t})]}),e.jsx(R,{className:"flex-grow",children:x?e.jsx(Qs,{userType:c}):e.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:n.map((j,w)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(ha,{className:"h-4 w-4 mr-2 text-green-500"})," ",j]},w))})}),e.jsx(Ue,{children:i?e.jsx(_,{variant:"outline",className:"w-full",disabled:!0,children:"Seu Plano Atual"}):v()})]})},Js=({user:a,prices:s,onSubscribe:t,loading:r,currentPrice:n,canSubscribe:i})=>{const l=(p=>{if(!a)return"...";const x=p==="model"?s.model:s.contractor;return isNaN(parseFloat(x))?x:Number(x).toFixed(2).replace(".",",")})(a==null?void 0:a.user_type),u=["Visibilidade padrão na plataforma","Funcionalidades essenciais para interação","Criação de perfil básico"],c=(a==null?void 0:a.subscription_type)==="pro";return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-6",children:[e.jsx(ua,{planType:"basic",title:"Plano Básico",description:"Gratuito",price:null,features:u,isCurrentPlan:!c,onSubscribe:()=>{},loading:!1,isPopular:!1,userType:a==null?void 0:a.user_type,canSubscribe:!0}),e.jsx(ua,{planType:"pro",title:"Plano Pro",description:null,price:l,features:[],isCurrentPlan:c,onSubscribe:t,loading:r,isPopular:!0,userType:a==null?void 0:a.user_type,canSubscribe:i})]})},Ks=({user:a,onNavigate:s})=>{console.log("[SubscriptionSuccessCard] Renderizando card de sucesso da assinatura.");const t=o=>o?new Date(o).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):null,r=o=>{if(!o)return null;const c=new Date(o)-new Date;return Math.ceil(c/(1e3*60*60*24))},n=t(a.subscription_expires_at),i=r(a.subscription_expires_at);return e.jsxs(T,{className:"border-green-500 border-2",children:[e.jsxs(F,{className:"text-center",children:[e.jsx(vt,{className:"h-16 w-16 mx-auto text-green-500"}),e.jsx($,{className:"text-2xl text-green-600",children:"Você é um Membro Pro!"}),e.jsx(W,{children:"Aproveite todos os benefícios exclusivos e destaque-se na plataforma."})]}),e.jsxs(R,{children:[n&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(ze,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Sua assinatura PRO está ativa"}),e.jsxs("p",{className:"text-sm",children:["Válida até: ",e.jsx("strong",{children:n})]}),i!==null&&i>0&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:i===1?"Expira amanhã":`${i} dias restantes`})]})]})}),e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Como membro PRO, você tem acesso a recursos exclusivos, maior visibilidade e pode se conectar diretamente com outros usuários."})]}),e.jsx(Ue,{children:e.jsx(_,{onClick:()=>s("models"),className:"w-full",children:"Explorar Talentos"})})]})},Ae=({onNavigate:a})=>{const{user:s,appSettings:t,isFetchingAuth:r,refreshAuthUser:n}=V(),{initializePayment:i}=Wa(),{toast:o}=X(),[l,u]=m.useState({model:"0",contractor:"0"}),[c,p]=m.useState(!0);m.useEffect(()=>{t&&(u({model:t.SUBSCRIPTION_PRICE_MODEL||"0",contractor:t.SUBSCRIPTION_PRICE_CONTRACTOR||"0"}),p(!1))},[t]),m.useEffect(()=>{if(!(s!=null&&s.id))return;const L=S.channel(`subscription-tab-profile-updates-${s.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${s.id}`},E=>{console.log("Profile updated via realtime, refreshing user data.",E),n&&n()}).subscribe((E,U)=>{E==="SUBSCRIBED"&&console.log("Connected to profile updates channel for subscriptions."),U&&(console.error("Realtime subscription error in SubscriptionTab:",U),o({title:"Erro de Conexão",description:"Não foi possível conectar para atualizações em tempo real. A página pode não ser atualizada automaticamente.",variant:"destructive"}))});return()=>{S.removeChannel(L)}},[s==null?void 0:s.id,n,o]);const x=t==null?void 0:t.MERCADOPAGO_PUBLIC_KEY,g=parseFloat((s==null?void 0:s.user_type)==="model"?l.model:l.contractor),v=!isNaN(g)&&g>0,j=x&&v,w=()=>{if(!j){o({title:"Assinatura Indisponível",description:"O sistema de assinaturas não está configurado ou o preço não é válido. Contate o suporte.",variant:"destructive"});return}i({amount:g,description:`Assinatura PRO - ${s.user_type==="model"?"Modelo":"Contratante"}`,purpose:"subscription",metadata:{user_id:s.id,user_type:s.user_type,plan_type:"pro",success_url:`${window.location.origin}/dashboard?tab=subscription&payment_status=success`,failure_url:`${window.location.origin}/dashboard?tab=subscription&payment_status=failure`}})},f=s!=null&&s.subscription_expires_at?kt(new Date(s.subscription_expires_at),new Date):null,P=(t==null?void 0:t.enableSubscriptionExpirationNotification)==="true"&&f!==null&&f<=(parseInt(t==null?void 0:t.subscriptionExpirationNoticeDays,10)||7)&&f>=0;return c||r?e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-pink-500"})}):(s==null?void 0:s.subscription_type)==="pro"&&new Date(s.subscription_expires_at)>new Date?e.jsx(Ks,{user:s,onNavigate:a}):e.jsxs("div",{className:"space-y-6",children:[!x&&e.jsxs(te,{variant:"warning",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx(se,{children:"Assinaturas Indisponíveis"}),e.jsx(re,{children:"O administrador ainda não configurou um método de pagamento."})]}),!v&&x&&e.jsxs(te,{variant:"warning",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx(se,{children:"Configuração de Preço Pendente"}),e.jsx(re,{children:"O preço para este tipo de assinatura ainda não foi definido pelo administrador."})]}),P&&e.jsxs(te,{children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx(se,{children:"Sua Assinatura Pro está Expirando!"}),e.jsxs(re,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Sua assinatura Pro expira em ",f," dia(s). Renove agora!"]}),e.jsx(_,{onClick:w,size:"sm",className:"ml-4 btn-gradient text-white",disabled:!j,children:"Renovar"})]})]}),e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Meu Plano de Assinatura"}),e.jsx(W,{children:"Gerencie sua assinatura e aproveite todos os benefícios da plataforma."})]}),e.jsx(R,{children:e.jsx(Js,{user:s,prices:l,onSubscribe:w,loading:c,currentPrice:g,canSubscribe:j})})]})]})},Zs=({tabs:a,activeTab:s,onTabChange:t})=>e.jsxs(xt,{children:[e.jsx(la,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"icon",className:"lg:hidden",children:[e.jsx(Oa,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Abrir menu"})]})}),e.jsxs(ft,{side:"left",className:"p-4 w-[280px]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-pink-600 pl-4",children:"Menu"}),e.jsx("nav",{className:"space-y-2",children:a.map(r=>{const n=r.icon;return e.jsx(la,{asChild:!0,children:e.jsxs("button",{onClick:()=>t(r.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${s===r.id?"bg-pink-600 text-white font-medium shadow-md":"text-gray-700 hover:bg-pink-50 hover:text-pink-700"}`,children:[e.jsx(n,{className:`h-5 w-5 ${s===r.id?"text-white":"text-pink-600"}`}),e.jsx("span",{children:r.label})]})},r.id)})})]})]}),er=()=>{const{updateUserPassword:a}=V(),{toast:s}=X(),[t,r]=m.useState(""),[n,i]=m.useState(""),[o,l]=m.useState(!1),[u,c]=m.useState(""),[p,x]=m.useState(!1),g=async v=>{if(v.preventDefault(),c(""),t.length<6){c("A nova senha deve ter no mínimo 6 caracteres.");return}if(t!==n){c("As senhas não coincidem.");return}l(!0);const{error:j}=await a(t);l(!1),j?(c(j.message),s({title:"Erro ao alterar senha",description:j.message,variant:"destructive"})):(r(""),i(""),s({title:"Sucesso!",description:"Sua senha foi alterada.",variant:"success"}))};return e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(O,{htmlFor:"newPassword",children:"Nova Senha"}),e.jsx(z,{id:"newPassword",type:p?"text":"password",value:t,onChange:v=>r(v.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>x(v=>!v),className:"absolute right-3 top-8 text-gray-400",children:p?e.jsx(La,{size:20}):e.jsx(Ia,{size:20})})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"confirmPassword",children:"Confirmar Nova Senha"}),e.jsx(z,{id:"confirmPassword",type:"password",value:n,onChange:v=>i(v.target.value),required:!0})]}),u&&e.jsx("p",{className:"text-sm text-red-600",children:u}),e.jsxs(_,{type:"submit",disabled:o,children:[o?e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Alterar Senha"]})]})},ar=()=>{const{deleteUser:a}=V(),{toast:s}=X(),[t,r]=m.useState(!1),n=za(),i=async()=>{r(!0);const{error:o}=await a();r(!1),o?s({title:"Erro ao excluir conta",description:o.message,variant:"destructive"}):(s({title:"Conta excluída",description:"Sua conta e todos os dados foram excluídos com sucesso."}),n("/"))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Esta ação é irreversível. Todos os seus dados, perfil, fotos e histórico de trabalhos serão permanentemente removidos."}),e.jsxs(ga,{children:[e.jsx(ba,{asChild:!0,children:e.jsxs(_,{variant:"destructive",disabled:t,children:[t?e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Excluir Minha Conta Permanentemente"]})}),e.jsxs(ja,{children:[e.jsxs(va,{children:[e.jsx(ya,{children:"Você tem certeza absoluta?"}),e.jsx(wa,{children:"Esta ação não pode ser desfeita. Isso excluirá permanentemente sua conta e removerá seus dados de nossos servidores."})]}),e.jsxs(Na,{children:[e.jsx(_a,{children:"Cancelar"}),e.jsx(Ca,{onClick:i,className:"bg-red-600 hover:bg-red-700",children:"Sim, excluir minha conta"})]})]})]})]})},Te=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Alterar Senha"}),e.jsx(W,{children:"Para sua segurança, recomendamos o uso de uma senha forte."})]}),e.jsx(R,{children:e.jsx(er,{})})]}),e.jsxs(T,{className:"border-red-500",children:[e.jsxs(F,{children:[e.jsxs($,{className:"flex items-center text-red-700",children:[e.jsx(ht,{className:"mr-2 h-5 w-5"}),"Zona de Perigo"]}),e.jsx(W,{className:"text-red-600",children:"Ações nesta área são permanentes e não podem ser desfeitas."})]}),e.jsx(R,{children:e.jsx(ar,{})})]})]}),tr=({userId:a,onVerificationSubmitted:s,onCancel:t,existingVerification:r})=>{const{toast:n}=X(),[i,o]=m.useState({full_name:"",birth_date:"",document_type:oe[0].value,document_front:null,document_back:null,document_selfie:null,cpf:"",pix_key_type:_e[0].value,pix_key:""}),[l,u]=m.useState(!1),[c,p]=m.useState({}),[x,g]=m.useState(oe[0]);m.useEffect(()=>{if(r){o(d=>({...d,full_name:r.full_name||"",birth_date:r.birth_date||"",document_type:r.document_type||oe[0].value,cpf:r.cpf?oa(r.cpf):"",pix_key_type:r.pix_key_type||_e[0].value,pix_key:r.pix_key?Ce(r.pix_key,r.pix_key_type):""}));const b=oe.find(d=>d.value===(r.document_type||oe[0].value));b&&g(b)}},[r]);const v=b=>{const{name:d,value:h}=b.target;o(y=>({...y,[d]:h})),c[d]&&p(y=>({...y,[d]:null}))},j=b=>{const{value:d}=b.target,h=Ce(d,i.pix_key_type);o(y=>({...y,pix_key:h})),c.pix_key&&p(y=>({...y,pix_key:null}))},w=b=>{o(d=>({...d,pix_key_type:b,pix_key:Ce(d.pix_key,b)})),c.pix_key_type&&p(d=>({...d,pix_key_type:null})),c.pix_key&&p(d=>({...d,pix_key:null}))},f=b=>{const{name:d,files:h}=b.target;h.length>0&&(o(y=>({...y,[d]:h[0]})),c[d]&&p(y=>({...y,[d]:null})))},P=b=>{const d=oa(b.target.value);o(h=>({...h,cpf:d})),c.cpf&&p(h=>({...h,cpf:null}))},L=b=>{o(h=>({...h,document_type:b,document_front:null,document_back:null}));const d=oe.find(h=>h.value===b);d&&g(d),c.document_type&&p(h=>({...h,document_type:null})),c.document_front&&p(h=>({...h,document_front:null})),c.document_back&&p(h=>({...h,document_back:null}))},E=async(b,d,h)=>{if(!b)return null;const y=b.name.split(".").pop(),M=`${a}/${d}/${h}_${Date.now()}.${y}`,{error:k,data:q}=await S.storage.from("user_media").upload(M,b,{upsert:!0});if(k)throw new Error(`Erro no upload (${h}): ${k.message}`);const{data:I}=S.storage.from("user_media").getPublicUrl(M);return I.publicUrl},U=async b=>{b.preventDefault();const d=dt(i,r);if(Object.keys(d).length>0){p(d),n({title:"Erro de Validação",description:"Por favor, corrija os campos destacados.",variant:"destructive"});return}u(!0);try{let h=r==null?void 0:r.document_front_image_url,y=r==null?void 0:r.document_back_image_url,M=r==null?void 0:r.document_selfie_url;h=await E(i.document_front,"verification_documents","doc_front")||h,x.files===2?y=await E(i.document_back,"verification_documents","doc_back")||y:y=null,M=await E(i.document_selfie,"verification_documents","doc_selfie")||M;const k=i.pix_key.replace(/\D/g,""),q=i.pix_key_type==="phone"&&!k.startsWith("+")?`+55${k}`:i.pix_key,I={user_id:a,full_name:i.full_name,birth_date:i.birth_date,document_type:i.document_type,document_front_image_url:h,document_back_image_url:y,document_selfie_url:M,cpf:i.cpf.replace(/\D/g,""),pix_key_type:i.pix_key_type,pix_key:q,status:"pending",requested_at:new Date().toISOString(),reviewed_at:null,admin_notes:null};let Z;try{const J=r&&(r.status==="rejected"||r.status==="rejected_verification");if(r&&!J){const{error:ne}=await S.from("user_verifications").update(I).eq("id",r.id);Z=ne}else{const{data:ne,error:ce}=await S.from("user_verifications").select("id, status").eq("user_id",a).order("requested_at",{ascending:!1}).limit(1).single();if(ce&&ce.code!=="PGRST116")throw ce;if(ne&&(ne.status==="pending"||J)){I.status="pending",I.reviewed_at=null,I.admin_notes=null;const{error:de}=await S.from("user_verifications").update(I).eq("id",ne.id);Z=de}else{const{error:de}=await S.from("user_verifications").insert(I);Z=de}}}catch(J){console.error("Erro específico da query Supabase (user_verifications):",J),J.message.includes("relation")&&J.message.includes("does not exist")?n({title:"Erro de Configuração do Banco",description:"A tabela 'user_verifications' parece não existir ou não está acessível. Tente novamente em alguns minutos ou contate o suporte.",variant:"destructive",duration:1e4}):n({title:"Erro ao Salvar",description:`Não foi possível salvar os dados de verificação: ${J.message}`,variant:"destructive"}),u(!1);return}if(Z)throw Z;await S.from("profiles").update({verification_status:"pending_verification",legal_full_name:i.full_name,birth_date:i.birth_date,cpf:i.cpf.replace(/\D/g,""),pix_info:{type:i.pix_key_type,key:q}}).eq("id",a),n({title:"Solicitação Enviada",description:"Seus dados foram enviados para verificação."}),s&&s()}catch(h){console.error("Erro ao enviar verificação (geral):",h),!h.message.includes("relation")&&!h.message.includes("does not exist")&&n({title:"Erro ao Enviar",description:h.message,variant:"destructive"})}finally{u(!1)}};return e.jsxs("form",{onSubmit:U,className:"space-y-6 p-1",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"full_name",children:"Nome Completo (como no documento)"}),e.jsx(z,{id:"full_name",name:"full_name",value:i.full_name,onChange:v}),c.full_name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.full_name})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"birth_date",children:"Data de Nascimento"}),e.jsx(z,{id:"birth_date",name:"birth_date",type:"date",value:i.birth_date,onChange:v}),c.birth_date&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.birth_date})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"cpf",children:"CPF"}),e.jsx(z,{id:"cpf",name:"cpf",value:i.cpf,onChange:P,placeholder:"000.000.000-00"}),c.cpf&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.cpf})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"document_type",children:"Tipo de Documento"}),e.jsxs(Ze,{name:"document_type",value:i.document_type,onValueChange:L,children:[e.jsx(ea,{children:e.jsx(aa,{placeholder:"Selecione o tipo"})}),e.jsx(ta,{children:oe.map(b=>e.jsx(sa,{value:b.value,children:b.label},b.value))})]}),c.document_type&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.document_type})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"document_front",children:x.files===1?"Documento (Imagem Única)":"Documento (Frente)"}),e.jsx(z,{id:"document_front",name:"document_front",type:"file",accept:"image/*,.pdf",onChange:f}),(r==null?void 0:r.document_front_image_url)&&!i.document_front&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Documento já enviado. Envie novo arquivo para substituir."}),c.document_front&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.document_front})]}),x.files===2&&e.jsxs("div",{children:[e.jsx(O,{htmlFor:"document_back",children:"Documento (Verso)"}),e.jsx(z,{id:"document_back",name:"document_back",type:"file",accept:"image/*,.pdf",onChange:f}),(r==null?void 0:r.document_back_image_url)&&!i.document_back&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Verso do documento já enviado. Envie novo arquivo para substituir."}),c.document_back&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.document_back})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"document_selfie",children:"Selfie Segurando o Documento"}),e.jsx(z,{id:"document_selfie",name:"document_selfie",type:"file",accept:"image/*",onChange:f}),(r==null?void 0:r.document_selfie_url)&&!i.document_selfie&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selfie já enviada. Envie novo arquivo para substituir."}),c.document_selfie&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.document_selfie})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"pix_key_type",children:"Tipo da Chave PIX"}),e.jsxs(Ze,{name:"pix_key_type",value:i.pix_key_type,onValueChange:w,children:[e.jsx(ea,{children:e.jsx(aa,{placeholder:"Selecione o tipo"})}),e.jsx(ta,{children:_e.map(b=>e.jsx(sa,{value:b.value,children:b.label},b.value))})]}),c.pix_key_type&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.pix_key_type})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"pix_key",children:"Chave PIX"}),e.jsx(z,{id:"pix_key",name:"pix_key",value:i.pix_key,onChange:j,placeholder:i.pix_key_type==="phone"?"(XX) XXXXX-XXXX":i.pix_key_type==="cpf"?"000.000.000-00":i.pix_key_type==="cnpj"?"00.000.000/0000-00":"Sua chave PIX"}),c.pix_key&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.pix_key})]}),e.jsxs(ve,{className:"pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:t,disabled:l,children:"Cancelar"}),e.jsxs(_,{type:"submit",disabled:l,className:"btn-gradient",children:[l&&e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),r&&(r.status==="rejected"||r.status==="rejected_verification")?"Reenviar para Verificação":"Enviar para Verificação"]})]})]})},sr=({userId:a,userBalance:s,onWithdrawalSubmitted:t,onCancel:r,verifiedPixInfo:n})=>{var v;const{toast:i}=X(),[o,l]=m.useState(""),[u,c]=m.useState(!1),[p,x]=m.useState(null),g=async j=>{j.preventDefault(),x(null);const w=parseFloat(String(o).replace(",","."));if(isNaN(w)||w<=0){x("Valor do saque deve ser maior que zero.");return}if(w>s){x("Saldo insuficiente para este saque.");return}if(!n||!n.type||!n.key){x("Informações PIX verificadas não encontradas. Verifique seu perfil.");return}c(!0);try{const{error:f}=await S.from("withdrawal_requests").insert({user_id:a,amount:w,pix_key_type:n.type,pix_key:n.key,status:"pending"});if(f)throw f;const{error:P}=await S.rpc("update_wallet_balance",{p_user_id:a,p_amount:-w,p_transaction_description:`Solicitação de Saque - R$ ${w.toFixed(2).replace(".",",")}`,p_provider_transaction_id:`wd_req_${a}_${Date.now()}`,p_transaction_status:"pending_withdrawal",p_payment_method_id:"internal",p_status_detail:"Saldo reservado para saque"});P&&(console.warn("Falha ao deduzir saldo após criar pedido de saque. Consistência de dados pode ser afetada.",P),i({title:"Atenção",description:"Pedido de saque criado, mas houve um problema ao reservar o saldo.",variant:"warning",duration:7e3})),i({title:"Pedido de Saque Enviado",description:"Seu pedido de saque foi enviado para aprovação e o valor reservado do seu saldo."}),t&&t()}catch(f){console.error("Erro ao solicitar saque:",f),x(f.message),i({title:"Erro ao Solicitar Saque",description:f.message,variant:"destructive"})}finally{c(!1)}};return e.jsxs("form",{onSubmit:g,className:"space-y-6 p-1",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Chave PIX Verificada:"}),e.jsxs("p",{className:"text-sm text-blue-900",children:[(v=n==null?void 0:n.type)==null?void 0:v.toUpperCase(),": ",n==null?void 0:n.key]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Esta chave PIX foi validada e será usada para o saque. Para alterá-la, envie uma nova solicitação de verificação."})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"amount",children:"Valor do Saque (R$)"}),e.jsx(z,{id:"amount",name:"amount",type:"number",value:o,onChange:j=>l(j.target.value),placeholder:`Disponível: R$ ${s.toFixed(2).replace(".",",")}`}),p&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:p})]}),e.jsxs(ve,{className:"pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:r,disabled:u,children:"Cancelar"}),e.jsxs(_,{type:"submit",disabled:u||!o||parseFloat(String(o).replace(",","."))<=0||parseFloat(String(o).replace(",","."))>s,className:"btn-gradient",children:[u&&e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),"Solicitar Saque"]})]})]})},rr=({isOpen:a,onOpenChange:s})=>{const{user:t,refreshAuthUser:r}=V(),[n,i]=m.useState("loading"),[o,l]=m.useState(null),[u,c]=m.useState(!0);m.useEffect(()=>{a?(c(!0),t?(async()=>{const{data:w,error:f}=await S.from("user_verifications").select("*").eq("user_id",t.id).order("requested_at",{ascending:!1}).limit(1).single();f&&f.code!=="PGRST116"&&console.error("Erro ao buscar verificação existente:",f),l(w||null),t.verification_status==="verified"&&t.is_identity_verified?i("withdrawal_form"):t.verification_status==="pending_verification"?i("pending_message"):t.verification_status==="rejected_verification"?i("rejected_message"):i("verification_form"),c(!1)})():(i("loading"),c(!1))):(i("loading"),l(null),c(!0))},[t,t==null?void 0:t.verification_status,t==null?void 0:t.is_identity_verified,a]);const p=()=>{s(!1)},x=async()=>{c(!0),await r(!1),i("pending_message"),c(!1)},g=async()=>{c(!0),await r(!0),p(),c(!1)},v=()=>{if(u||n==="loading")return e.jsxs("div",{className:"flex justify-center items-center h-40",children:[e.jsx(A,{className:"h-8 w-8 animate-spin"})," ",e.jsx("p",{className:"ml-2",children:"Carregando..."})]});if(!t)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Se,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{children:"Usuário não encontrado. Por favor, tente novamente."})]});switch(n){case"verification_form":return e.jsx(tr,{userId:t.id,onVerificationSubmitted:x,onCancel:p,existingVerification:o});case"pending_message":return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(A,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4 animate-spin"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Verificação em Análise"}),e.jsx("p",{className:"text-gray-600",children:"Seus dados foram enviados e estão sendo analisados pela nossa equipe. Você será notificado sobre o status em até 24 horas."})]});case"rejected_message":return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Se,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Verificação Rejeitada"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Sua solicitação de verificação foi rejeitada. Motivo: ",(o==null?void 0:o.admin_notes)||"Não especificado."]}),e.jsx(_,{onClick:()=>i("verification_form"),className:"btn-gradient",children:"Reenviar Dados de Verificação"})]});case"withdrawal_form":return!t.pix_info||!t.pix_info.type||!t.pix_info.key?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Se,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"PIX Não Configurado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Sua identidade foi verificada, mas não encontramos uma chave PIX associada. Por favor, envie seus dados de verificação novamente para incluir sua chave PIX."}),e.jsx(_,{onClick:()=>i("verification_form"),className:"btn-gradient",children:"Informar Chave PIX e Documentos"})]}):e.jsx(sr,{userId:t.id,userBalance:t.wallet_balance||0,onWithdrawalSubmitted:g,onCancel:p,verifiedPixInfo:t.pix_info});default:return e.jsx("p",{children:"Algo deu errado. Por favor, feche e tente novamente."})}};return e.jsx($e,{open:a,onOpenChange:s,children:e.jsxs(We,{className:"sm:max-w-lg",children:[e.jsxs(Oe,{children:[e.jsx(Le,{children:n==="withdrawal_form"?"Solicitar Saque":n==="pending_message"?"Verificação em Análise":n==="rejected_message"?"Verificação Rejeitada":"Verificação de Identidade para Saque"}),e.jsx(Ie,{children:n==="withdrawal_form"?"Informe o valor que deseja sacar para sua chave PIX verificada.":n==="pending_message"?"Aguarde a análise dos seus documentos.":n==="rejected_message"?"Sua verificação anterior foi rejeitada. Verifique os detalhes e tente novamente.":"Para realizar saques, precisamos verificar sua identidade e dados bancários (PIX)."})]}),v(),n!=="verification_form"&&n!=="withdrawal_form"&&e.jsx(ve,{className:"pt-4",children:e.jsx(_,{variant:"outline",onClick:p,children:"Fechar"})})]})})},nr=({balance:a,onDeposit:s,isDepositDisabled:t=!1})=>{const[r,n]=m.useState(!1),{user:i}=V(),{toast:o}=X(),l=()=>{if(!(i!=null&&i.is_identity_verified)){o({title:"Verificação Necessária",description:"Por favor, complete a verificação de identidade para solicitar saques.",variant:"warning",duration:5e3}),n(!0);return}n(!0)},u=()=>{t?o({title:"🚧 Em Manutenção",description:"A função de adicionar fundos está temporariamente desabilitada e estará disponível em breve. 🚀",variant:"default",duration:5e3}):s&&s()};return e.jsxs(e.Fragment,{children:[e.jsxs(T,{className:"bg-gradient-to-tr from-gray-900 to-gray-800 text-white shadow-2xl rounded-2xl overflow-hidden",children:[e.jsxs(F,{children:[e.jsx($,{className:"text-lg font-medium",children:"Saldo Atual"}),e.jsx(W,{className:"text-gray-300",children:"Seu saldo disponível para uso."})]}),e.jsxs(R,{children:[e.jsxs("p",{className:"text-5xl font-bold mb-6",children:["R$ ",Number(a||0).toFixed(2).replace(".",",")]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(Ve,{children:e.jsxs(Be,{open:t?void 0:!1,children:[e.jsx(He,{asChild:!0,children:e.jsxs(_,{onClick:u,className:`bg-green-500 hover:bg-green-600 text-white flex-1 font-semibold ${t?"opacity-50 cursor-not-allowed":""}`,disabled:t,children:[e.jsx(pa,{className:"mr-2 h-4 w-4"})," Adicionar Fundos"]})}),t&&e.jsx(Ye,{side:"bottom",className:"bg-gray-800 text-white border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xa,{className:"h-4 w-4 mr-2 text-yellow-400"}),e.jsx("p",{children:"Função temporariamente desabilitada."})]})})]})}),e.jsxs(_,{onClick:l,className:"bg-blue-500 hover:bg-blue-600 text-white flex-1 font-semibold",disabled:!i,children:[e.jsx(xa,{className:"mr-2 h-4 w-4"})," Sacar"]})]})]})]}),i&&e.jsx(rr,{isOpen:r,onOpenChange:n})]})},ir=a=>{switch(a){case"deposit":return e.jsx(pa,{className:"h-5 w-5 text-green-500"});case"withdrawal":return e.jsx(xa,{className:"h-5 w-5 text-red-500"});case"payment":return e.jsx(Za,{className:"h-5 w-5 text-blue-500"});case"payout":return e.jsx(Ka,{className:"h-5 w-5 text-purple-500"});case"subscription":return e.jsx(Ja,{className:"h-5 w-5 text-indigo-500"});case"hiring":return e.jsx(qe,{className:"h-5 w-5 text-orange-500"});default:return e.jsx(qe,{className:"h-5 w-5 text-gray-500"})}},or=a=>{switch(a){case"completed":return e.jsx(ae,{className:"bg-green-100 text-green-800",children:"Completo"});case"approved":return e.jsx(ae,{className:"bg-green-100 text-green-800",children:"Aprovado"});case"pending":return e.jsx(ae,{className:"bg-yellow-100 text-yellow-800",children:"Pendente"});case"failed":return e.jsx(ae,{variant:"destructive",children:"Falhou"});case"rejected":return e.jsx(ae,{variant:"destructive",children:"Rejeitado"});case"cancelled":return e.jsx(ae,{variant:"destructive",className:"bg-gray-200 text-gray-700",children:"Cancelado"});case"refunded":return e.jsx(ae,{className:"bg-purple-100 text-purple-800",children:"Estornado"});default:return e.jsx(ae,{variant:"secondary",children:a})}},lr=a=>({deposit:"Depósito",withdrawal:"Saque",payment:"Pagamento",payout:"Recebimento",subscription:"Assinatura",hiring:"Contratação"})[a]||a,cr=({transactions:a,loading:s})=>e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Histórico de Transações"}),e.jsx(W,{children:"Visualize todas as movimentações da sua carteira."})]}),e.jsx(R,{children:s?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-pink-600"})}):a&&a.length>0?e.jsxs(Ya,{children:[e.jsx(Ga,{children:e.jsxs(na,{children:[e.jsx(he,{children:"Tipo"}),e.jsx(he,{children:"Data"}),e.jsx(he,{children:"Status"}),e.jsx(he,{className:"text-right",children:"Valor"})]})}),e.jsx(Qa,{children:a.map(t=>e.jsxs(na,{children:[e.jsx(pe,{children:e.jsx(Ve,{children:e.jsxs(Be,{children:[e.jsx(He,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[ir(t.type),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:lr(t.type)}),t.description&&e.jsx("span",{className:"text-xs text-muted-foreground hidden md:block max-w-[200px] truncate",children:t.description})]})]})}),e.jsx(Ye,{children:e.jsx("p",{children:t.description||"Sem descrição"})})]})})}),e.jsx(pe,{className:"text-gray-600",children:new Date(t.created_at).toLocaleDateString("pt-BR")}),e.jsx(pe,{children:or(t.status)}),e.jsxs(pe,{className:`text-right font-semibold ${t.type==="withdrawal"||t.type==="payment"?"text-red-600":"text-green-600"}`,children:[["withdrawal","payment","hiring"].includes(t.type)?"-":"+"," R$ ",Number(t.amount).toFixed(2).replace(".",",")]})]},t.id))})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(qe,{className:"h-20 w-20 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-xl font-medium text-gray-900 mb-2",children:"Sem transações por aqui"}),e.jsx("p",{className:"text-gray-600",children:"Quando você movimentar sua carteira, as transações aparecerão aqui."})]})})]}),Fe=()=>{const{user:a,appSettings:s,isFetchingAuth:t}=V(),{toast:r}=X(),[n,i]=m.useState([]),[o,l]=m.useState(!1),[u,c]=m.useState(!0),[p,x]=m.useState(1),[g,v]=m.useState(!1),[j,w]=m.useState(""),[f,P]=m.useState(!1),L=async(d=1,h=!1)=>{if(!(o||!u&&!h)){l(!0);try{const{data:y,error:M}=await S.from("wallet_transactions").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).range((d-1)*10,d*10-1);if(M)throw M;i(k=>h?y:[...k,...y]),c(y.length===10),x(d)}catch(y){r({title:"Erro ao buscar transações",description:y.message,variant:"destructive"})}finally{l(!1),g||v(!0)}}};m.useEffect(()=>{a!=null&&a.id&&!g&&L(1,!0)},[a==null?void 0:a.id,g]);const E=(s==null?void 0:s.MERCADOPAGO_PUBLIC_KEY)&&((s==null?void 0:s.ENABLE_WALLET_RECHARGE)===!0||(s==null?void 0:s.ENABLE_WALLET_RECHARGE)==="true"),U=()=>{const d=Ba(j);if(isNaN(d)||d<=0){r({title:"Valor inválido",description:"Por favor, insira um valor de depósito válido.",variant:"destructive"});return}P(!0)},b=()=>{P(!0)};return t||!g?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-pink-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(pt,{isOpen:f,onClose:()=>P(!1)}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(nr,{balance:(a==null?void 0:a.wallet_balance)||0,onWithdraw:b,isWithdrawDisabled:!1})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Adicionar Fundos"}),e.jsx(W,{children:"Recarregue sua carteira para contratar modelos e comprar assinaturas."})]}),e.jsxs(R,{className:"space-y-4",children:[!E&&e.jsxs(te,{variant:"warning",className:"border-orange-400 bg-orange-50 text-orange-900",children:[e.jsx(ge,{className:"h-5 w-5 text-orange-600 mr-3 mt-1"}),e.jsx(se,{className:"font-semibold",children:"Depósitos Indisponíveis"}),e.jsx(re,{children:"A funcionalidade de depósito está desabilitada no momento."})]}),E&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"deposit-amount",children:"Valor do Depósito (R$)"}),e.jsx(z,{id:"deposit-amount",type:"text",inputMode:"decimal",placeholder:"Ex: 50,00",value:j,onChange:d=>w(Va(d.target.value)),className:"mt-1"})]}),e.jsx(_,{onClick:U,className:"w-full btn-gradient text-white",disabled:!j,children:"Adicionar Fundos"})]})]})]})})]}),e.jsxs(T,{children:[e.jsxs(F,{children:[e.jsx($,{children:"Histórico de Transações"}),e.jsx(W,{children:"Veja todas as movimentações da sua carteira."})]}),e.jsxs(R,{children:[e.jsx(cr,{transactions:n,loading:o}),u&&!o&&e.jsx("div",{className:"text-center mt-4",children:e.jsx(_,{variant:"outline",onClick:()=>L(p+1),children:"Carregar Mais"})}),!o&&n.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhuma transação encontrada."})]})]})]})},dr={model:[{id:"overview",label:"Visão Geral",icon:ye,component:Pe},{id:"profile",label:"Editar Perfil",icon:we,component:ke},{id:"gallery",label:"Galeria de Fotos",icon:ra,component:Hs},{id:"videos",label:"Vídeos",icon:ra,component:Ys},{id:"proposals",label:"Minhas Propostas",icon:Y,component:Me},{id:"contracts",label:"Contratos",icon:Y,component:De},{id:"reviews",label:"Avaliações",icon:K,component:Ee},{id:"wallet",label:"Carteira",icon:me,component:Fe},{id:"subscription",label:"Assinatura",icon:K,component:Ae},{id:"settings",label:"Configurações",icon:Ne,component:Te}],contractor:[{id:"overview",label:"Visão Geral",icon:ye,component:Pe},{id:"profile",label:"Editar Perfil",icon:we,component:ke},{id:"proposals",label:"Propostas Enviadas",icon:Y,component:Me},{id:"contracts",label:"Contratos",icon:Y,component:De},{id:"reviews",label:"Avaliações",icon:K,component:Ee},{id:"wallet",label:"Carteira",icon:me,component:Fe},{id:"subscription",label:"Assinatura",icon:K,component:Ae},{id:"settings",label:"Configurações",icon:Ne,component:Te}],photographer:[{id:"overview",label:"Visão Geral",icon:ye,component:Pe},{id:"profile",label:"Editar Perfil",icon:we,component:ke},{id:"proposals",label:"Propostas Enviadas",icon:Y,component:Me},{id:"contracts",label:"Contratos",icon:Y,component:De},{id:"reviews",label:"Avaliações",icon:K,component:Ee},{id:"wallet",label:"Carteira",icon:me,component:Fe},{id:"subscription",label:"Assinatura",icon:K,component:Ae},{id:"settings",label:"Configurações",icon:Ne,component:Te}]},Cr=()=>{var l;const{user:a,profile:s,loading:t}=V(),[r,n]=m.useState("overview");if(t)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-pink-500"})});if(!a||!s)return e.jsx(Ha,{to:"/?auth=login",replace:!0});const i=dr[a.user_type]||[],o=(l=i.find(u=>u.id===r))==null?void 0:l.component;return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("aside",{className:"w-full md:w-64 flex-shrink-0",children:[e.jsx("div",{className:"hidden md:block bg-white p-4 rounded-lg shadow-sm",children:e.jsx("nav",{className:"space-y-1",children:i.map(u=>e.jsxs("button",{onClick:()=>n(u.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${r===u.id?"bg-pink-100 text-pink-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(u.icon,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u.label})]},u.id))})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Zs,{tabs:i,activeTab:r,setActiveTab:n})})]}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm min-h-[60vh]",children:o?e.jsx(o,{}):e.jsx("div",{children:"Selecione uma aba"})})})]})})};export{Cr as default};
