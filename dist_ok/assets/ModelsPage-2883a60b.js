import{j as e,L as m,g as u,h as p,i as j,k as f,l as c,n as Y,B as C,u as te,o as oe,a as ie,r as i,p as ce,d as Q,q as ne,s as de,t as me}from"./index-1d87757c.js";import{M as X}from"./ModelCard-788ac87e.js";import{b as Z,m as ee,a as se,c as le}from"./jobOptions-1997529c.js";import{T as ae}from"./trash-2-18ebab21.js";import{S as xe,a as he,b as ue,c as pe,d as je,e as fe,f as ge,g as ve}from"./sheet-74228ed3.js";import{S as Ne}from"./sliders-horizontal-0f7afeec.js";import"./shield-check-7b3002bb.js";import"./map-pin-b62a81cc.js";const q="all",be=({sortBy:k,setSortBy:A,sortOptions:d,filterState:v,setFilterState:L,filterAppearanceType:x,setFilterAppearanceType:N,filterProfileType:b,setFilterProfileType:y,filterInterests:h,handleInterestChange:w,clearFilters:n})=>e.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"sortByDesktop",className:"text-sm font-medium text-gray-700",children:"Ordenar Por"}),e.jsxs(u,{value:k,onValueChange:A,children:[e.jsx(p,{id:"sortByDesktop",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Ordenar por..."})}),e.jsx(f,{children:d.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterStateDesktop",className:"text-sm font-medium text-gray-700",children:"Estado"}),e.jsxs(u,{value:v,onValueChange:L,children:[e.jsx(p,{id:"filterStateDesktop",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Todos"})}),e.jsxs(f,{children:[e.jsx(c,{value:q,children:"Todos"}),Z.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterAppearanceTypeDesktop",className:"text-sm font-medium text-gray-700",children:"Aparência"}),e.jsxs(u,{value:x,onValueChange:N,children:[e.jsx(p,{id:"filterAppearanceTypeDesktop",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Todos"})}),e.jsxs(f,{children:[e.jsx(c,{value:q,children:"Todos"}),ee.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterProfileTypeDesktop",className:"text-sm font-medium text-gray-700",children:"Perfil Físico"}),e.jsxs(u,{value:b,onValueChange:y,children:[e.jsx(p,{id:"filterProfileTypeDesktop",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Todos"})}),e.jsxs(f,{children:[e.jsx(c,{value:q,children:"Todos"}),se.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"relative lg:col-span-1",children:[" ",e.jsx(m,{className:"text-sm font-medium text-gray-700",children:"Interesses"}),e.jsxs(u,{value:h.length>0?h.join(", "):"",onValueChange:()=>{},children:[e.jsx(p,{className:"w-full mt-1",children:e.jsx(j,{placeholder:h.length>0?`${h.length} selecionado(s)`:"Todos"})}),e.jsx(f,{className:"p-2",children:e.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-60 overflow-y-auto",children:le.map(a=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-100 cursor-pointer",onClick:()=>w(a.value),children:[e.jsx(Y,{id:`desktop-interest-${a.value}`,checked:h.includes(a.value),onCheckedChange:()=>w(a.value)}),e.jsx(m,{htmlFor:`desktop-interest-${a.value}`,className:"text-sm font-normal cursor-pointer flex-1",children:a.label})]},a.value))})})]})]}),e.jsxs("div",{className:"lg:col-start-5 lg:justify-self-end",children:[" ",e.jsxs(C,{onClick:()=>n(!1),variant:"outline",className:"w-full lg:w-auto self-end py-2.5 h-auto",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"})," Limpar Filtros"]})]})]}),$="all",ye=({sortBy:k,setSortBy:A,sortOptions:d,filterState:v,setFilterState:L,filterAppearanceType:x,setFilterAppearanceType:N,filterProfileType:b,setFilterProfileType:y,filterInterests:h,handleInterestChange:w,clearFilters:n,showFiltersSheet:a,setShowFiltersSheet:E})=>e.jsxs("div",{className:"md:hidden w-full flex gap-2",children:[e.jsxs(u,{value:k,onValueChange:A,className:"flex-1",children:[e.jsx(p,{id:"sortByMobile",className:"w-full py-2.5 h-auto",children:e.jsx(j,{placeholder:"Ordenar por..."})}),e.jsx(f,{children:d.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))})]}),e.jsxs(xe,{open:a,onOpenChange:E,children:[e.jsx(he,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"flex-1 py-2.5 h-auto",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2"})," Filtros"]})}),e.jsxs(ue,{side:"bottom",className:"h-[85vh] flex flex-col",children:[e.jsxs(pe,{className:"p-4 border-b",children:[e.jsx(je,{children:"Filtros Avançados"}),e.jsx(fe,{children:"Refine sua busca para o talento ideal."})]}),e.jsx("div",{className:"flex-grow overflow-y-auto p-4 scrollbar-thin",children:e.jsxs("div",{className:"space-y-4 p-1",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterStateMobile",className:"text-sm font-medium text-gray-700",children:"Estado (UF)"}),e.jsxs(u,{value:v,onValueChange:L,children:[e.jsx(p,{id:"filterStateMobile",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Todos os estados"})}),e.jsxs(f,{children:[e.jsx(c,{value:$,children:"Todos os estados"}),Z.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:"Interesses"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1 max-h-60 overflow-y-auto p-1 rounded-md border",children:le.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50",children:[e.jsx(Y,{id:`mobile-interest-${s.value}`,checked:h.includes(s.value),onCheckedChange:()=>w(s.value)}),e.jsx(m,{htmlFor:`mobile-interest-${s.value}`,className:"text-sm font-normal cursor-pointer",children:s.label})]},s.value))})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterAppearanceTypeMobile",className:"text-sm font-medium text-gray-700",children:"Tipo (Aparência)"}),e.jsxs(u,{value:x,onValueChange:N,children:[e.jsx(p,{id:"filterAppearanceTypeMobile",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Todos os tipos"})}),e.jsxs(f,{children:[e.jsx(c,{value:$,children:"Todos os tipos"}),ee.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterProfileTypeMobile",className:"text-sm font-medium text-gray-700",children:"Perfil Físico"}),e.jsxs(u,{value:b,onValueChange:y,children:[e.jsx(p,{id:"filterProfileTypeMobile",className:"w-full mt-1",children:e.jsx(j,{placeholder:"Todos os perfis"})}),e.jsxs(f,{children:[e.jsx(c,{value:$,children:"Todos os perfis"}),se.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))]})]})]})]})}),e.jsxs(ge,{className:"p-4 border-t flex-col sm:flex-row gap-2",children:[e.jsxs(C,{variant:"outline",onClick:()=>n(!0),className:"w-full py-2.5 h-auto",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Limpar"]}),e.jsx(ve,{asChild:!0,children:e.jsx(C,{className:"w-full btn-gradient py-2.5 h-auto",children:"Aplicar"})})]})]})]})]}),ke=()=>{const{user:k,openAuthModal:A,appSettings:d}=te(),{toast:v}=oe(),L=ie(),[x,N]=i.useState(""),[b,y]=i.useState(!0),[h,w]=i.useState([]),n="all",a=i.useMemo(()=>parseInt((d==null?void 0:d.MODELS_PAGE_PRO_LIMIT)||"8",10),[d]),E=i.useMemo(()=>parseInt((d==null?void 0:d.MODELS_PAGE_COMMON_LIMIT)||"24",10),[d]),[s,G]=i.useState("pro_random"),[M,I]=i.useState(n),[_,U]=i.useState([]),[T,O]=i.useState(n),[S,R]=i.useState(n),[re,z]=i.useState(!1),H=[{value:"pro_random",label:"🌟 Destaque Aleatório"},{value:"pro_recent",label:"🌟 Destaque Recentes"},{value:"recent",label:"⏳ Mais Recentes (Geral)"},{value:"oldest",label:"🕰️ Mais Antigos (Geral)"},{value:"random",label:"🎲 Aleatório (Geral)"}],P=i.useCallback(l=>{let t=l.length,o;for(;t!==0;)o=Math.floor(Math.random()*t),t--,[l[t],l[o]]=[l[o],l[t]];return l},[]);i.useEffect(()=>{(async()=>{y(!0);let t=me.from("profiles").select("*").eq("user_type","model");s==="pro_recent"||s==="recent"?t=t.order("created_at",{ascending:!1}):s==="oldest"&&(t=t.order("created_at",{ascending:!0}));try{const{data:o,error:r}=await t;if(r)throw r.code!=="SUPABASE_INIT_ERROR"&&v({title:"Erro ao buscar modelos",description:r.message,variant:"destructive"}),r;w(o||[])}catch(o){console.error("Erro em fetchModels:",o)}finally{y(!1)}})()},[v,s]);const W=l=>{U(t=>t.includes(l)?t.filter(o=>o!==l):[...t,l])},{proModelsList:D,commonModelsList:V}=i.useMemo(()=>{let l=[...h].filter(r=>{var g,F,K;return((r.first_name||"")+" "+(r.last_name||"")).toLowerCase().includes(x.toLowerCase())||(((g=r.city)==null?void 0:g.toLowerCase())||"").includes(x.toLowerCase())||(((F=r.model_physical_type)==null?void 0:F.toLowerCase())||"").includes(x.toLowerCase())||(((K=r.model_type)==null?void 0:K.toLowerCase())||"").includes(x.toLowerCase())});M&&M!==n&&(l=l.filter(r=>r.state===M)),_.length>0&&(l=l.filter(r=>_.some(g=>{var F;return(F=r.work_interests)==null?void 0:F.includes(g)}))),T&&T!==n&&(l=l.filter(r=>r.model_physical_type===T)),S&&S!==n&&(l=l.filter(r=>r.model_type===S));let t=l.filter(r=>r.subscription_type==="pro"),o=l.filter(r=>r.subscription_type!=="pro");if(s==="pro_random")t=P(t),o=P(o);else if(s!=="pro_recent"){if(s==="random"){const r=P(l);t=r.filter(g=>g.subscription_type==="pro"),o=r.filter(g=>g.subscription_type!=="pro")}}return{proModelsList:t.slice(0,a),commonModelsList:[...t.slice(a),...o].slice(0,E)}},[h,x,M,_,T,S,s,P,a,E]),B=(l=!0)=>{N(""),I(n),U([]),O(n),R(n),l&&z(!1)},J=D.length+V.length;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2",children:[e.jsx(ce,{className:"h-7 w-7 sm:h-8 sm:w-8 text-pink-500"}),e.jsx("span",{children:"Encontre sua"})," ",e.jsx("span",{className:"gradient-text",children:"Modelo Perfeita"})]}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-2xl mx-auto",children:"Conecte-se com modelos excepcionais para seus projetos e castings."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg flex-1 w-full md:w-auto",children:[e.jsx(Q,{className:"ml-3 text-gray-400 h-5 w-5 flex-shrink-0"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, cidade...",value:x,onChange:l=>N(l.target.value),className:"w-full pl-2 pr-4 py-3 border-none rounded-r-lg focus:ring-0"})]}),e.jsx(ye,{sortBy:s,setSortBy:G,sortOptions:H,filterState:M,setFilterState:I,filterAppearanceType:T,setFilterAppearanceType:O,filterProfileType:S,setFilterProfileType:R,filterInterests:_,handleInterestChange:W,clearFilters:B,showFiltersSheet:re,setShowFiltersSheet:z})]}),e.jsx(be,{sortBy:s,setSortBy:G,sortOptions:H,filterState:M,setFilterState:I,filterAppearanceType:T,setFilterAppearanceType:O,filterProfileType:S,setFilterProfileType:R,filterInterests:_,handleInterestChange:W,clearFilters:B})]}),e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600",children:b?"Carregando modelos...":`Encontrados ${J} modelos`})}),b?e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsx(ne,{className:"h-12 w-12 text-pink-500 animate-spin"})}):e.jsx(e.Fragment,{children:J===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Q,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum modelo encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tente ajustar os filtros ou termos de busca"}),e.jsx(C,{onClick:()=>B(!1),variant:"outline",className:"py-2.5 h-auto",children:"Limpar Filtros"})]}):e.jsxs(e.Fragment,{children:[D.length>0&&e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx(de,{className:"h-6 w-6 mr-2 text-yellow-500"})," Modelos em Destaque PRO"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Talentos PRO com visibilidade premium. ",e.jsx(C,{variant:"link",onClick:()=>L("/dashboard",{state:{tab:"subscription"}}),className:"text-pink-600 p-0 h-auto",children:"Assine PRO e apareça aqui!"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6",children:D.map(l=>e.jsx(X,{model:l},l.id))})]}),V.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:D.length>0?"Mais Modelos":"Modelos"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6",children:V.map(l=>e.jsx(X,{model:l},l.id))})]})]})})]})})};export{ke as default};
