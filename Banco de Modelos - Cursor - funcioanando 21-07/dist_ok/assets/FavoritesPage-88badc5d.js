import{u as j,o as N,a as p,r as d,j as e,q as b,ak as m,B as f,S as y,t as g}from"./index-1d87757c.js";import{M as w}from"./map-pin-b62a81cc.js";const S=()=>{const{user:a,openAuthModal:_}=j(),{toast:i}=N(),o=p(),[x,h]=d.useState([]),[v,c]=d.useState(!0);return d.useEffect(()=>{(async()=>{if(!a){c(!1);return}try{c(!0);const{data:l,error:t}=await g.from("user_favorites").select("favorited_profile_id").eq("user_id",a.id);if(t)throw t.code!=="SUPABASE_INIT_ERROR"&&i({title:"Erro ao buscar IDs de favoritos",description:t.message,variant:"destructive"}),t;const u=l.map(n=>n.favorited_profile_id);if(u.length>0){const{data:n,error:r}=await g.from("profiles").select("*").in("id",u);if(r)throw r.code!=="SUPABASE_INIT_ERROR"&&i({title:"Erro ao buscar perfis favoritos",description:r.message,variant:"destructive"}),r;h(n)}else h([])}catch(l){console.error("Erro em fetchFavorites:",l)}finally{c(!1)}})()},[a,i]),v?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(b,{className:"h-12 w-12 text-pink-500 animate-spin"})}):a?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:["Meus ",e.jsx("span",{className:"gradient-text",children:"Favoritos"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Os perfis que você marcou como favoritos estão aqui."})]}),x.length>0?e.jsx("div",{className:"profile-grid",children:x.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden card-hover animate-fade-in cursor-pointer",onClick:()=>s.profile_slug&&o(`/perfil/${s.profile_slug}`),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"w-full h-80 object-cover",src:s.profile_image_url||`https://api.dicebear.com/7.x/micah/svg?seed=${s.name}`,alt:`Foto de ${s.name}`}),e.jsx("div",{className:"absolute top-3 right-3 w-8 h-8 bg-white/90 rounded-full flex items-center justify-center shadow",children:e.jsx(m,{className:"h-4 w-4 text-red-500 fill-current"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center text-gray-600 text-sm mb-2",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),s.city||"Local não informado",", ",s.state||""]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(y,{className:"h-4 w-4 text-yellow-400 fill-current mr-1"}),e.jsx("span",{className:"font-medium text-gray-800",children:Number(s.avg_rating||0).toFixed(1)}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",s.rating_count||0,")"]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum favorito ainda"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Clique no coração nos perfis para salvá-los aqui."}),e.jsx(f,{onClick:()=>o("/modelos"),variant:"outline",children:"Explorar Modelos"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(m,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Acesse seus Favoritos"}),e.jsx("p",{className:"text-lg text-gray-500 mb-6",children:"Faça login para ver os perfis que você mais gostou."}),e.jsx(f,{onClick:()=>o("/cadastro"),className:"btn-gradient text-white",children:"Fazer Login"})]})})};export{S as default};
