import{c as Te,r as G,o as Ne,a as ir,t as ne,j as e,Z as ae,d as Ur,B as re,q as se,E as ge,s as kn,X as Pn,D as Fe,v as $e,w as Ue,x as He,z as Ke,L as J,g as Ce,h as Ie,i as Le,k as Re,l as be,G as We,u as Je,a2 as zt,Q as Hr,T as Cn,Y as In,aI as St,aF as Ln,aG as Rn,aH as Mn,M as Nt,J as _e,_ as je,$ as Ee,F as Ot,a0 as we,K as Oe,aa as zr,W as Dn,a1 as pt,U as Et,b as Xt,O as qn,aJ as Vr,C as Bn,f as Yt,ad as Gr,ac as Fn,aw as $n,aK as Kr,aA as Un,ax as Hn,aL as zn,aB as It,aM as Vn,aN as Gn,ay as Vt,aO as Kn,a4 as or,a3 as sr,aP as ke,ar as Wn,at as Xn,ah as Yn,a5 as Zn,aj as Qn}from"./index-1d87757c.js";import{T as et,c as tt,d as Se,e as de,f as rt,g as fe,A as Xe,a as Ye,b as Ze,C as lr,L as Jn,h as ea,D as ta,U as ra}from"./table-4cc4b283.js";import{P as na,U as aa,S as Me,D as ia,b as oa}from"./verificationFormUtils-4c5770fb.js";import{a as Wr,A as nt,b as at,c as it,d as ot,e as st,f as lt,g as ut,h as ct,i as dt,T as ft,S as De,P as Lt}from"./textarea-bd3e9a46.js";import{S as sa}from"./shield-check-7b3002bb.js";import{C as la,P as Rt}from"./pen-3edc6ea5.js";import{T as wt}from"./trash-2-18ebab21.js";import{C as ua}from"./crop-74373485.js";import{j as ca}from"./jobOptions-1997529c.js";import{A as ht}from"./alert-triangle-bda1dbcf.js";import{M as da}from"./message-circle-abaca2d5.js";import{M as Xr}from"./mail-8703cb89.js";import"./ProfileFormHandler-24dd2d47.js";const fa=Te("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),ha=Te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),pa=Te("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),Yr=Te("BellDot",[["path",{d:"M19.4 14.9C20.2 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 .7 0 1.3.1 1.9.3",key:"xcehk"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["circle",{cx:"18",cy:"8",r:"3",key:"1g0gzu"}]]),va=Te("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),ma=Te("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),ga=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ya=Te("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]),xa=Te("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Zr=Te("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),ba=Te("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Qr=Te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Zt=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),_a=Te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ja=()=>{const[x,k]=G.useState([]),[y,c]=G.useState(!0),[p,A]=G.useState(""),[j,g]=G.useState(!1),[v,m]=G.useState(null),[d,s]=G.useState(!1),[t,n]=G.useState(1),[o,l]=G.useState(null),[u,a]=G.useState(!1),[i,h]=G.useState(!1),{toast:r}=Ne(),f=ir(),b=G.useCallback(async()=>{c(!0);let q=ne.from("profiles").select("*").order("created_at",{ascending:!1});p&&(q=q.or(`name.ilike.%${p}%,email.ilike.%${p}%`));const{data:U,error:W}=await q;W?r({title:"Erro ao buscar usuários",description:W.message,variant:"destructive"}):k(U),c(!1)},[p,r]);G.useEffect(()=>{b()},[b]);const N=q=>{m(q),g(!0)},E=async()=>{if(o){a(!0);try{const{error:q}=await ne.rpc("admin_delete_user",{user_id_to_delete:o.id});if(q)throw q;r({title:"Usuário Excluído",description:`O usuário ${o.name} foi excluído com sucesso.`}),b(),l(null)}catch(q){r({title:"Erro ao excluir usuário",description:q.message,variant:"destructive"}),console.error("Erro ao excluir usuário:",q)}finally{a(!1)}}},S=q=>{m(q),n(1),s(!0)},w=async()=>{if(v){a(!0);try{const q=`admin_grant_${v.id}_${Date.now()}`,U=`pro_${t}m_admin`,{error:W}=await ne.rpc("process_new_subscription",{p_user_id:v.id,p_plan_identifier:U,p_duration_months:parseInt(t,10),p_payment_provider:"admin_grant",p_provider_transaction_id:q,p_amount_paid:0,p_transaction_description:`Assinatura PRO concedida pelo admin - ${t} meses`,p_transaction_status_detail:"admin_granted"});if(W)throw W;r({title:"Assinatura Concedida",description:`Assinatura PRO de ${t} mes(es) concedida para ${v.name}.`}),b(),s(!1),m(null)}catch(q){r({title:"Erro ao conceder assinatura",description:q.message,variant:"destructive"}),console.error("Erro ao conceder assinatura:",q)}finally{a(!1)}}},_=async q=>{h(!0);try{const{error:U}=await ne.rpc("revoke_pro_subscription",{p_user_id:q.id});if(U)throw U;r({title:"Assinatura Revogada",description:`A assinatura PRO de ${q.name} foi revogada com sucesso.`}),b()}catch(U){r({title:"Erro ao revogar assinatura",description:U.message,variant:"destructive"}),console.error("Erro ao revogar assinatura:",U)}finally{h(!1)}},O=q=>{g(!1),m(null),b(),r({title:"Perfil Atualizado",description:`Dados de ${q.name} salvos.`,variant:"success"})},T=({userType:q})=>{const W={model:{label:"Modelo",color:"bg-pink-500"},contractor:{label:"Contratante",color:"bg-blue-500"},photographer:{label:"Fotógrafo",color:"bg-purple-500"},admin:{label:"Admin",color:"bg-red-600"}}[q]||{label:q,color:"bg-gray-500"};return e.jsx(ge,{className:`${W.color} text-white hover:${W.color}`,children:W.label})},L=q=>{if(!q)return null;const U=new Date(q);return U<=new Date?null:U.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})},M=q=>q.subscription_type==="pro"&&q.subscription_expires_at&&new Date(q.subscription_expires_at)>new Date;return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Gerenciamento de Usuários"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(ae,{type:"text",placeholder:"Buscar por nome ou email...",value:p,onChange:q=>A(q.target.value),className:"pl-10"}),e.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),e.jsxs(re,{onClick:()=>{m(null),g(!0)},className:"btn-gradient text-white",children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"})," Novo Usuário (Admin)"]})]}),y?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(se,{className:"h-12 w-12 animate-spin text-pink-600"})}):x.length===0&&!p?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhum usuário encontrado."}):x.length===0&&p?e.jsxs("p",{className:"text-center text-gray-500 py-8",children:['Nenhum usuário encontrado para "',p,'".']}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Nome"}),e.jsx(de,{children:"Email"}),e.jsx(de,{children:"Tipo"}),e.jsx(de,{className:"text-center",children:"Status"}),e.jsx(de,{className:"text-center",children:"Ações"})]})}),e.jsx(rt,{children:x.map(q=>{const U=M(q),W=L(q.subscription_expires_at);return e.jsxs(Se,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:q.profile_image_url||`https://api.dicebear.com/7.x/micah/svg?seed=${q.id}`,alt:q.name,className:"w-8 h-8 rounded-full object-cover"}),q.name]})}),e.jsx(fe,{children:q.email}),e.jsx(fe,{children:e.jsx(T,{userType:q.user_type})}),e.jsxs(fe,{className:"text-center space-x-1",children:[q.is_verified&&e.jsxs(ge,{variant:"secondary",className:"bg-blue-100 text-blue-700 border-blue-300",children:[e.jsx(sa,{className:"h-3.5 w-3.5 mr-1"}),"Verificado"]}),U&&e.jsxs(ge,{variant:"secondary",className:"bg-yellow-100 text-yellow-700 border-yellow-300",children:[e.jsx(kn,{className:"h-3.5 w-3.5 mr-1"}),"PRO ",W&&`até ${W}`]})]}),e.jsxs(fe,{className:"text-center space-x-2",children:[e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>N(q),children:[e.jsx(Wr,{className:"mr-1 h-3.5 w-3.5"})," Editar"]}),U?e.jsxs(nt,{children:[e.jsx(at,{asChild:!0,children:e.jsxs(re,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:[e.jsx(Pn,{className:"mr-1 h-3.5 w-3.5"})," Revogar PRO"]})}),e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(st,{children:"Revogar Assinatura PRO"}),e.jsxs(lt,{children:["Tem certeza que deseja revogar a assinatura PRO de ",e.jsx("strong",{children:q.name}),"? Esta ação irá remover imediatamente todos os benefícios PRO do usuário."]})]}),e.jsxs(ut,{children:[e.jsx(ct,{children:"Cancelar"}),e.jsx(dt,{onClick:()=>_(q),disabled:i,className:"bg-orange-600 hover:bg-orange-700",children:i?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):"Revogar Assinatura"})]})]})]}):e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>S(q),children:[e.jsx(la,{className:"mr-1 h-3.5 w-3.5"})," Conceder PRO"]}),e.jsxs(nt,{children:[e.jsx(at,{asChild:!0,children:e.jsxs(re,{variant:"destructive",size:"sm",onClick:()=>l(q),children:[e.jsx(wt,{className:"mr-1 h-3.5 w-3.5"})," Excluir"]})}),o&&o.id===q.id&&e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(st,{children:"Confirmar Exclusão"}),e.jsxs(lt,{children:["Tem certeza que deseja excluir o usuário ",e.jsx("strong",{children:o.name}),"? Esta ação é irreversível e removerá todos os dados associados, incluindo informações de autenticação."]})]}),e.jsxs(ut,{children:[e.jsx(ct,{onClick:()=>l(null),children:"Cancelar"}),e.jsx(dt,{onClick:E,disabled:u,className:"bg-red-600 hover:bg-red-700",children:u?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):"Excluir Usuário"})]})]})]}),e.jsx(re,{variant:"ghost",size:"sm",onClick:()=>q.profile_slug&&f(`/perfil/${q.profile_slug}`),title:"Ver Perfil",children:e.jsx(xa,{className:"h-4 w-4 text-gray-600 hover:text-pink-600"})})]})]},q.id)})})]})}),e.jsx(Fe,{open:j,onOpenChange:q=>{q||m(null),g(q)},children:e.jsxs($e,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(He,{children:v?"Editar Usuário":"Criar Novo Usuário (Admin)"}),e.jsx(Ke,{children:v?`Modifique os dados de ${v.name}.`:"Crie um novo perfil de usuário. A senha será definida pelo usuário no primeiro login ou via recuperação."})]}),e.jsx(na,{initialProfileData:v,onSuccess:O,onCancel:()=>{m(null),g(!1)},viewMode:"admin"})]})}),e.jsx(Fe,{open:d,onOpenChange:s,children:e.jsxs($e,{children:[e.jsxs(Ue,{children:[e.jsx(He,{children:"Conceder Assinatura PRO"}),e.jsx(Ke,{children:v&&M(v)?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-orange-600 font-medium",children:"⚠️ Este usuário já possui uma assinatura PRO ativa!"}),e.jsxs("p",{children:[e.jsx("strong",{children:v.name})," já é PRO até"," ",e.jsx("strong",{children:L(v.subscription_expires_at)}),"."]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Conceder uma nova assinatura irá estender o período atual."})]}):e.jsxs("p",{children:["Conceda um período de assinatura PRO para ",v==null?void 0:v.name,"."]})})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(J,{htmlFor:"subscription-months",children:"Duração (meses)"}),e.jsxs(Ce,{value:String(t),onValueChange:q=>n(Number(q)),children:[e.jsx(Ie,{id:"subscription-months",children:e.jsx(Le,{placeholder:"Selecione a duração"})}),e.jsxs(Re,{children:[e.jsx(be,{value:"1",children:"1 Mês"}),e.jsx(be,{value:"3",children:"3 Meses"}),e.jsx(be,{value:"6",children:"6 Meses"}),e.jsx(be,{value:"12",children:"12 Meses (1 Ano)"})]})]})]}),e.jsxs(We,{children:[e.jsx(re,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(re,{onClick:w,className:"btn-gradient text-white",disabled:u,children:u?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):v&&M(v)?"Estender Assinatura":"Conceder Assinatura"})]})]})})]})};function Ea(x,k,y){return Rn(Mn({unit:"%",width:90},y,x,k),x,k)}const Oa=({jobData:x,onSubmit:k,onCancel:y,isSaving:c})=>{const{user:p}=Je(),{toast:A}=Ne(),[j,g]=G.useState(!1),v=c||j,m=new Date().getFullYear(),[d,s]=G.useState({}),[t,n]=G.useState(null),[o,l]=G.useState(null),u=G.useRef(null),[a,i]=G.useState(!1),[h,r]=G.useState(""),[f,b]=G.useState(),[N,E]=G.useState(null),S=G.useRef(null),w=16/9;G.useEffect(()=>{const C={title:"",description:"",job_type:zt.length>0?zt[0].value:"outro",job_city:"",job_state:"",event_date:`${m}-01-01`.substring(0,10),event_time:"",duration_days:1,daily_rate:null,num_models_needed:1,specific_requirements:"",status:"open",created_by:p==null?void 0:p.id,required_model_type:"Indiferente",required_model_profile:"Indiferente",required_interests:[]};x?(s({...C,...x,job_type:x.job_type||C.job_type,required_model_type:x.required_model_type||C.required_model_type,required_model_profile:x.required_model_profile||C.required_model_profile,event_date:x.event_date?new Date(x.event_date).toISOString().split("T")[0]:C.event_date}),x.job_image_url&&n(x.job_image_url)):(s(C),n(null)),l(null)},[x,p,m]);const _=C=>{const{name:I,value:$,type:F}=C.target;s(R=>({...R,[I]:F==="number"?parseFloat($)||0:$}))},O=C=>{const{value:I}=C.target,$=I.replace(/\D/g,"");if($==="")s(F=>({...F,daily_rate:null}));else{const F=Number($)/100;s(R=>({...R,daily_rate:F}))}},T=(C,I)=>{s($=>({...$,[C]:I}))},L=(C,I)=>{const $=document.createElement("canvas"),F=C.naturalWidth/C.width,R=C.naturalHeight/C.height;return $.width=I.width,$.height=I.height,$.getContext("2d").drawImage(C,I.x*F,I.y*R,I.width*F,I.height*R,0,0,I.width,I.height),new Promise(z=>{$.toBlob(V=>{z(V)},"image/jpeg")})},M=C=>{if(C.target.files&&C.target.files.length>0){b(void 0);const I=new FileReader;I.addEventListener("load",()=>{var $;return r((($=I.result)==null?void 0:$.toString())||"")}),I.readAsDataURL(C.target.files[0]),i(!0),C.target.value=""}};function q(C){const{width:I,height:$}=C.currentTarget;b(Ea(I,$,w))}const U=async()=>{if(N&&S.current){const C=await L(S.current,N);l(C),n(URL.createObjectURL(C))}i(!1)},W=async(C,I)=>{if(!C||!I)return null;const $="jpg",F=`${Date.now()}.${$}`,R=`job_images/${I}/${F}`,{data:B,error:z}=await ne.storage.from("user_media").upload(R,C,{upsert:!0,contentType:"image/jpeg"});if(z)throw A({title:"Erro no Upload da Imagem",description:z.message,variant:"destructive"}),z;const{data:V}=ne.storage.from("user_media").getPublicUrl(R);return V.publicUrl},H=()=>{const C={title:"Título da Vaga",description:"Descrição",job_city:"Cidade",job_state:"Estado",event_date:"Data do Evento"};for(const[I,$]of Object.entries(C))if(!d[I])return A({title:"Campo Obrigatório",description:`Por favor, preencha o campo "${$}".`,variant:"destructive"}),!1;return!0},D=async C=>{if(C.preventDefault(),!H())return;g(!0);let I={...d,required_interests:d.job_type?[d.job_type]:[]},$=!(x!=null&&x.id);try{if($){const{data:F,error:R}=await ne.from("jobs").insert({title:I.title,created_by:p.id,status:"draft"}).select("id").single();if(R)throw R;I.id=F.id}if(o){const F=await W(o,I.id);I.job_image_url=F}I.job_city&&I.job_state&&delete I.location,await k(I,$)}catch(F){A({title:"Erro ao processar vaga",description:F.message,variant:"destructive"})}finally{g(!1)}},P=C=>C===null||typeof C>"u"?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(C);return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",children:"Título da Vaga"}),e.jsx(ae,{id:"title",name:"title",value:d.title||"",onChange:_,className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"description",children:"Descrição"}),e.jsx(ft,{id:"description",name:"description",value:d.description||"",onChange:_,className:"mt-1",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"job_type",children:"Tipo de Trabalho"}),e.jsxs(Ce,{name:"job_type",value:d.job_type||"",onValueChange:C=>T("job_type",C),children:[e.jsx(Ie,{className:"mt-1",children:e.jsx(Le,{placeholder:"Selecione o tipo"})}),e.jsx(Re,{children:zt.map(C=>e.jsx(be,{value:C.value,children:C.label},C.value))})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Localização"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[e.jsx(ae,{id:"job_city",name:"job_city",placeholder:"Cidade",value:d.job_city||"",onChange:_}),e.jsx(ae,{id:"job_state",name:"job_state",placeholder:"Estado (UF)",value:d.job_state||"",onChange:_,maxLength:"2"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"event_date",children:"Data do Evento"}),e.jsx(ae,{id:"event_date",name:"event_date",type:"date",value:d.event_date||"",onChange:_,className:"mt-1",min:`${m}-01-01`})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"event_time",children:"Hora do Evento"}),e.jsx(ae,{id:"event_time",name:"event_time",type:"time",value:d.event_time||"",onChange:_,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"duration_days",children:"Duração (dias)"}),e.jsx(ae,{id:"duration_days",name:"duration_days",type:"number",value:d.duration_days||1,onChange:_,className:"mt-1",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"daily_rate",children:"Valor Diária (R$)"}),e.jsx(ae,{id:"daily_rate",name:"daily_rate",type:"text",value:P(d.daily_rate),onChange:O,className:"mt-1",placeholder:"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Deixe em branco para "A combinar".'})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"num_models_needed",children:"Nº de Modelos Necessários"}),e.jsx(ae,{id:"num_models_needed",name:"num_models_needed",type:"number",value:d.num_models_needed||1,onChange:_,className:"mt-1",min:"1"})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Hr,{className:"h-4 w-4"}),"Perfil Desejado ",e.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(para notificar modelos)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Tipo de Modelo (Aparência)"}),e.jsxs(Ce,{name:"required_model_type",value:d.required_model_type||"Indiferente",onValueChange:C=>T("required_model_type",C),children:[e.jsx(Ie,{className:"mt-1",children:e.jsx(Le,{})}),e.jsxs(Re,{children:[Cn.map(C=>e.jsx(be,{value:C.value,children:C.label},C.value)),e.jsx(be,{value:"Indiferente",children:"Indiferente"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Perfil Físico"}),e.jsxs(Ce,{name:"required_model_profile",value:d.required_model_profile||"Indiferente",onValueChange:C=>T("required_model_profile",C),children:[e.jsx(Ie,{className:"mt-1",children:e.jsx(Le,{})}),e.jsxs(Re,{children:[In.map(C=>e.jsx(be,{value:C.value,children:C.label},C.value)),e.jsx(be,{value:"Indiferente",children:"Indiferente"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"specific_requirements",children:"Requisitos Adicionais"}),e.jsx(ft,{id:"specific_requirements",name:"specific_requirements",value:d.specific_requirements||"",onChange:_,className:"mt-1",rows:2,placeholder:"Ex: Altura mínima, ter CNH, etc."})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"job_image",children:"Imagem da Vaga"}),e.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[t&&e.jsx("img",{src:t,alt:"Prévia",className:"h-20 w-20 rounded-md object-cover bg-gray-100"}),e.jsxs(re,{type:"button",variant:"outline",onClick:()=>{var C;return(C=u.current)==null?void 0:C.click()},children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),"Carregar Imagem"]}),e.jsx("input",{id:"job_image_upload",name:"job_image_upload",type:"file",className:"sr-only",ref:u,onChange:M,accept:"image/png, image/jpeg, image/webp"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsxs(re,{type:"button",variant:"outline",onClick:y,disabled:v,children:[e.jsx(St,{className:"h-4 w-4 mr-2"})," Cancelar"]}),e.jsx(re,{type:"submit",className:"btn-gradient text-white",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 mr-2 animate-spin"})," Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4 mr-2"})," Salvar Vaga"]})})]})]}),a&&e.jsx(Fe,{open:a,onOpenChange:i,children:e.jsxs($e,{className:"max-w-2xl",children:[e.jsx(Ue,{children:e.jsx(He,{children:"Cortar Imagem da Vaga"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ln,{crop:f,onChange:(C,I)=>b(I),onComplete:C=>E(C),aspect:w,children:e.jsx("img",{ref:S,alt:"Crop me",src:h,onLoad:q,style:{maxHeight:"70vh"}})})}),e.jsx(We,{children:e.jsxs(re,{onClick:U,className:"btn-gradient text-white",children:[e.jsx(ua,{className:"h-4 w-4 mr-2"})," Cortar e Usar"]})})]})})]})},Na=()=>{const[x,k]=G.useState([]),[y,c]=G.useState(!0),[p,A]=G.useState(""),[j,g]=G.useState(!1),[v,m]=G.useState(null),[d,s]=G.useState(!1),{toast:t}=Ne(),{user:n}=Je(),o=G.useCallback(async()=>{c(!0);try{const{data:b,error:N}=await ne.from("jobs").select(`
          *,
          profiles (id, name, email)
        `).order("created_at",{ascending:!1});if(N)throw N;k(b||[])}catch(b){t({title:"Erro ao buscar vagas",description:b.message,variant:"destructive"}),k([])}finally{c(!1)}},[t]);G.useEffect(()=>{o()},[o]);const l=b=>{A(b.target.value.toLowerCase())},u=x.filter(b=>{var N,E,S,w,_;return((N=b.title)==null?void 0:N.toLowerCase().includes(p))||((E=b.location)==null?void 0:E.toLowerCase().includes(p))||((w=(S=b.profiles)==null?void 0:S.name)==null?void 0:w.toLowerCase().includes(p))||((_=b.status)==null?void 0:_.toLowerCase().includes(p))}),a=(b=null)=>{m(b),g(!0)},i=()=>{g(!1),m(null)},h=async(b,N)=>{if(s(!0),!b.title||!b.status){t({title:"Erro de Validação",description:"Título e Status são obrigatórios.",variant:"destructive"}),s(!1);return}const E={...b,daily_rate:parseFloat(b.daily_rate)||null,duration_days:parseInt(b.duration_days)||null,num_models_needed:parseInt(b.num_models_needed)||null,event_date:b.event_date||null,event_time:b.event_time||null,created_by:v?b.created_by||v.created_by:b.created_by||(n==null?void 0:n.id)};delete E.profiles;try{const{error:S}=await ne.from("jobs").update(E).eq("id",E.id);if(S)throw S;t({title:`Vaga ${N?"Criada":"Atualizada"}`,description:`A vaga "${b.title}" foi ${N?"criada":"atualizada"} com sucesso.`}),i(),o()}catch(S){t({title:`Erro ao ${N?"Criar":"Atualizar"} Vaga`,description:S.message,variant:"destructive"})}finally{s(!1)}},r=async(b,N)=>{try{const{error:E}=await ne.from("jobs").delete().eq("id",b);if(E)throw E;t({title:"Vaga Excluída",description:`A vaga "${N}" foi excluída.`}),o()}catch(E){t({title:"Erro ao excluir vaga",description:E.message,variant:"destructive"})}},f=b=>{var N;t({title:`Detalhes (Admin): ${b.title}`,description:`Local: ${b.location||b.job_city||"N/A"}, Status: ${b.status}, Publicado por: ${((N=b.profiles)==null?void 0:N.name)||"N/A"}`,duration:1e4})};return y?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("p",{children:"Carregando vagas..."})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Gerenciamento de Vagas"}),e.jsxs(re,{onClick:()=>a(),className:"btn-gradient text-white",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"})," Criar Nova Vaga"]})]}),e.jsx("div",{className:"mb-4 flex flex-col sm:flex-row gap-2 items-center",children:e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(ae,{type:"text",placeholder:"Buscar por título, local, status...",value:p,onChange:l,className:"pl-10 w-full"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Título"}),e.jsx(de,{children:"Publicado por"}),e.jsx(de,{children:"Local"}),e.jsx(de,{children:"Data Evento"}),e.jsx(de,{children:"Valor/Dia"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-right",children:"Ações"})]})}),e.jsx(rt,{children:u.map(b=>{var N,E,S;return e.jsxs(Se,{children:[e.jsx(fe,{className:"font-medium",children:b.title||"N/A"}),e.jsx(fe,{children:((N=b.profiles)==null?void 0:N.name)||((E=b.profiles)==null?void 0:E.email)||"Sistema"}),e.jsx(fe,{children:b.job_city&&b.job_state?`${b.job_city}, ${b.job_state}`:b.location||"N/A"}),e.jsx(fe,{children:b.event_date?new Date(b.event_date).toLocaleDateString("pt-BR",{timeZone:"UTC"}):"N/A"}),e.jsx(fe,{children:b.daily_rate?`R$ ${Number(b.daily_rate).toFixed(2)}`:"N/A"}),e.jsx(fe,{children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b.status==="open"?"bg-green-100 text-green-700":b.status==="closed"?"bg-red-100 text-red-700":b.status==="cancelled"?"bg-gray-100 text-gray-700":b.status==="pending_payment"?"bg-yellow-100 text-yellow-700":b.status==="in_progress"?"bg-blue-100 text-blue-700":b.status==="completed"?"bg-purple-100 text-purple-700":"bg-gray-200 text-gray-800"}`,children:((S=ca.find(w=>w.value===b.status))==null?void 0:S.label)||b.status||"N/A"})}),e.jsxs(fe,{className:"text-right space-x-1",children:[e.jsx(re,{variant:"outline",size:"icon",onClick:()=>f(b),title:"Ver Detalhes",children:e.jsx(Nt,{className:"h-4 w-4"})}),e.jsx(re,{variant:"outline",size:"icon",onClick:()=>a(b),title:"Editar Vaga",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsxs(nt,{children:[e.jsx(at,{asChild:!0,children:e.jsx(re,{variant:"destructive",size:"icon",title:"Excluir Vaga",children:e.jsx(wt,{className:"h-4 w-4"})})}),e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(st,{children:"Confirmar Exclusão"}),e.jsxs(lt,{children:['Tem certeza que deseja excluir a vaga "',b.title,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(ut,{children:[e.jsx(ct,{children:"Cancelar"}),e.jsx(dt,{onClick:()=>r(b.id,b.title),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})]},b.id)})})]})}),u.length===0&&!y&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma vaga encontrada."}),j&&e.jsx(Fe,{open:j,onOpenChange:i,children:e.jsxs($e,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(He,{children:v?"Editar Vaga":"Criar Nova Vaga"}),e.jsx(Ke,{children:v?`Modifique os detalhes da vaga "${v.title}".`:"Preencha os detalhes para criar uma nova vaga."})]}),e.jsx(Oa,{jobData:v,onSubmit:h,onCancel:i,isSaving:d})]})})]})},wa=()=>{const[x,k]=G.useState([]),[y,c]=G.useState(!0),[p,A]=G.useState(!1),[j,g]=G.useState(null),[v,m]=G.useState({title:"",slug:"",content:"",is_published:!0}),[d,s]=G.useState(!1),{toast:t}=Ne(),n=G.useCallback(async()=>{c(!0);try{const{data:f,error:b}=await ne.from("pages").select("*").order("created_at",{ascending:!1});if(b)throw b;k(f||[])}catch(f){t({title:"Erro ao buscar páginas",description:f.message,variant:"destructive"})}finally{c(!1)}},[t]);G.useEffect(()=>{n()},[n]);const o=f=>{const{name:b,value:N}=f.target;m(E=>({...E,[b]:N})),b==="title"&&l(N)},l=f=>{const b=f.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");m(N=>({...N,slug:b}))},u=f=>{m(b=>({...b,is_published:f}))},a=(f=null)=>{f?(g(f),m({title:f.title,slug:f.slug,content:typeof f.content=="string"?f.content:JSON.stringify(f.content||{type:"doc",content:[]},null,2),is_published:f.is_published})):(g(null),m({title:"",slug:"",content:"",is_published:!0})),A(!0)},i=()=>{A(!1),g(null),m({title:"",slug:"",content:"",is_published:!0})},h=async()=>{if(!v.title||!v.slug){t({title:"Erro de Validação",description:"Título e Slug são obrigatórios.",variant:"destructive"});return}s(!0);try{let f;try{f=JSON.parse(v.content)}catch{f={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:v.content}]}]}}const b={title:v.title,slug:v.slug,content:f,is_published:v.is_published};if(j){const{error:N}=await ne.from("pages").update(b).eq("id",j.id);if(N)throw N;t({title:"Página Atualizada",description:"A página foi salva com sucesso."})}else{const{error:N}=await ne.from("pages").insert(b);if(N)throw N;t({title:"Página Criada",description:"A nova página foi adicionada."})}n(),i()}catch(f){t({title:"Erro ao salvar página",description:f.message,variant:"destructive"})}finally{s(!1)}},r=async(f,b)=>{try{const{error:N}=await ne.from("pages").delete().eq("id",f);if(N)throw N;t({title:"Página Excluída",description:`A página "${b}" foi excluída.`}),n()}catch(N){t({title:"Erro ao excluir página",description:N.message,variant:"destructive"})}};return e.jsxs(_e,{children:[e.jsxs(je,{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(Ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{})," Gerenciamento de Páginas"]}),e.jsx(we,{children:'Crie e edite páginas estáticas como "Sobre Nós", "Termos", etc.'})]}),e.jsxs(re,{onClick:()=>a(),className:"btn-gradient text-white",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"})," Criar Nova Página"]})]}),e.jsx(Oe,{children:y?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):x.length===0?e.jsxs("div",{className:"text-center p-12 bg-gray-50 rounded-lg border-2 border-dashed",children:[e.jsx(Ot,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Nenhuma página criada ainda."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Título"}),e.jsx(de,{children:"Slug"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Criada em"}),e.jsx(de,{className:"text-right",children:"Ações"})]})}),e.jsx(rt,{children:x.map(f=>e.jsxs(Se,{children:[e.jsx(fe,{className:"font-medium",children:f.title}),e.jsxs(fe,{className:"text-gray-600",children:["/",f.slug]}),e.jsx(fe,{children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${f.is_published?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:f.is_published?"Publicada":"Rascunho"})}),e.jsx(fe,{className:"text-gray-600",children:new Date(f.created_at).toLocaleDateString()}),e.jsxs(fe,{className:"text-right space-x-1",children:[e.jsx(re,{variant:"outline",size:"icon",onClick:()=>window.open(`/${f.slug}`,"_blank"),title:"Visualizar Página",children:e.jsx(Nt,{className:"h-4 w-4"})}),e.jsx(re,{variant:"outline",size:"icon",onClick:()=>a(f),title:"Editar Página",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsxs(nt,{children:[e.jsx(at,{asChild:!0,children:e.jsx(re,{variant:"destructive",size:"icon",title:"Excluir Página",children:e.jsx(wt,{className:"h-4 w-4"})})}),e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(st,{children:"Confirmar Exclusão"}),e.jsxs(lt,{children:['Tem certeza que deseja excluir a página "',f.title,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(ut,{children:[e.jsx(ct,{children:"Cancelar"}),e.jsx(dt,{onClick:()=>r(f.id,f.title),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})]},f.id))})]})})}),e.jsx(Fe,{open:p,onOpenChange:i,children:e.jsxs($e,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(He,{children:j?"Editar Página":"Criar Nova Página"}),e.jsx(Ke,{children:j?"Modifique o conteúdo e as configurações da página.":"Preencha os detalhes para criar uma nova página."})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",children:"Título da Página"}),e.jsx(ae,{id:"title",name:"title",value:v.title,onChange:o,placeholder:"Ex: Sobre Nós"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"slug",children:"Slug (URL)"}),e.jsx(ae,{id:"slug",name:"slug",value:v.slug,onChange:o,placeholder:"Ex: sobre-nos"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Será usado na URL: seubanco.com/",v.slug]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"content",children:"Conteúdo (Editor será implementado futuramente)"}),e.jsx(ft,{id:"content",name:"content",value:v.content,onChange:o,placeholder:"Conteúdo da página (por enquanto, texto simples ou JSON básico para estrutura)",rows:10}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Futuramente, um editor rico será implementado. Por enquanto, pode usar texto simples ou uma estrutura JSON simples como ",'{ "type": "doc", "content": [ { "type": "paragraph", "content": [ { "type": "text", "text": "Seu texto aqui." } ] } ] }',"."]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"is_published",checked:v.is_published,onCheckedChange:u}),e.jsx(J,{htmlFor:"is_published",children:"Publicar Página"})]})]}),e.jsxs(We,{children:[e.jsx(re,{variant:"outline",onClick:i,children:"Cancelar"}),e.jsx(re,{onClick:h,disabled:d,className:"btn-gradient text-white",children:d?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):j?"Salvar Alterações":"Criar Página"})]})]})})]})},Aa=()=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gerenciamento de Menus"}),e.jsxs("div",{className:"text-center p-12 bg-gray-50 rounded-lg border-2 border-dashed",children:[e.jsx(zr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Em Desenvolvimento"}),e.jsx("p",{className:"text-gray-500 mt-2 max-w-md mx-auto",children:"Esta funcionalidade permitirá que você crie e gerencie os menus de navegação do site dinamicamente. Você poderá adicionar, remover, reordenar e criar submenus."}),e.jsx(re,{className:"mt-6",disabled:!0,children:"Adicionar Novo Menu"})]})]}),Sa=()=>{const{toast:x}=Ne(),[k,y]=G.useState(!0),[c,p]=G.useState(!1),[A,j]=G.useState({MERCADOPAGO_PUBLIC_KEY:"",MERCADOPAGO_ACCESS_TOKEN:"",MERCADOPAGO_WEBHOOK_SECRET:"",SUBSCRIPTION_PRICE_MODEL:"",SUBSCRIPTION_PRICE_CONTRACTOR:"",PAYMENT_METHOD_CREDIT_CARD:!0,PAYMENT_METHOD_BOLETO:!0,PAYMENT_METHOD_PIX:!0,PAYMENT_METHOD_MERCADOPAGO:!1}),v=`${{}.VITE_SUPABASE_URL||"https://fgmdqayaqafxutbncypt.supabase.co"}/functions/v1/mp-central-webhook`,m=(o,l)=>{navigator.clipboard.writeText(o).then(()=>{x({title:"Copiado!",description:l})}).catch(u=>{x({title:"Erro ao copiar",description:"Não foi possível copiar para a área de transferência.",variant:"destructive"})})},d=G.useCallback(async()=>{y(!0);try{const{data:o,error:l}=await ne.from("app_settings").select("key, value");if(l)throw l;const u=o.reduce((a,i)=>{var r;let h=(r=i.value)==null?void 0:r.value;return typeof h=="string"&&(h.toLowerCase()==="true"?h=!0:h.toLowerCase()==="false"&&(h=!1)),a[i.key]=h,a},{});j(a=>({...a,...u,MERCADOPAGO_ACCESS_TOKEN:"",MERCADOPAGO_WEBHOOK_SECRET:""}))}catch(o){x({title:"Erro ao carregar configurações de pagamento",description:o.message,variant:"destructive"})}finally{y(!1)}},[x]);G.useEffect(()=>{d()},[d]);const s=(o,l)=>{j(u=>({...u,[o]:l}))},t=(o,l)=>{j(u=>({...u,[o]:l}))},n=async o=>{o.preventDefault(),p(!0);try{const l=[],u=[];if(Object.entries(A).forEach(([a,i])=>{a==="MERCADOPAGO_ACCESS_TOKEN"&&i&&i.trim()!==""?u.push({name:"MERCADOPAGO_ACCESS_TOKEN",value:i}):a==="MERCADOPAGO_WEBHOOK_SECRET"&&i&&i.trim()!==""?u.push({name:"MERCADOPAGO_WEBHOOK_SECRET",value:i}):["MERCADOPAGO_ACCESS_TOKEN","MERCADOPAGO_WEBHOOK_SECRET"].includes(a)||l.push({key:a,value:{value:i}})}),l.length>0){const{error:a}=await ne.from("app_settings").upsert(l,{onConflict:"key"});if(a)throw new Error(`Erro ao salvar configurações na tabela: ${a.message}`)}if(u.length>0){const{data:a,error:i}=await ne.functions.invoke("save-app-secrets",{body:{secrets:u}});if(i){let h=i.message;try{a&&a.error?h=a.error:h=(await i.context.json()).error||h}catch{}throw new Error(`Erro ao salvar secrets: ${h}`)}x({title:"Atualização de Secrets",description:"As credenciais secretas, se fornecidas, foram enviadas para atualização segura.",variant:"info",duration:6e3})}x({title:"Sucesso!",description:"Configurações de pagamento salvas."}),await d()}catch(l){x({title:"Erro ao salvar configurações de pagamento",description:l.message,variant:"destructive"})}finally{p(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Xe,{className:"border-blue-500 bg-blue-50",children:[e.jsx(Hr,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Sistema de Pagamentos Mercado Pago"}),e.jsx(Ze,{children:"Configure a integração completa com Mercado Pago para receber pagamentos."})]}),e.jsxs(Xe,{variant:"warning",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Configuração de Chave de Acesso Necessária"}),e.jsxs(Ze,{children:['Para salvar o "Access Token" e a "Assinatura Secreta" de forma segura, você precisa primeiro configurar o segredo ',e.jsx("code",{className:"font-mono bg-yellow-100 text-yellow-800 px-1 py-0.5 rounded",children:"SUPA_MANAGEMENT_ACCESS_TOKEN"})," no seu projeto Supabase. Siga as instruções detalhadas na aba de 'Configurações de E-mail' para completar este passo. Sem ele, as chaves secretas não serão salvas."]})]}),e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Configurações de Pagamento (Mercado Pago)"}),e.jsx(we,{children:"Configure a integração e os métodos de pagamento. Credenciais são salvas de forma segura como secrets."})]}),e.jsx(Oe,{children:k?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsxs("form",{onSubmit:n,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-md bg-orange-50 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-orange-800 flex items-center",children:[e.jsx(ht,{className:"h-5 w-5 mr-2 text-orange-600"}),"Configuração de Webhook (OBRIGATÓRIO)"]}),e.jsxs("p",{className:"text-sm text-orange-700",children:[e.jsx("strong",{children:"Passo 1:"})," Configure o webhook no seu painel do Mercado Pago para receber notificações automáticas de TODOS os eventos de pagamento (recargas, assinaturas, etc.)."]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(J,{className:"font-semibold text-orange-800",children:"URL do Webhook Central"}),e.jsxs("div",{className:"flex items-center space-x-2 bg-orange-100 p-3 rounded-md",children:[e.jsx(ae,{id:"webhook_url_general",readOnly:!0,value:v,className:"flex-grow bg-transparent border-0 text-orange-900 font-mono text-sm"}),e.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:()=>m(v,"URL do Webhook copiada!"),children:[e.jsx(ga,{className:"h-4 w-4 mr-2"})," Copiar"]})]})]}),e.jsxs("p",{className:"text-sm text-orange-700 mt-2",children:[e.jsx("strong",{children:"Passo 2:"}),' Após configurar o webhook, copie a "Assinatura Secreta" fornecida pelo Mercado Pago e cole no campo abaixo.']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Credenciais Mercado Pago"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"mp_public_key",children:"Public Key *"}),e.jsx(ae,{id:"mp_public_key",placeholder:"APP_USR-...",value:A.MERCADOPAGO_PUBLIC_KEY||"",onChange:o=>s("MERCADOPAGO_PUBLIC_KEY",o.target.value),required:!0}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Encontrada em: ",e.jsx("a",{href:"https://www.mercadopago.com.br/developers/panel/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"Credenciais do MP"})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"mp_access_token",children:"Access Token * (Salvo como Secret)"}),e.jsx(ae,{id:"mp_access_token",type:"password",placeholder:"Deixe em branco para não alterar",value:A.MERCADOPAGO_ACCESS_TOKEN||"",onChange:o=>s("MERCADOPAGO_ACCESS_TOKEN",o.target.value)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Token de acesso para processar pagamentos."})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"mp_webhook_secret",children:"Assinatura Secreta do Webhook * (Salvo como Secret)"}),e.jsx(ae,{id:"mp_webhook_secret",type:"password",placeholder:"Deixe em branco para não alterar",value:A.MERCADOPAGO_WEBHOOK_SECRET||"",onChange:o=>s("MERCADOPAGO_WEBHOOK_SECRET",o.target.value)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Obrigatória para validar notificações de webhook."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Preços das Assinaturas (R$)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"sub_price_model",children:"Preço Assinatura Modelo (R$) *"}),e.jsx(ae,{id:"sub_price_model",type:"number",step:"0.01",placeholder:"29.90",value:A.SUBSCRIPTION_PRICE_MODEL||"",onChange:o=>s("SUBSCRIPTION_PRICE_MODEL",o.target.value),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Valor mensal para o plano Pro de Modelos."})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"sub_price_contractor",children:"Preço Assinatura Contratante (R$) *"}),e.jsx(ae,{id:"sub_price_contractor",type:"number",step:"0.01",placeholder:"49.90",value:A.SUBSCRIPTION_PRICE_CONTRACTOR||"",onChange:o=>s("SUBSCRIPTION_PRICE_CONTRACTOR",o.target.value),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Valor mensal para o plano Pro de Contratantes."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Métodos de Pagamento Aceitos"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-4 border rounded-lg",children:[e.jsx(Me,{id:"payment_method_credit_card",checked:A.PAYMENT_METHOD_CREDIT_CARD,onCheckedChange:o=>t("PAYMENT_METHOD_CREDIT_CARD",o)}),e.jsxs(J,{htmlFor:"payment_method_credit_card",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(lr,{className:"h-5 w-5"})," Cartão de Crédito"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-4 border rounded-lg",children:[e.jsx(Me,{id:"payment_method_boleto",checked:A.PAYMENT_METHOD_BOLETO,onCheckedChange:o=>t("PAYMENT_METHOD_BOLETO",o)}),e.jsxs(J,{htmlFor:"payment_method_boleto",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(pa,{className:"h-5 w-5"})," Boleto"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-4 border rounded-lg",children:[e.jsx(Me,{id:"payment_method_pix",checked:A.PAYMENT_METHOD_PIX,onCheckedChange:o=>t("PAYMENT_METHOD_PIX",o)}),e.jsxs(J,{htmlFor:"payment_method_pix",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ba,{className:"h-5 w-5"})," PIX"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-4 border rounded-lg",children:[e.jsx(Me,{id:"payment_method_mercadopago",checked:A.PAYMENT_METHOD_MERCADOPAGO,onCheckedChange:o=>t("PAYMENT_METHOD_MERCADOPAGO",o)}),e.jsxs(J,{htmlFor:"payment_method_mercadopago",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("img",{src:"https://logopng.com.br/logos/mercado-pago-28.png",className:"w-5 h-5",alt:"Mercado Pago"})," Saldo MP"]})]})]})]}),e.jsxs(re,{type:"submit",className:"btn-gradient text-white w-full",disabled:c,children:[c?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"})," Salvar Configurações de Pagamento"]})]})})]})]})},Ta=()=>{var h,r,f;const{toast:x}=Ne(),[k,y]=G.useState([]),[c,p]=G.useState(!0),[A,j]=G.useState(!1),[g,v]=G.useState(null),[m,d]=G.useState(""),[s,t]=G.useState(!1),n=["pending","completed","failed","refunded","cancelled"],o=G.useCallback(async()=>{p(!0);try{const{data:b,error:N}=await ne.from("wallet_transactions").select("*, profiles(id, name, email, user_type, subscription_type)").order("created_at",{ascending:!1});if(N)throw N;y(b||[])}catch(b){x({title:"Erro ao buscar transações",description:b.message,variant:"destructive"})}finally{p(!1)}},[x]);G.useEffect(()=>{o()},[o]);const l=b=>{v(b),d(b.status),j(!0)},u=async()=>{var b,N;if(!(!g||!m)){t(!0);try{const E=g.status,{error:S}=await ne.from("wallet_transactions").update({status:m,updated_at:new Date().toISOString()}).eq("id",g.id);if(S)throw S;if(g.type==="deposit"){if(m==="completed"&&E!=="completed"){const{error:w}=await ne.rpc("update_wallet_balance",{p_user_id:g.user_id,p_amount:g.amount,p_transaction_description:g.description,p_provider_transaction_id:g.provider_transaction_id,p_transaction_status:"completed",p_payment_method_id:g.payment_method_id,p_status_detail:g.status_detail});if(w)throw new Error(`Erro ao creditar saldo: ${w.message}`)}else if(E==="completed"&&(m==="refunded"||m==="failed"||m==="cancelled")){const{error:w}=await ne.rpc("update_wallet_balance",{p_user_id:g.user_id,p_amount:-g.amount,p_transaction_description:`Reversão de ${g.description}`,p_provider_transaction_id:g.provider_transaction_id,p_transaction_status:m,p_payment_method_id:g.payment_method_id,p_status_detail:`Revertido de ${E} para ${m}`});if(w)throw new Error(`Erro ao debitar saldo para estorno/falha: ${w.message}`)}}if(g.type==="subscription"){if(m==="completed"&&E!=="completed"){const{error:w}=await ne.rpc("process_new_subscription",{p_user_id:g.user_id,p_plan_identifier:((b=g.pix_details)==null?void 0:b.plan_id)||`pro_manual_${g.id}`,p_duration_months:((N=g.pix_details)==null?void 0:N.duration_months)||1,p_payment_provider:g.payment_method_id||"manual_admin_update",p_provider_transaction_id:g.provider_transaction_id,p_amount_paid:g.amount,p_transaction_description:g.description,p_transaction_status_detail:"completed_manual_admin_update"});if(w)throw new Error(`Erro ao conceder assinatura: ${w.message}`)}else if(E==="completed"&&(m==="refunded"||m==="failed"||m==="cancelled")){const{error:w}=await ne.from("profiles").update({subscription_type:null,subscription_expires_at:new Date().toISOString()}).eq("id",g.user_id);if(w)throw new Error(`Erro ao revogar assinatura: ${w.message}`)}}x({title:"Sucesso!",description:"Status da transação atualizado."}),o(),j(!1)}catch(E){x({title:"Erro ao atualizar status",description:E.message,variant:"destructive"})}finally{t(!1)}}},a=b=>{switch(b){case"deposit":return e.jsx(ra,{className:"h-5 w-5 text-green-500"});case"withdrawal":return e.jsx(ta,{className:"h-5 w-5 text-red-500"});case"payment":return e.jsx(ea,{className:"h-5 w-5 text-blue-500"});case"payout":return e.jsx(Jn,{className:"h-5 w-5 text-purple-500"});case"subscription":return e.jsx(lr,{className:"h-5 w-5 text-indigo-500"});default:return e.jsx(Dn,{className:"h-5 w-5 text-gray-500"})}},i=b=>{switch(b){case"completed":return e.jsx(ge,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Completo"});case"pending":return e.jsx(ge,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:"Pendente"});case"failed":return e.jsx(ge,{variant:"destructive",children:"Falhou"});case"refunded":return e.jsx(ge,{className:"bg-purple-500 hover:bg-purple-600 text-white",children:"Estornado"});case"cancelled":return e.jsx(ge,{className:"bg-gray-500 hover:bg-gray-600 text-white",children:"Cancelado"});default:return e.jsx(ge,{variant:"secondary",children:b})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Histórico de Todas as Transações"}),e.jsx(we,{children:"Visualize e gerencie todos os pagamentos processados pela plataforma."})]}),e.jsx(Oe,{children:c?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):k.length>0?e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Usuário"}),e.jsx(de,{children:"Tipo"}),e.jsx(de,{children:"Data"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-right",children:"Valor"}),e.jsx(de,{className:"text-center",children:"Ações"})]})}),e.jsx(rt,{children:k.map(b=>{var N,E,S;return e.jsxs(Se,{children:[e.jsxs(fe,{children:[e.jsx("div",{className:"font-medium",children:((N=b.profiles)==null?void 0:N.name)||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((E=b.profiles)==null?void 0:E.email)||"N/A"})]}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[a(b.type),e.jsx("span",{className:"capitalize",children:((S=b.type)==null?void 0:S.replace("_"," "))||"N/A"})]})}),e.jsx(fe,{children:new Date(b.created_at).toLocaleString("pt-BR")}),e.jsx(fe,{children:i(b.status)}),e.jsxs(fe,{className:`text-right font-semibold ${b.type==="withdrawal"||b.type==="payment"||b.status==="refunded"?"text-red-600":"text-green-600"}`,children:[b.type==="withdrawal"||b.type==="payment"||b.status==="refunded"?"-":"+"," R$ ",Number(b.amount).toFixed(2).replace(".",",")]}),e.jsx(fe,{className:"text-center",children:e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(b),children:[e.jsx(Wr,{className:"mr-2 h-3 w-3"})," Alterar Status"]})})]},b.id)})})]}):e.jsx("p",{className:"text-center text-muted-foreground p-8",children:"Nenhuma transação encontrada."})})]}),g&&e.jsx(Fe,{open:A,onOpenChange:j,children:e.jsxs($e,{children:[e.jsxs(Ue,{children:[e.jsx(He,{children:"Alterar Status da Transação"}),e.jsxs(Ke,{children:["ID: ",g.id," ",e.jsx("br",{}),"Usuário: ",((h=g.profiles)==null?void 0:h.name)||"N/A"," (",((r=g.profiles)==null?void 0:r.email)||"N/A",") ",e.jsx("br",{}),"Tipo: ",((f=g.type)==null?void 0:f.replace("_"," "))||"N/A",", Valor: R$ ",Number(g.amount).toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"py-4 space-y-2",children:[e.jsx(J,{htmlFor:"status-select",children:"Novo Status"}),e.jsxs(Ce,{value:m,onValueChange:d,children:[e.jsx(Ie,{id:"status-select",children:e.jsx(Le,{placeholder:"Selecione um status"})}),e.jsx(Re,{children:n.map(b=>e.jsx(be,{value:b,children:b.charAt(0).toUpperCase()+b.slice(1)},b))})]}),m==="refunded"&&g.status!=="refunded"&&e.jsxs("p",{className:"text-xs text-orange-500 mt-1",children:['Atenção: Marcar como "Estornado" ajustará o saldo do usuário, mas',e.jsx("strong",{children:" não"})," processa o estorno real no Mercado Pago. Isso deve ser feito manualmente no painel do MP."]}),m==="completed"&&g.status!=="completed"&&g.type==="deposit"&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"O saldo da carteira do usuário será creditado."}),m==="completed"&&g.status!=="completed"&&g.type==="subscription"&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"A assinatura do usuário será concedida/atualizada."})]}),e.jsxs(We,{children:[e.jsx(re,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),e.jsxs(re,{onClick:u,disabled:s||m===g.status,className:"btn-gradient text-white",children:[s?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"}),"Salvar Novo Status"]})]})]})})]})},hr=({part:x})=>e.jsxs("div",{className:"space-y-6",children:[x==="config"&&e.jsx(Sa,{}),x==="history"&&e.jsx(Ta,{})]}),ka=()=>{const{toast:x}=Ne(),[k,y]=G.useState({}),[c,p]=G.useState(!0),[A,j]=G.useState(!1),g={ENABLE_SUBSCRIPTION_EXPIRATION_NOTIFICATION:!0,SUBSCRIPTION_EXPIRATION_NOTICE_DAYS:7,ENABLE_LOW_BALANCE_REMINDER:!0,LOW_BALANCE_THRESHOLD:50,INACTIVITY_REMINDER_DAYS:15,ENABLE_FAVORITED_PROFILE_NOTIFICATION:!0,ENABLE_MATCH_NOTIFICATION:!0,ENABLE_HIRED_NOTIFICATION:!0,ENABLE_PRO_RECEIVED_NOTIFICATION:!0,ENABLE_PROFILE_VERIFIED_NOTIFICATION:!0,ENABLE_CACHE_RECEIVED_NOTIFICATION:!0,ENABLE_WITHDRAWAL_COMPLETED_NOTIFICATION:!0,ENABLE_INVITED_TO_JOB_NOTIFICATION:!0,WHATSAPP_WEBHOOK_URL:"",WHATSAPP_WEBHOOK_ENABLED:!1,WHATSAPP_WEBHOOK_PAYLOAD_TEMPLATE:JSON.stringify({text:"Olá {userName}, bem-vindo(a) ao nosso site! Para começar, que tal completar seu perfil? {profileLink}"},null,2)},v=G.useCallback(async()=>{p(!0);try{const{data:t,error:n}=await ne.from("app_settings").select("key, value");if(n)throw n;const o=t.reduce((u,a)=>{var i;return u[a.key]=((i=a.value)==null?void 0:i.value)!==void 0?a.value.value:a.value,u},{}),l={...g};for(const u in g)o[u]!==void 0&&(typeof g[u]=="boolean"?l[u]=String(o[u]).toLowerCase()==="true":typeof g[u]=="number"?l[u]=Number(o[u]):l[u]=o[u]);y(l)}catch(t){x({title:"Erro ao carregar configurações",description:t.message,variant:"destructive"})}finally{p(!1)}},[x]);G.useEffect(()=>{v()},[v]);const m=(t,n,o=!1)=>{y(l=>({...l,[t]:o?n===""?null:Number(n):n}))},d=(t,n)=>{y(o=>({...o,[t]:n}))},s=async t=>{t.preventDefault(),j(!0);try{const n=Object.entries(k).map(([l,u])=>({key:l,value:{value:u}})),{error:o}=await ne.from("app_settings").upsert(n,{onConflict:"key"});if(o)throw o;x({title:"Sucesso!",description:"Configurações salvas."})}catch(n){x({title:"Erro ao salvar configurações",description:n.message,variant:"destructive"})}finally{j(!1)}};return c?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsxs(Ee,{className:"flex items-center",children:[e.jsx(Yr,{className:"mr-2 h-6 w-6 text-pink-600"}),"Configurações de Notificações"]}),e.jsx(we,{children:"Gerencie notificações na plataforma e integrações externas."})]}),e.jsxs(Oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 p-4 border rounded-md",children:[e.jsx("h4",{className:"font-semibold",children:"Lembretes de Assinatura e Saldo"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"enable_subscription_expiration_notification",checked:k.ENABLE_SUBSCRIPTION_EXPIRATION_NOTIFICATION,onCheckedChange:t=>d("ENABLE_SUBSCRIPTION_EXPIRATION_NOTIFICATION",t)}),e.jsx(J,{htmlFor:"enable_subscription_expiration_notification",children:"Ativar notificação de expiração de assinatura"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"subscription_expiration_notice_days",children:"Avisar com (dias de antecedência)"}),e.jsx(ae,{id:"subscription_expiration_notice_days",type:"number",value:k.SUBSCRIPTION_EXPIRATION_NOTICE_DAYS||"",onChange:t=>m("SUBSCRIPTION_EXPIRATION_NOTICE_DAYS",t.target.value,!0),disabled:!k.ENABLE_SUBSCRIPTION_EXPIRATION_NOTIFICATION})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"enable_low_balance_reminder",checked:k.ENABLE_LOW_BALANCE_REMINDER,onCheckedChange:t=>d("ENABLE_LOW_BALANCE_REMINDER",t)}),e.jsx(J,{htmlFor:"enable_low_balance_reminder",children:"Ativar lembrete de saldo baixo"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"low_balance_threshold",children:"Valor mínimo para lembrete (R$)"}),e.jsx(ae,{id:"low_balance_threshold",type:"number",value:k.LOW_BALANCE_THRESHOLD||"",onChange:t=>m("LOW_BALANCE_THRESHOLD",t.target.value,!0),disabled:!k.ENABLE_LOW_BALANCE_REMINDER})]})]}),e.jsxs("div",{className:"space-y-2 p-4 border rounded-md",children:[e.jsx("h4",{className:"font-semibold",children:"Notificações de Eventos"}),[{key:"ENABLE_FAVORITED_PROFILE_NOTIFICATION",label:"Perfil favoritado"},{key:"ENABLE_MATCH_NOTIFICATION",label:'Vaga deu "Match"'},{key:"ENABLE_HIRED_NOTIFICATION",label:"Contratante selecionou para vaga"},{key:"ENABLE_PRO_RECEIVED_NOTIFICATION",label:"Usuário recebeu assinatura PRO"},{key:"ENABLE_PROFILE_VERIFIED_NOTIFICATION",label:"Perfil foi verificado"},{key:"ENABLE_CACHE_RECEIVED_NOTIFICATION",label:"Modelo recebeu um Cachê"},{key:"ENABLE_WITHDRAWAL_COMPLETED_NOTIFICATION",label:"Saque foi processado"},{key:"ENABLE_INVITED_TO_JOB_NOTIFICATION",label:"Usuário recebeu convite para trabalho"}].map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:t.key,checked:k[t.key],onCheckedChange:n=>d(t.key,n)}),e.jsx(J,{htmlFor:t.key,children:t.label})]},t.key))]})]})]}),e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsxs(Ee,{className:"flex items-center",children:[e.jsx(da,{className:"mr-2 h-6 w-6 text-blue-600"}),"Webhook de Notificações (WhatsApp, etc.)"]}),e.jsx(we,{children:"Envie notificações para serviços externos em eventos específicos (ex: novo cadastro)."})]}),e.jsxs(Oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"whatsapp_webhook_enabled",checked:k.WHATSAPP_WEBHOOK_ENABLED,onCheckedChange:t=>d("WHATSAPP_WEBHOOK_ENABLED",t)}),e.jsx(J,{htmlFor:"whatsapp_webhook_enabled",children:"Ativar envio de notificações via Webhook"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"whatsapp_webhook_url",children:"URL do Webhook"}),e.jsx(ae,{id:"whatsapp_webhook_url",type:"url",placeholder:"https://seu-servico.com/webhook",value:k.WHATSAPP_WEBHOOK_URL||"",onChange:t=>m("WHATSAPP_WEBHOOK_URL",t.target.value),disabled:!k.WHATSAPP_WEBHOOK_ENABLED})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"whatsapp_webhook_payload_template",children:"Template do Payload (JSON)"}),e.jsx(ft,{id:"whatsapp_webhook_payload_template",rows:5,placeholder:'{ "text": "Olá {userName}!" }',value:k.WHATSAPP_WEBHOOK_PAYLOAD_TEMPLATE||"",onChange:t=>m("WHATSAPP_WEBHOOK_PAYLOAD_TEMPLATE",t.target.value),disabled:!k.WHATSAPP_WEBHOOK_ENABLED}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Use variáveis como: ","{userId}, {userName}, {userEmail}, {profileLink}"]})]})]})]}),e.jsx(pt,{className:"border-t px-0 py-4 mt-6",children:e.jsxs(re,{type:"submit",className:"btn-gradient text-white",disabled:A,children:[A?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"}),"Salvar Todas as Configurações"]})})]})},Pa=()=>{const{toast:x}=Ne(),{refreshAuthUser:k}=Je(),[y,c]=G.useState({}),[p,A]=G.useState(!0),[j,g]=G.useState(!1),v=G.useCallback(async()=>{A(!0);const{data:o,error:l}=await ne.from("app_settings").select("*");if(l)x({title:"Erro ao carregar configurações",description:l.message,variant:"destructive"});else{const u=o.reduce((a,i)=>{var h;return a[i.key]=((h=i.value)==null?void 0:h.value)!==void 0?i.value.value:i.value,a},{});c(u)}A(!1)},[x]);G.useEffect(()=>{v()},[v]);const m=(o,l)=>{c(u=>({...u,[o]:l}))},d=(o,l)=>{c(u=>({...u,[o]:l}))},s=(o,l)=>{const u=l===""?null:parseFloat(l);(l===""||!isNaN(u)&&u>=0)&&c(a=>({...a,[o]:u}))},t=async o=>{o.preventDefault(),g(!0);const l=Object.keys(y).map(i=>ne.from("app_settings").upsert({key:i,value:{value:y[i]}},{onConflict:"key"})),a=(await Promise.all(l)).filter(i=>i.error);a.length>0?x({title:"Erro ao salvar configurações",description:a.map(i=>i.error.message).join(", "),variant:"destructive"}):(x({title:"Configurações salvas!",description:"Suas alterações foram salvas com sucesso.",variant:"success"}),k&&await k(!1)),g(!1)},n=[{key:"SITE_NAME",label:"Nome do Site",type:"text",placeholder:"Ex: Meu Site Incrível"},{key:"SITE_DESCRIPTION",label:"Descrição do Site (SEO)",type:"textarea",placeholder:"Descrição para mecanismos de busca..."},{key:"CONTACT_EMAIL",label:"E-mail de Contato Principal",type:"email",placeholder:"contato@example.com"},{key:"DEFAULT_USER_ROLE",label:"Cargo Padrão para Novos Usuários",type:"select",options:[{value:"model",label:"Modelo"},{value:"contractor",label:"Contratante"},{value:"photographer",label:"Fotógrafo"}]},{key:"ENABLE_USER_REGISTRATION",label:"Habilitar Cadastro de Novos Usuários",type:"switch"},{key:"ENABLE_WALLET_RECHARGE",label:"Habilitar Recarga da Carteira no Site",type:"switch"},{key:"MAINTENANCE_MODE",label:"Modo de Manutenção",type:"switch"},{key:"MAINTENANCE_MODE_MESSAGE",label:"Mensagem do Modo de Manutenção",type:"textarea",placeholder:"Estamos em manutenção, voltamos em breve!"},{key:"MAX_PROFILE_PHOTOS",label:"Máx. Fotos no Perfil do Usuário",type:"number",placeholder:"Ex: 10"},{key:"MAX_PROFILE_VIDEOS",label:"Máx. Vídeos no Perfil do Usuário",type:"number",placeholder:"Ex: 3"},{key:"PLATFORM_HIRING_FEE_PERCENTAGE",label:"Taxa da Plataforma sobre Contratações (%)",type:"number",placeholder:"Ex: 10 (para 10%)",step:"0.1"},{key:"MIN_WITHDRAWAL_AMOUNT",label:"Valor Mínimo para Saque (R$)",type:"number",placeholder:"Ex: 50.00",step:"0.01"},{key:"MAX_WITHDRAWAL_AMOUNT",label:"Valor Máximo para Saque por Transação (R$)",type:"number",placeholder:"Ex: 5000.00",step:"0.01"},{key:"WITHDRAWAL_PROCESSING_FEE",label:"Taxa de Processamento de Saque (R$ fixo)",type:"number",placeholder:"Ex: 2.50",step:"0.01"},{key:"DAYS_TO_AUTO_COMPLETE_JOB",label:"Dias para Conclusão Automática de Trabalho (após data do evento)",type:"number",placeholder:"Ex: 7"},{key:"ENABLE_LOW_BALANCE_REMINDER",label:"Habilitar Lembrete de Saldo Baixo",type:"switch"},{key:"LOW_BALANCE_THRESHOLD",label:"Limite para Lembrete de Saldo Baixo (R$)",type:"number",placeholder:"Ex: 50",step:"1"},{key:"DEFAULT_SUBSCRIPTION_PLAN_ID_PRO",label:"ID do Plano de Assinatura PRO Padrão",type:"text",placeholder:"Ex: plan_pro_monthly_01"},{key:"DAYS_SUBSCRIPTION_GRACE_PERIOD",label:"Dias de Período de Tolerância para Assinatura Vencida",type:"number",placeholder:"Ex: 3"},{key:"ENABLE_USER_VERIFICATION",label:"Habilitar Verificação de Identidade Obrigatória para Saques",type:"switch"}];return p?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsxs(_e,{className:"max-w-3xl mx-auto shadow-lg",children:[e.jsxs(je,{children:[e.jsx(Ee,{className:"text-2xl font-bold text-gray-800",children:"Configurações Gerais"}),e.jsx(we,{children:"Ajuste as configurações globais da plataforma."})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(Oe,{className:"space-y-6",children:n.map(o=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:o.key,className:"font-semibold text-gray-700",children:o.label}),o.type==="text"&&e.jsx(ae,{id:o.key,type:"text",value:y[o.key]||"",onChange:l=>m(o.key,l.target.value),placeholder:o.placeholder}),o.type==="email"&&e.jsx(ae,{id:o.key,type:"email",value:y[o.key]||"",onChange:l=>m(o.key,l.target.value),placeholder:o.placeholder}),o.type==="textarea"&&e.jsx(ft,{id:o.key,value:y[o.key]||"",onChange:l=>m(o.key,l.target.value),placeholder:o.placeholder,rows:3}),o.type==="number"&&e.jsx(ae,{id:o.key,type:"number",value:y[o.key]===null||y[o.key]===void 0?"":String(y[o.key]),onChange:l=>s(o.key,l.target.value),placeholder:o.placeholder,step:o.step||"1",min:"0"}),o.type==="switch"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:o.key,checked:y[o.key]===!0||y[o.key]==="true",onCheckedChange:l=>d(o.key,l)}),e.jsx(J,{htmlFor:o.key,className:"text-sm text-gray-600 cursor-pointer",children:y[o.key]===!0||y[o.key]==="true"?"Ativado":"Desativado"})]}),o.type==="select"&&e.jsxs(Ce,{value:y[o.key]||"",onValueChange:l=>m(o.key,l),children:[e.jsx(Ie,{id:o.key,children:e.jsx(Le,{placeholder:o.placeholder||"Selecione uma opção"})}),e.jsx(Re,{children:o.options.map(l=>e.jsx(be,{value:l.value,children:l.label},l.value))})]})]},o.key))}),e.jsx(pt,{children:e.jsxs(re,{type:"submit",className:"w-full sm:w-auto btn-gradient text-white",disabled:j,children:[j?e.jsx(se,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(De,{className:"h-4 w-4 mr-2"}),"Salvar Configurações"]})})]})]})},qe=({title:x,value:k,icon:y,color:c,loading:p})=>e.jsxs(_e,{className:`border-l-4 ${c} shadow-lg hover:shadow-xl transition-shadow duration-300`,children:[e.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ee,{className:"text-sm font-medium text-gray-600",children:x}),e.jsx(y,{className:`h-5 w-5 ${c.replace("border-","text-")}-500`})]}),e.jsx(Oe,{children:p?e.jsx(se,{className:"h-7 w-7 animate-spin text-gray-400"}):e.jsx("div",{className:"text-3xl font-bold text-gray-800",children:k})})]}),Ca=()=>{const[x,k]=G.useState(null),[y,c]=G.useState(!0),{toast:p}=Ne(),A=G.useCallback(async()=>{c(!0);try{const{data:j,error:g}=await ne.rpc("get_admin_dashboard_stats");if(g)throw g;k(j)}catch(j){p({title:"Erro ao buscar estatísticas",description:j.message,variant:"destructive"})}finally{c(!1)}},[p]);return G.useEffect(()=>{A()},[A]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[e.jsx(qe,{title:"Total de Usuários",value:x==null?void 0:x.total_users,icon:Et,color:"border-blue",loading:y}),e.jsx(qe,{title:"Modelos",value:x==null?void 0:x.model_users,icon:Et,color:"border-pink",loading:y}),e.jsx(qe,{title:"Contratantes",value:x==null?void 0:x.contractor_users,icon:Et,color:"border-indigo",loading:y}),e.jsx(qe,{title:"Fotógrafos",value:x==null?void 0:x.photographer_users,icon:Et,color:"border-teal",loading:y}),e.jsx(qe,{title:"Total de Vagas",value:x==null?void 0:x.total_jobs,icon:Xt,color:"border-green",loading:y}),e.jsx(qe,{title:"Vagas Abertas",value:x==null?void 0:x.open_jobs,icon:Xt,color:"border-lime",loading:y}),e.jsx(qe,{title:"Transações (Volume)",value:`R$ ${Number((x==null?void 0:x.total_transaction_volume)||0).toFixed(2)}`,icon:qn,color:"border-yellow",loading:y}),e.jsx(qe,{title:"Total de Transações",value:x==null?void 0:x.total_transactions,icon:ha,color:"border-amber",loading:y}),e.jsx(qe,{title:"Novos Usuários (7 dias)",value:x==null?void 0:x.new_users_last_7_days,icon:Zt,color:"border-cyan",loading:y}),e.jsx(qe,{title:"Novos Usuários (30 dias)",value:x==null?void 0:x.new_users_last_30_days,icon:Zt,color:"border-sky",loading:y})]}),e.jsxs(_e,{className:"shadow-lg",children:[e.jsx(je,{children:e.jsx(Ee,{children:"Atividade Recente"})}),e.jsx(Oe,{children:y?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-500"})}):e.jsx("p",{className:"text-gray-600",children:"Gráficos e logs de atividades recentes serão exibidos aqui em breve."})})]})]})},Ia=()=>{const{toast:x}=Ne(),[k,y]=G.useState([]),[c,p]=G.useState(""),[A,j]=G.useState(!0),[g,v]=G.useState(!1),[m,d]=G.useState(null),[s,t]=G.useState(!1),[n,o]=G.useState({MODELS_PAGE_PRO_LIMIT:8,MODELS_PAGE_COMMON_LIMIT:24}),[l,u]=G.useState(!0),[a,i]=G.useState(!1),h=G.useCallback(async()=>{j(!0);try{const{data:S,error:w}=await ne.from("work_interests_options").select("*").order("name",{ascending:!0});if(w)throw w;y(S)}catch(S){x({title:"Erro ao buscar interesses",description:S.message,variant:"destructive"})}finally{j(!1)}},[x]),r=G.useCallback(async()=>{u(!0);try{const{data:S,error:w}=await ne.from("app_settings").select("key, value").in("key",["MODELS_PAGE_PRO_LIMIT","MODELS_PAGE_COMMON_LIMIT"]);if(w)throw w;const _=S.reduce((O,T)=>{var L;return O[T.key]=((L=T.value)==null?void 0:L.value)||(T.key==="MODELS_PAGE_PRO_LIMIT"?8:24),O},{});o(O=>({...O,..._}))}catch(S){x({title:"Erro ao buscar limites de página",description:S.message,variant:"destructive"})}finally{u(!1)}},[x]);G.useEffect(()=>{h(),r()},[h,r]);const f=async S=>{if(S.preventDefault(),!c.trim()){x({title:"Nome inválido",description:"O nome do interesse não pode ser vazio.",variant:"warning"});return}v(!0);try{const{data:w,error:_}=await ne.from("work_interests_options").insert({name:c.trim()}).select();if(_)if(_.code==="23505")x({title:"Interesse já existe",description:`O interesse "${c.trim()}" já está cadastrado.`,variant:"warning"});else throw _;else x({title:"Sucesso!",description:`Interesse "${w[0].name}" adicionado.`}),p(""),h()}catch(w){x({title:"Erro ao adicionar interesse",description:w.message,variant:"destructive"})}finally{v(!1)}},b=async()=>{if(m){t(!0);try{const{error:S}=await ne.from("work_interests_options").delete().eq("id",m.id);if(S)throw S;x({title:"Sucesso!",description:`Interesse "${m.name}" excluído.`}),d(null),h()}catch(S){x({title:"Erro ao excluir interesse",description:S.message,variant:"destructive"})}finally{t(!1)}}},N=(S,w)=>{o(_=>({..._,[S]:w}))},E=async()=>{i(!0);try{const S=Object.entries(n).map(([_,O])=>({key:_,value:{value:parseInt(O,10)||0},description:_==="MODELS_PAGE_PRO_LIMIT"?"Número de modelos PRO em destaque na página de modelos.":"Número de modelos comuns a serem exibidos por página na página de modelos."})),{error:w}=await ne.from("app_settings").upsert(S,{onConflict:"key"});if(w)throw w;x({title:"Sucesso!",description:"Limites de exibição atualizados."})}catch(S){x({title:"Erro ao salvar limites",description:S.message,variant:"destructive"})}finally{i(!1)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Limites de Exibição - Página de Modelos"}),e.jsx(we,{children:"Controle quantos modelos são exibidos nas seções da página de modelos."})]}),e.jsx(Oe,{className:"space-y-4",children:l?e.jsx("div",{className:"flex justify-center items-center h-20",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"pro-limit",children:"Modelos PRO em Destaque"}),e.jsx(ae,{id:"pro-limit",type:"number",value:n.MODELS_PAGE_PRO_LIMIT,onChange:S=>N("MODELS_PAGE_PRO_LIMIT",S.target.value),disabled:a})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"common-limit",children:"Modelos Comuns (por página)"}),e.jsx(ae,{id:"common-limit",type:"number",value:n.MODELS_PAGE_COMMON_LIMIT,onChange:S=>N("MODELS_PAGE_COMMON_LIMIT",S.target.value),disabled:a})]})]})}),e.jsx(pt,{children:e.jsxs(re,{onClick:E,disabled:a||l,children:[a?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"}),"Salvar Limites"]})})]}),e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Gerenciar Interesses de Trabalho para Modelos"}),e.jsx(we,{children:"Adicione ou remova opções de interesses que os modelos podem selecionar em seus perfis."})]}),e.jsxs(Oe,{children:[e.jsxs("form",{onSubmit:f,className:"flex items-end gap-4 mb-6",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(J,{htmlFor:"new-interest-name",children:"Nome do Novo Interesse"}),e.jsx(ae,{id:"new-interest-name",value:c,onChange:S=>p(S.target.value),placeholder:"Ex: Fotografia Comercial",disabled:g})]}),e.jsxs(re,{type:"submit",disabled:g||!c.trim(),className:"btn-gradient text-white",children:[g?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Adicionar"]})]}),A?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):k.length>0?e.jsx("div",{className:"border rounded-md",children:e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Nome do Interesse"}),e.jsx(de,{children:"Criado em"}),e.jsx(de,{className:"text-right",children:"Ações"})]})}),e.jsx(rt,{children:k.map(S=>e.jsxs(Se,{children:[e.jsx(fe,{className:"font-medium",children:S.name}),e.jsx(fe,{children:new Date(S.created_at).toLocaleDateString("pt-BR")}),e.jsx(fe,{className:"text-right",children:e.jsxs(nt,{children:[e.jsx(at,{asChild:!0,children:e.jsx(re,{variant:"destructive",size:"sm",onClick:()=>d(S),children:e.jsx(wt,{className:"h-4 w-4"})})}),m&&m.id===S.id&&e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(st,{children:"Confirmar Exclusão"}),e.jsxs(lt,{children:['Tem certeza que deseja excluir o interesse "',e.jsx("strong",{children:m.name}),'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(ut,{children:[e.jsx(ct,{onClick:()=>d(null),children:"Cancelar"}),e.jsx(dt,{onClick:b,disabled:s,className:"bg-red-600 hover:bg-red-700",children:s?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):"Excluir Interesse"})]})]})]})})]},S.id))})]})}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum interesse de trabalho cadastrado. Adicione alguns acima!"})]})]})]})},La=()=>{var E,S,w,_;const{toast:x}=Ne(),k=ir(),[y,c]=G.useState([]),[p,A]=G.useState(!0),[j,g]=G.useState(null),[v,m]=G.useState(null),[d,s]=G.useState(""),[t,n]=G.useState(!1),[o,l]=G.useState(!1),[u,a]=G.useState(""),i=G.useCallback(async()=>{A(!0);try{const{data:O,error:T}=await ne.from("user_verifications").select("*, profiles(id, name, email, profile_slug)").order("requested_at",{ascending:!1});if(T)if(console.error("Erro ao buscar verificações:",T),T.message.includes("relationship")&&T.message.includes("does not exist"))x({title:"Erro de Configuração",description:"A relação entre verificações e perfis não foi encontrada. Tente recarregar o esquema ou contate o suporte.",variant:"destructive",duration:1e4});else throw T;c(O||[])}catch(O){x({title:"Erro ao buscar verificações",description:O.message,variant:"destructive"})}finally{A(!1)}},[x]);G.useEffect(()=>{i()},[i]);const h=(O,T)=>{g(O),m(T),s(O.admin_notes||"")},r=()=>{g(null),m(null),s("")},f=O=>{a(O),l(!0)},b=async O=>{if(!j||!O)return;n(!0),m(O);let T={};if(O==="approve")T={is_identity_verified:!0,is_verified:!0,verification_status:"verified",legal_full_name:j.full_name,birth_date:j.birth_date,cpf:j.cpf,pix_info:{type:j.pix_key_type,key:j.pix_key}};else if(O==="reject"){if(T={is_identity_verified:!1,verification_status:"rejected_verification"},!d.trim()){x({title:"Nota Obrigatória",description:"Por favor, adicione uma nota explicando o motivo da rejeição.",variant:"warning"}),n(!1);return}}else{n(!1);return}try{const{error:L}=await ne.from("user_verifications").update({status:O==="approve"?"approved":"rejected",admin_notes:d,reviewed_at:new Date().toISOString()}).eq("id",j.id);if(L)throw L;const{error:M}=await ne.from("profiles").update(T).eq("id",j.user_id);if(M)throw await ne.from("user_verifications").update({status:j.status,admin_notes:"Falha ao atualizar perfil, revertido.",reviewed_at:null}).eq("id",j.id),M;x({title:`Verificação ${O==="approve"?"Aprovada":"Rejeitada"}`,description:"O status do usuário foi atualizado."}),i(),r()}catch(L){x({title:"Erro ao processar verificação",description:L.message,variant:"destructive"}),console.error("Erro ao processar verificação:",L)}finally{n(!1)}},N=O=>{switch(O){case"pending":return e.jsx(ge,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:"Pendente"});case"approved":return e.jsx(ge,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Aprovada"});case"rejected":return e.jsx(ge,{variant:"destructive",children:"Rejeitada"});default:return e.jsx(ge,{variant:"secondary",children:O})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Verificações de Identidade de Usuário"}),e.jsx(we,{children:"Analise e aprove ou rejeite os pedidos de verificação de identidade dos usuários."})]}),e.jsxs(Oe,{children:[p?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):y.length>0?e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Usuário"}),e.jsx(de,{children:"Nome Completo Legal"}),e.jsx(de,{children:"Data Pedido"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-center",children:"Ações"})]})}),e.jsx(rt,{children:y.map(O=>{var T,L;return e.jsxs(Se,{children:[e.jsxs(fe,{children:[e.jsx("div",{className:"font-medium hover:text-pink-600 cursor-pointer",onClick:()=>{var M;return((M=O.profiles)==null?void 0:M.profile_slug)&&k(`/perfil/${O.profiles.profile_slug}`)},children:((T=O.profiles)==null?void 0:T.name)||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((L=O.profiles)==null?void 0:L.email)||"N/A"})]}),e.jsx(fe,{children:O.full_name}),e.jsx(fe,{children:new Date(O.requested_at).toLocaleString("pt-BR")}),e.jsx(fe,{children:N(O.status)}),e.jsx(fe,{className:"text-center",children:e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>h(O,O.status==="pending"?"analyze":"view"),className:"text-indigo-600 border-indigo-500 hover:bg-indigo-50",children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"})," ",O.status==="pending"?"Analisar":"Ver Detalhes"]})})]},O.id)})})]}):e.jsx("p",{className:"text-center text-muted-foreground p-8",children:"Nenhum pedido de verificação encontrado."}),e.jsx("div",{className:"mt-6 text-right",children:e.jsxs(re,{variant:"outline",onClick:i,disabled:p,children:[e.jsx(Vr,{className:`mr-2 h-4 w-4 ${p?"animate-spin":""}`}),"Atualizar Lista"]})})]})]}),j&&e.jsx(Fe,{open:!!j,onOpenChange:O=>!O&&r(),children:e.jsxs($e,{className:"sm:max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(He,{children:v==="view"?"Detalhes da Verificação":"Analisar Pedido de Verificação"}),e.jsxs(Ke,{children:["Usuário: ",(E=j.profiles)==null?void 0:E.name," (ID: ",j.user_id,")"]})]}),e.jsxs("div",{className:"py-4 space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome Completo:"})," ",j.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Data de Nascimento:"})," ",new Date(j.birth_date).toLocaleDateString("pt-BR")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"CPF:"})," ",j.cpf.replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3-$4")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo de Documento:"})," ",((S=ia.find(O=>O.value===j.document_type))==null?void 0:S.label)||((w=j.document_type)==null?void 0:w.toUpperCase())]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[j.document_front_image_url&&e.jsxs(re,{variant:"outline",onClick:()=>f(j.document_front_image_url),children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"})," Ver Doc. Frente/Único"]}),j.document_back_image_url&&e.jsxs(re,{variant:"outline",onClick:()=>f(j.document_back_image_url),children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"})," Ver Doc. Verso"]}),j.document_selfie_url&&e.jsxs(re,{variant:"outline",onClick:()=>f(j.document_selfie_url),children:[e.jsx(Bn,{className:"mr-2 h-4 w-4"})," Ver Selfie com Doc."]})]}),e.jsxs("p",{children:[e.jsxs("strong",{children:["Chave PIX (",(_=j.pix_key_type)==null?void 0:_.toUpperCase(),"):"]})," ",oa(j.pix_key,j.pix_key_type)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status Atual:"})," ",N(j.status)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"admin_notes",children:"Notas Administrativas"}),e.jsx(ae,{id:"admin_notes",value:d,onChange:O=>s(O.target.value),placeholder:j.status==="pending"&&v!=="view"?"Motivo da aprovação/rejeição...":"Notas internas...",disabled:j.status!=="pending"||v==="view"})]})]}),e.jsxs(We,{children:[e.jsx(re,{variant:"outline",onClick:r,disabled:t,children:"Fechar"}),j.status==="pending"&&v==="analyze"&&e.jsxs(e.Fragment,{children:[e.jsxs(re,{onClick:()=>b("reject"),disabled:t,variant:"destructive",children:[t&&v==="reject"?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(St,{className:"mr-2 h-4 w-4"}),"Rejeitar"]}),e.jsxs(re,{onClick:()=>b("approve"),disabled:t,className:"bg-green-600 hover:bg-green-700 text-white",children:[t&&v==="approve"?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Aprovar"]})]})]})]})}),e.jsx(Fe,{open:o,onOpenChange:l,children:e.jsxs($e,{className:"max-w-3xl max-h-[90vh]",children:[e.jsx(Ue,{children:e.jsx(He,{children:"Visualizador de Documento"})}),e.jsx("div",{className:"flex justify-center items-center p-4",children:u&&u.endsWith(".pdf")?e.jsx("iframe",{src:u,className:"w-full h-[70vh]",title:"Documento PDF"}):e.jsx("img",{src:u,alt:"Documento do Usuário",className:"max-w-full max-h-[75vh] object-contain"})}),e.jsx(We,{children:e.jsx(re,{variant:"outline",onClick:()=>l(!1),children:"Fechar"})})]})})]})},Ra=()=>{var i,h;const{toast:x}=Ne(),[k,y]=G.useState([]),[c,p]=G.useState(!0),[A,j]=G.useState(null),[g,v]=G.useState(null),[m,d]=G.useState(""),[s,t]=G.useState(!1),n=G.useCallback(async()=>{p(!0);try{const{data:r,error:f}=await ne.from("withdrawal_requests").select("*, profiles(id, name, email, legal_full_name, cpf, pix_info)").order("created_at",{ascending:!0});if(f)throw console.error("Erro ao buscar pedidos de saque:",f),f;y(r||[])}catch(r){x({title:"Erro ao buscar pedidos de saque",description:r.message,variant:"destructive"})}finally{p(!1)}},[x]);G.useEffect(()=>{n()},[n]);const o=(r,f)=>{j(r),v(f),d("")},l=()=>{j(null),v(null),d("")},u=async()=>{if(!A||!g)return;t(!0);let r="";if(g==="approve")r="approved";else if(g==="reject")r="rejected";else{t(!1);return}try{if(g==="approve")r="approved_manual_processing",x({title:"Aprovação Registrada",description:"Pedido de saque aprovado. O pagamento PIX precisa ser processado manualmente.",variant:"info",duration:8e3});else if(g==="reject"){const{error:b}=await ne.rpc("update_wallet_balance",{p_user_id:A.user_id,p_amount:A.amount,p_transaction_description:`Estorno de Saque Rejeitado - Pedido ID: ${A.id}`,p_provider_transaction_id:`reversal_wd_${A.id}_${Date.now()}`,p_transaction_status:"completed",p_payment_method_id:"internal",p_status_detail:"Saque rejeitado pelo admin"});if(b)throw new Error(`Erro ao estornar saldo para saque rejeitado: ${b.message}`);x({title:"Saque Rejeitado",description:"O saldo foi estornado para o usuário."})}const{error:f}=await ne.from("withdrawal_requests").update({status:r,admin_notes:m,processed_at:new Date().toISOString()}).eq("id",A.id);if(f)throw f;n(),l()}catch(f){x({title:"Erro ao processar pedido",description:f.message,variant:"destructive"}),console.error("Erro ao processar pedido:",f)}finally{t(!1)}},a=r=>{switch(r){case"pending":return e.jsx(ge,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:"Pendente"});case"approved_manual_processing":return e.jsx(ge,{className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Aprovado (Processar Manual)"});case"approved":return e.jsx(ge,{className:"bg-cyan-500 hover:bg-cyan-600 text-white",children:"Aprovado (Aguard. Pagamento)"});case"processed":return e.jsx(ge,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Processado (Pago)"});case"rejected":return e.jsx(ge,{variant:"destructive",children:"Rejeitado"});case"failed":return e.jsx(ge,{variant:"destructive",className:"bg-orange-600 hover:bg-orange-700",children:"Falhou (Pagamento)"});default:return e.jsx(ge,{variant:"secondary",children:r})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Pedidos de Saque"}),e.jsx(we,{children:"Gerencie os pedidos de saque dos usuários. Ao aprovar, o sistema futuramente realizará o PIX via Mercado Pago. Atualmente, a aprovação marca o pedido para processamento manual."})]}),e.jsxs(Oe,{children:[c?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):k.length>0?e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Se,{children:[e.jsx(de,{children:"Usuário"}),e.jsx(de,{children:"Valor (R$)"}),e.jsx(de,{children:"Chave PIX"}),e.jsx(de,{children:"Data do Pedido"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-center",children:"Ações"})]})}),e.jsx(rt,{children:k.map(r=>{var f,b,N,E,S;return e.jsxs(Se,{children:[e.jsxs(fe,{children:[e.jsx("div",{className:"font-medium",children:((f=r.profiles)==null?void 0:f.name)||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((b=r.profiles)==null?void 0:b.email)||"N/A"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Legal: ",((N=r.profiles)==null?void 0:N.legal_full_name)||"N/A"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["CPF: ",((E=r.profiles)==null?void 0:E.cpf)||"N/A"]})]}),e.jsxs(fe,{className:"font-semibold",children:["R$ ",Number(r.amount).toFixed(2).replace(".",",")]}),e.jsxs(fe,{children:[e.jsx("div",{className:"font-medium",children:(S=r.pix_key_type)==null?void 0:S.toUpperCase()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.pix_key})]}),e.jsx(fe,{children:new Date(r.created_at).toLocaleString("pt-BR")}),e.jsx(fe,{children:a(r.status)}),e.jsxs(fe,{className:"text-center",children:[r.status==="pending"&&e.jsxs("div",{className:"space-x-2",children:[e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>o(r,"approve"),className:"text-green-600 border-green-500 hover:bg-green-50",children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"})," Aprovar"]}),e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>o(r,"reject"),className:"text-red-600 border-red-500 hover:bg-red-50",children:[e.jsx(St,{className:"mr-2 h-4 w-4"})," Rejeitar"]})]}),r.status==="approved_manual_processing"&&e.jsxs(re,{variant:"outline",size:"sm",disabled:!0,className:"text-blue-600",children:[e.jsx(Qr,{className:"mr-2 h-4 w-4"})," Processar PIX Manualmente"]}),(r.status==="processed"||r.status==="rejected"||r.status==="failed")&&e.jsxs("p",{className:"text-xs text-muted-foreground italic",children:[r.status==="processed"?`Pago em ${new Date(r.processed_at).toLocaleDateString()}`:`Finalizado em ${new Date(r.processed_at).toLocaleDateString()}`,r.admin_notes&&e.jsxs("span",{className:"block",children:["Nota: ",r.admin_notes]})]})]})]},r.id)})})]}):e.jsx("p",{className:"text-center text-muted-foreground p-8",children:"Nenhum pedido de saque pendente ou processado."}),e.jsx("div",{className:"mt-6 text-right",children:e.jsxs(re,{variant:"outline",onClick:n,disabled:c,children:[e.jsx(Vr,{className:`mr-2 h-4 w-4 ${c?"animate-spin":""}`}),"Atualizar Lista"]})})]})]}),A&&g&&e.jsx(Fe,{open:!!A,onOpenChange:r=>!r&&l(),children:e.jsxs($e,{children:[e.jsxs(Ue,{children:[e.jsxs(He,{children:[g==="approve"?"Aprovar":"Rejeitar"," Pedido de Saque"]}),e.jsxs(Ke,{children:["Usuário: ",(i=A.profiles)==null?void 0:i.name," (ID: ",A.user_id,")",e.jsx("br",{}),"Valor: R$ ",Number(A.amount).toFixed(2).replace(".",","),e.jsx("br",{}),"PIX: ",(h=A.pix_key_type)==null?void 0:h.toUpperCase()," - ",A.pix_key]})]}),e.jsxs("div",{className:"py-4 space-y-2",children:[e.jsx(J,{htmlFor:"admin_notes",children:"Notas Administrativas (Opcional)"}),e.jsx(ae,{id:"admin_notes",value:m,onChange:r=>d(r.target.value),placeholder:g==="reject"?"Motivo da rejeição...":"Notas internas..."}),g==="approve"&&e.jsxs(Xe,{variant:"default",className:"bg-yellow-50 border-yellow-300",children:[e.jsx(ht,{className:"h-4 w-4 text-yellow-600"}),e.jsx(Ye,{className:"text-yellow-700",children:"Atenção: Processamento Manual"}),e.jsx(Ze,{className:"text-yellow-600",children:'Aprovar este saque irá marcá-lo como "Aprovado - Processar Manualmente". Você precisará realizar a transferência PIX manualmente através do seu banco ou plataforma de pagamento. Futuramente, esta etapa será automatizada com o Mercado Pago.'})]}),g==="reject"&&e.jsxs(Xe,{variant:"destructive",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Rejeição de Saque"}),e.jsx(Ze,{children:"Ao rejeitar, o valor será estornado para a carteira do usuário."})]})]}),e.jsxs(We,{children:[e.jsx(re,{variant:"outline",onClick:l,disabled:s,children:"Cancelar"}),e.jsxs(re,{onClick:u,disabled:s,className:g==="approve"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white",children:[s?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):g==="approve"?e.jsx(Yt,{className:"mr-2 h-4 w-4"}):e.jsx(St,{className:"mr-2 h-4 w-4"}),g==="approve"?"Confirmar Aprovação":"Confirmar Rejeição"]})]})]})})]})},Ma=()=>{const{appSettings:x,fetchAppSettings:k}=Je(),{toast:y}=Ne(),[c,p]=G.useState(""),[A,j]=G.useState(""),[g,v]=G.useState(!0),[m,d]=G.useState(!1),s=[{label:"Pequeno (h-8)",value:"h-8"},{label:"Médio (h-10)",value:"h-10"},{label:"Grande (h-12)",value:"h-12"},{label:"Extra Grande (h-14)",value:"h-14"}];G.useEffect(()=>{x&&(p(x.SITE_LOGO_URL||""),j(x.SITE_LOGO_SIZE||"h-10"),v(!1))},[x]);const t=async()=>{d(!0);try{const n=[{key:"SITE_LOGO_URL",value:{value:c}},{key:"SITE_LOGO_SIZE",value:{value:A}}],{error:o}=await ne.from("app_settings").upsert(n,{onConflict:"key"});if(o)throw o;await k(),y({title:"Sucesso!",description:"Configurações do logo salvas com sucesso.",variant:"success"})}catch(n){y({title:"Erro ao Salvar",description:n.message,variant:"destructive"})}finally{d(!1)}};return g?e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx(se,{className:"h-8 w-8 animate-spin"})}):e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Configurações do Logo"}),e.jsx(we,{children:"Personalize o logo que aparece no cabeçalho do site."})]}),e.jsxs(Oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"logoUrl",children:"URL do Logo"}),e.jsx(ae,{id:"logoUrl",value:c,onChange:n=>p(n.target.value),placeholder:"https://exemplo.com/logo.png"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"logoSize",children:"Tamanho do Logo (Altura)"}),e.jsxs(Ce,{value:A,onValueChange:j,children:[e.jsx(Ie,{id:"logoSize",children:e.jsx(Le,{placeholder:"Selecione um tamanho"})}),e.jsx(Re,{children:s.map(n=>e.jsx(be,{value:n.value,children:n.label},n.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(re,{onClick:t,disabled:m,children:[m?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})}),e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx(J,{children:"Prévia do Logo"}),e.jsx("div",{className:"mt-2 p-4 bg-gray-100 rounded-md flex items-center justify-center",children:c?e.jsx("img",{src:c,alt:"Prévia do Logo",className:`${A} w-auto object-contain`}):e.jsx("p",{className:"text-gray-500",children:"Insira uma URL para ver a prévia."})})]})]})]})},Da=()=>{const{toast:x}=Ne(),[k,y]=G.useState({FACEBOOK_PIXEL_ID:"",GOOGLE_TRACKING_ID:"",HEAD_CUSTOM_SCRIPTS:""}),[c,p]=G.useState(!0),[A,j]=G.useState(!1),g=G.useCallback(async()=>{p(!0);try{const d=["FACEBOOK_PIXEL_ID","GOOGLE_TRACKING_ID","HEAD_CUSTOM_SCRIPTS"],{data:s,error:t}=await ne.from("app_settings").select("key, value").in("key",d);if(t)throw t;const n=s.reduce((o,l)=>{var u;return o[l.key]=((u=l.value)==null?void 0:u.value)||"",o},{});y(o=>({...o,...n}))}catch(d){x({title:"Erro ao buscar configurações",description:d.message,variant:"destructive"})}finally{p(!1)}},[x]);G.useEffect(()=>{g()},[g]);const v=(d,s)=>{y(t=>({...t,[d]:s}))},m=async()=>{j(!0);try{const d=Object.entries(k).map(([t,n])=>({key:t,value:{value:n}})),{error:s}=await ne.from("app_settings").upsert(d,{onConflict:"key"});if(s)throw s;x({title:"Sucesso!",description:"Configurações de integração salvas."})}catch(d){x({title:"Erro ao salvar",description:d.message,variant:"destructive"})}finally{j(!1)}};return e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Integrações e Rastreamento"}),e.jsx(we,{children:"Adicione scripts de rastreamento (pixels) e outros códigos personalizados que serão injetados no <head> de todas as páginas do site."})]}),e.jsx(Oe,{className:"space-y-6",children:c?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"facebook-pixel",children:"ID do Pixel do Facebook"}),e.jsx(ae,{id:"facebook-pixel",value:k.FACEBOOK_PIXEL_ID,onChange:d=>v("FACEBOOK_PIXEL_ID",d.target.value),placeholder:"Ex: 123456789012345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"google-tracking",children:"ID do Google Analytics / Tag Manager"}),e.jsx(ae,{id:"google-tracking",value:k.GOOGLE_TRACKING_ID,onChange:d=>v("GOOGLE_TRACKING_ID",d.target.value),placeholder:"Ex: G-XXXXXXXXXX ou GTM-XXXXXXX"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"custom-scripts",children:"Scripts Personalizados no <head>"}),e.jsx(ft,{id:"custom-scripts",value:k.HEAD_CUSTOM_SCRIPTS,onChange:d=>v("HEAD_CUSTOM_SCRIPTS",d.target.value),placeholder:`<meta name="custom-tag" content="value">
<script>
  // seu script aqui
<\/script>`,rows:8,className:"font-mono"}),e.jsxs(Xe,{variant:"destructive",className:"mt-2",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Cuidado!"}),e.jsx(Ze,{children:"Scripts malformados ou incorretos inseridos aqui podem quebrar seu site. Use com cautela."})]})]})]})}),e.jsx(pt,{children:e.jsxs(re,{onClick:m,disabled:A||c,children:[A?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"}),"Salvar Integrações"]})})]})},qa=()=>{const{user:x}=Je(),{toast:k}=Ne(),[y,c]=G.useState({SMTP_HOST:"",SMTP_PORT:"",SMTP_USER:"",SMTP_SENDER_EMAIL:"",SMTP_SENDER_NAME:""}),[p,A]=G.useState(""),[j,g]=G.useState(!0),[v,m]=G.useState(!1),[d,s]=G.useState(!1),[t,n]=G.useState("");G.useEffect(()=>{x!=null&&x.email&&n(x.email)},[x]);const o=G.useCallback(async()=>{g(!0);try{const a=["SMTP_HOST","SMTP_PORT","SMTP_USER","SMTP_SENDER_EMAIL","SMTP_SENDER_NAME"],{data:i,error:h}=await ne.from("app_settings").select("key, value").in("key",a);if(h)throw h;const r=i.reduce((f,b)=>{var N;return f[b.key]=((N=b.value)==null?void 0:N.value)||"",f},{});c(f=>({...f,...r}))}catch(a){k({title:"Erro ao buscar configurações SMTP",description:a.message,variant:"destructive"})}finally{g(!1)}},[k]);G.useEffect(()=>{o()},[o]);const l=async()=>{m(!0);try{const a=Object.entries(y).map(([h,r])=>({key:h,value:{value:r}})),{error:i}=await ne.from("app_settings").upsert(a,{onConflict:"key"});if(i)throw i;if(p.trim()!==""){const{data:h,error:r}=await ne.functions.invoke("save-app-secrets",{body:{secrets:[{name:"SMTP_PASSWORD",value:p}]}});if(r){let f=r.message;try{f=(await r.context.json()).error||f}catch{}throw new Error(`Erro ao salvar senha SMTP: ${f}`)}if(h!=null&&h.error)throw new Error(`Erro na função de salvar senha: ${h.error}`)}k({title:"Sucesso!",description:"Configurações SMTP salvas."}),A("")}catch(a){k({title:"Erro ao salvar",description:a.message,variant:"destructive"})}finally{m(!1)}},u=async()=>{if(!t){k({title:"Erro",description:"Por favor, insira um e-mail de destino para o teste.",variant:"destructive"});return}s(!0);try{const{data:a,error:i}=await ne.functions.invoke("send-test-email",{body:{to_email:t}});if(i){let h=i.message;try{h=(await i.context.json()).error||h}catch{}throw new Error(h)}if(a.error)throw new Error(a.error);k({title:"E-mail de Teste Despachado!",description:a.message||"O servidor tentou enviar o e-mail. Verifique a caixa de entrada e os logs do seu provedor SMTP.",variant:"success"})}catch(a){k({title:"Erro ao Enviar E-mail de Teste",description:a.message,variant:"destructive"})}finally{s(!1)}};return e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsx(Ee,{children:"Configuração do Servidor SMTP"}),e.jsx(we,{children:"Configure os detalhes do seu servidor de e-mail para enviar e-mails transacionais."})]}),e.jsx(Oe,{className:"space-y-4",children:j?e.jsx("div",{className:"flex justify-center h-40 items-center",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs(Xe,{variant:"warning",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Ação Manual Necessária"}),e.jsxs(Ze,{children:["Para salvar credenciais seguras (como senhas), uma chave de acesso precisa ser configurada:",e.jsx("br",{}),"1. Gere um novo token de acesso na sua ",e.jsx("a",{href:"https://supabase.com/dashboard/account/tokens",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"página de tokens do Supabase"}),".",e.jsx("br",{}),'2. Adicione este token como um novo "secret" com o nome ',e.jsx("code",{className:"font-mono bg-yellow-100 text-yellow-800 px-1 py-0.5 rounded",children:"SUPA_MANAGEMENT_ACCESS_TOKEN"})," nas ",e.jsx("a",{href:"https://supabase.com/dashboard/project/fgmdqayaqafxutbncypt/settings/functions",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Configurações de Edge Functions"})," do seu projeto."]})]}),e.jsxs(Xe,{children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Configuração de E-mails do Supabase"}),e.jsxs(Ze,{children:["Para personalizar completamente os e-mails de confirmação e redefinição de senha, você pode:",e.jsx("br",{}),"• Editar os templates no painel do Supabase (Authentication → Email Templates)",e.jsx("br",{}),"• Ou desabilitar os e-mails automáticos e usar apenas seu SMTP personalizado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"smtp-host",children:"Host SMTP"}),e.jsx(ae,{id:"smtp-host",value:y.SMTP_HOST,onChange:a=>c({...y,SMTP_HOST:a.target.value}),placeholder:"smtp.example.com"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"smtp-port",children:"Porta"}),e.jsx(ae,{id:"smtp-port",type:"number",value:y.SMTP_PORT,onChange:a=>c({...y,SMTP_PORT:a.target.value}),placeholder:"587"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"smtp-user",children:"Usuário"}),e.jsx(ae,{id:"smtp-user",value:y.SMTP_USER,onChange:a=>c({...y,SMTP_USER:a.target.value}),placeholder:"seu_email@example.com"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"smtp-password",children:"Senha"}),e.jsx(ae,{id:"smtp-password",type:"password",value:p,onChange:a=>A(a.target.value),placeholder:"Deixe em branco para não alterar"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(Fn,{className:"h-3 w-3"})," Salvo de forma segura."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"smtp-sender-email",children:"E-mail Remetente"}),e.jsx(ae,{id:"smtp-sender-email",type:"email",value:y.SMTP_SENDER_EMAIL,onChange:a=>c({...y,SMTP_SENDER_EMAIL:a.target.value}),placeholder:"nao-responda@example.com"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"smtp-sender-name",children:"Nome Remetente"}),e.jsx(ae,{id:"smtp-sender-name",value:y.SMTP_SENDER_NAME,onChange:a=>c({...y,SMTP_SENDER_NAME:a.target.value}),placeholder:"Nome do Seu Site"})]})]})]})}),e.jsxs(pt,{className:"flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs(re,{onClick:l,disabled:j||v,children:[v?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"})," Salvar Configurações"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto sm:ml-auto",children:[e.jsx(ae,{type:"email",placeholder:"E-mail de destino do teste",value:t,onChange:a=>n(a.target.value),className:"w-full sm:w-64"}),e.jsxs(re,{variant:"outline",onClick:u,disabled:d||v||j,children:[d?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Qr,{className:"mr-2 h-4 w-4"})," Enviar Teste"]})]})]})]})};var Mt="Tabs",[Ba,Fd]=$n(Mt,[Kr]),Jr=Kr(),[Fa,ur]=Ba(Mt),en=G.forwardRef((x,k)=>{const{__scopeTabs:y,value:c,onValueChange:p,defaultValue:A,orientation:j="horizontal",dir:g,activationMode:v="automatic",...m}=x,d=Un(g),[s,t]=Hn({prop:c,onChange:p,defaultProp:A??"",caller:Mt});return e.jsx(Fa,{scope:y,baseId:zn(),value:s,onValueChange:t,orientation:j,dir:d,activationMode:v,children:e.jsx(It.div,{dir:d,"data-orientation":j,...m,ref:k})})});en.displayName=Mt;var tn="TabsList",rn=G.forwardRef((x,k)=>{const{__scopeTabs:y,loop:c=!0,...p}=x,A=ur(tn,y),j=Jr(y);return e.jsx(Vn,{asChild:!0,...j,orientation:A.orientation,dir:A.dir,loop:c,children:e.jsx(It.div,{role:"tablist","aria-orientation":A.orientation,...p,ref:k})})});rn.displayName=tn;var nn="TabsTrigger",an=G.forwardRef((x,k)=>{const{__scopeTabs:y,value:c,disabled:p=!1,...A}=x,j=ur(nn,y),g=Jr(y),v=ln(j.baseId,c),m=un(j.baseId,c),d=c===j.value;return e.jsx(Gn,{asChild:!0,...g,focusable:!p,active:d,children:e.jsx(It.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":m,"data-state":d?"active":"inactive","data-disabled":p?"":void 0,disabled:p,id:v,...A,ref:k,onMouseDown:Vt(x.onMouseDown,s=>{!p&&s.button===0&&s.ctrlKey===!1?j.onValueChange(c):s.preventDefault()}),onKeyDown:Vt(x.onKeyDown,s=>{[" ","Enter"].includes(s.key)&&j.onValueChange(c)}),onFocus:Vt(x.onFocus,()=>{const s=j.activationMode!=="manual";!d&&!p&&s&&j.onValueChange(c)})})})});an.displayName=nn;var on="TabsContent",sn=G.forwardRef((x,k)=>{const{__scopeTabs:y,value:c,forceMount:p,children:A,...j}=x,g=ur(on,y),v=ln(g.baseId,c),m=un(g.baseId,c),d=c===g.value,s=G.useRef(d);return G.useEffect(()=>{const t=requestAnimationFrame(()=>s.current=!1);return()=>cancelAnimationFrame(t)},[]),e.jsx(Kn,{present:p||d,children:({present:t})=>e.jsx(It.div,{"data-state":d?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":v,hidden:!t,id:m,tabIndex:0,...j,ref:k,style:{...x.style,animationDuration:s.current?"0s":void 0},children:t&&A})})});sn.displayName=on;function ln(x,k){return`${x}-trigger-${k}`}function un(x,k){return`${x}-content-${k}`}var $a=en,cn=rn,dn=an,fn=sn;const Ua=$a,hn=or.forwardRef(({className:x,...k},y)=>e.jsx(cn,{ref:y,className:sr("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",x),...k}));hn.displayName=cn.displayName;const Qt=or.forwardRef(({className:x,...k},y)=>e.jsx(dn,{ref:y,className:sr("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",x),...k}));Qt.displayName=dn.displayName;const Jt=or.forwardRef(({className:x,...k},y)=>e.jsx(fn,{ref:y,className:sr("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",x),...k}));Jt.displayName=fn.displayName;function Ha(){this.__data__=[],this.size=0}var za=Ha;function Va(x,k){return x===k||x!==x&&k!==k}var pn=Va,Ga=pn;function Ka(x,k){for(var y=x.length;y--;)if(Ga(x[y][0],k))return y;return-1}var Dt=Ka,Wa=Dt,Xa=Array.prototype,Ya=Xa.splice;function Za(x){var k=this.__data__,y=Wa(k,x);if(y<0)return!1;var c=k.length-1;return y==c?k.pop():Ya.call(k,y,1),--this.size,!0}var Qa=Za,Ja=Dt;function ei(x){var k=this.__data__,y=Ja(k,x);return y<0?void 0:k[y][1]}var ti=ei,ri=Dt;function ni(x){return ri(this.__data__,x)>-1}var ai=ni,ii=Dt;function oi(x,k){var y=this.__data__,c=ii(y,x);return c<0?(++this.size,y.push([x,k])):y[c][1]=k,this}var si=oi,li=za,ui=Qa,ci=ti,di=ai,fi=si;function vt(x){var k=-1,y=x==null?0:x.length;for(this.clear();++k<y;){var c=x[k];this.set(c[0],c[1])}}vt.prototype.clear=li;vt.prototype.delete=ui;vt.prototype.get=ci;vt.prototype.has=di;vt.prototype.set=fi;var qt=vt,hi=qt;function pi(){this.__data__=new hi,this.size=0}var vi=pi;function mi(x){var k=this.__data__,y=k.delete(x);return this.size=k.size,y}var gi=mi;function yi(x){return this.__data__.get(x)}var xi=yi;function bi(x){return this.__data__.has(x)}var _i=bi,ji=typeof ke=="object"&&ke&&ke.Object===Object&&ke,vn=ji,Ei=vn,Oi=typeof self=="object"&&self&&self.Object===Object&&self,Ni=Ei||Oi||Function("return this")(),Ve=Ni,wi=Ve,Ai=wi.Symbol,cr=Ai,pr=cr,mn=Object.prototype,Si=mn.hasOwnProperty,Ti=mn.toString,_t=pr?pr.toStringTag:void 0;function ki(x){var k=Si.call(x,_t),y=x[_t];try{x[_t]=void 0;var c=!0}catch{}var p=Ti.call(x);return c&&(k?x[_t]=y:delete x[_t]),p}var Pi=ki,Ci=Object.prototype,Ii=Ci.toString;function Li(x){return Ii.call(x)}var Ri=Li,vr=cr,Mi=Pi,Di=Ri,qi="[object Null]",Bi="[object Undefined]",mr=vr?vr.toStringTag:void 0;function Fi(x){return x==null?x===void 0?Bi:qi:mr&&mr in Object(x)?Mi(x):Di(x)}var Bt=Fi;function $i(x){var k=typeof x;return x!=null&&(k=="object"||k=="function")}var gn=$i,Ui=Bt,Hi=gn,zi="[object AsyncFunction]",Vi="[object Function]",Gi="[object GeneratorFunction]",Ki="[object Proxy]";function Wi(x){if(!Hi(x))return!1;var k=Ui(x);return k==Vi||k==Gi||k==zi||k==Ki}var yn=Wi,Xi=Ve,Yi=Xi["__core-js_shared__"],Zi=Yi,Gt=Zi,gr=function(){var x=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}();function Qi(x){return!!gr&&gr in x}var Ji=Qi,eo=Function.prototype,to=eo.toString;function ro(x){if(x!=null){try{return to.call(x)}catch{}try{return x+""}catch{}}return""}var xn=ro,no=yn,ao=Ji,io=gn,oo=xn,so=/[\\^$.*+?()[\]{}|]/g,lo=/^\[object .+?Constructor\]$/,uo=Function.prototype,co=Object.prototype,fo=uo.toString,ho=co.hasOwnProperty,po=RegExp("^"+fo.call(ho).replace(so,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vo(x){if(!io(x)||ao(x))return!1;var k=no(x)?po:lo;return k.test(oo(x))}var mo=vo;function go(x,k){return x==null?void 0:x[k]}var yo=go,xo=mo,bo=yo;function _o(x,k){var y=bo(x,k);return xo(y)?y:void 0}var mt=_o,jo=mt,Eo=Ve,Oo=jo(Eo,"Map"),dr=Oo,No=mt,wo=No(Object,"create"),Ft=wo,yr=Ft;function Ao(){this.__data__=yr?yr(null):{},this.size=0}var So=Ao;function To(x){var k=this.has(x)&&delete this.__data__[x];return this.size-=k?1:0,k}var ko=To,Po=Ft,Co="__lodash_hash_undefined__",Io=Object.prototype,Lo=Io.hasOwnProperty;function Ro(x){var k=this.__data__;if(Po){var y=k[x];return y===Co?void 0:y}return Lo.call(k,x)?k[x]:void 0}var Mo=Ro,Do=Ft,qo=Object.prototype,Bo=qo.hasOwnProperty;function Fo(x){var k=this.__data__;return Do?k[x]!==void 0:Bo.call(k,x)}var $o=Fo,Uo=Ft,Ho="__lodash_hash_undefined__";function zo(x,k){var y=this.__data__;return this.size+=this.has(x)?0:1,y[x]=Uo&&k===void 0?Ho:k,this}var Vo=zo,Go=So,Ko=ko,Wo=Mo,Xo=$o,Yo=Vo;function gt(x){var k=-1,y=x==null?0:x.length;for(this.clear();++k<y;){var c=x[k];this.set(c[0],c[1])}}gt.prototype.clear=Go;gt.prototype.delete=Ko;gt.prototype.get=Wo;gt.prototype.has=Xo;gt.prototype.set=Yo;var Zo=gt,xr=Zo,Qo=qt,Jo=dr;function es(){this.size=0,this.__data__={hash:new xr,map:new(Jo||Qo),string:new xr}}var ts=es;function rs(x){var k=typeof x;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?x!=="__proto__":x===null}var ns=rs,as=ns;function is(x,k){var y=x.__data__;return as(k)?y[typeof k=="string"?"string":"hash"]:y.map}var $t=is,os=$t;function ss(x){var k=os(this,x).delete(x);return this.size-=k?1:0,k}var ls=ss,us=$t;function cs(x){return us(this,x).get(x)}var ds=cs,fs=$t;function hs(x){return fs(this,x).has(x)}var ps=hs,vs=$t;function ms(x,k){var y=vs(this,x),c=y.size;return y.set(x,k),this.size+=y.size==c?0:1,this}var gs=ms,ys=ts,xs=ls,bs=ds,_s=ps,js=gs;function yt(x){var k=-1,y=x==null?0:x.length;for(this.clear();++k<y;){var c=x[k];this.set(c[0],c[1])}}yt.prototype.clear=ys;yt.prototype.delete=xs;yt.prototype.get=bs;yt.prototype.has=_s;yt.prototype.set=js;var bn=yt,Es=qt,Os=dr,Ns=bn,ws=200;function As(x,k){var y=this.__data__;if(y instanceof Es){var c=y.__data__;if(!Os||c.length<ws-1)return c.push([x,k]),this.size=++y.size,this;y=this.__data__=new Ns(c)}return y.set(x,k),this.size=y.size,this}var Ss=As,Ts=qt,ks=vi,Ps=gi,Cs=xi,Is=_i,Ls=Ss;function xt(x){var k=this.__data__=new Ts(x);this.size=k.size}xt.prototype.clear=ks;xt.prototype.delete=Ps;xt.prototype.get=Cs;xt.prototype.has=Is;xt.prototype.set=Ls;var Rs=xt,Ms="__lodash_hash_undefined__";function Ds(x){return this.__data__.set(x,Ms),this}var qs=Ds;function Bs(x){return this.__data__.has(x)}var Fs=Bs,$s=bn,Us=qs,Hs=Fs;function Tt(x){var k=-1,y=x==null?0:x.length;for(this.__data__=new $s;++k<y;)this.add(x[k])}Tt.prototype.add=Tt.prototype.push=Us;Tt.prototype.has=Hs;var zs=Tt;function Vs(x,k){for(var y=-1,c=x==null?0:x.length;++y<c;)if(k(x[y],y,x))return!0;return!1}var Gs=Vs;function Ks(x,k){return x.has(k)}var Ws=Ks,Xs=zs,Ys=Gs,Zs=Ws,Qs=1,Js=2;function el(x,k,y,c,p,A){var j=y&Qs,g=x.length,v=k.length;if(g!=v&&!(j&&v>g))return!1;var m=A.get(x),d=A.get(k);if(m&&d)return m==k&&d==x;var s=-1,t=!0,n=y&Js?new Xs:void 0;for(A.set(x,k),A.set(k,x);++s<g;){var o=x[s],l=k[s];if(c)var u=j?c(l,o,s,k,x,A):c(o,l,s,x,k,A);if(u!==void 0){if(u)continue;t=!1;break}if(n){if(!Ys(k,function(a,i){if(!Zs(n,i)&&(o===a||p(o,a,y,c,A)))return n.push(i)})){t=!1;break}}else if(!(o===l||p(o,l,y,c,A))){t=!1;break}}return A.delete(x),A.delete(k),t}var _n=el,tl=Ve,rl=tl.Uint8Array,nl=rl;function al(x){var k=-1,y=Array(x.size);return x.forEach(function(c,p){y[++k]=[p,c]}),y}var il=al;function ol(x){var k=-1,y=Array(x.size);return x.forEach(function(c){y[++k]=c}),y}var sl=ol,br=cr,_r=nl,ll=pn,ul=_n,cl=il,dl=sl,fl=1,hl=2,pl="[object Boolean]",vl="[object Date]",ml="[object Error]",gl="[object Map]",yl="[object Number]",xl="[object RegExp]",bl="[object Set]",_l="[object String]",jl="[object Symbol]",El="[object ArrayBuffer]",Ol="[object DataView]",jr=br?br.prototype:void 0,Kt=jr?jr.valueOf:void 0;function Nl(x,k,y,c,p,A,j){switch(y){case Ol:if(x.byteLength!=k.byteLength||x.byteOffset!=k.byteOffset)return!1;x=x.buffer,k=k.buffer;case El:return!(x.byteLength!=k.byteLength||!A(new _r(x),new _r(k)));case pl:case vl:case yl:return ll(+x,+k);case ml:return x.name==k.name&&x.message==k.message;case xl:case _l:return x==k+"";case gl:var g=cl;case bl:var v=c&fl;if(g||(g=dl),x.size!=k.size&&!v)return!1;var m=j.get(x);if(m)return m==k;c|=hl,j.set(x,k);var d=ul(g(x),g(k),c,p,A,j);return j.delete(x),d;case jl:if(Kt)return Kt.call(x)==Kt.call(k)}return!1}var wl=Nl;function Al(x,k){for(var y=-1,c=k.length,p=x.length;++y<c;)x[p+y]=k[y];return x}var Sl=Al,Tl=Array.isArray,fr=Tl,kl=Sl,Pl=fr;function Cl(x,k,y){var c=k(x);return Pl(x)?c:kl(c,y(x))}var Il=Cl;function Ll(x,k){for(var y=-1,c=x==null?0:x.length,p=0,A=[];++y<c;){var j=x[y];k(j,y,x)&&(A[p++]=j)}return A}var Rl=Ll;function Ml(){return[]}var Dl=Ml,ql=Rl,Bl=Dl,Fl=Object.prototype,$l=Fl.propertyIsEnumerable,Er=Object.getOwnPropertySymbols,Ul=Er?function(x){return x==null?[]:(x=Object(x),ql(Er(x),function(k){return $l.call(x,k)}))}:Bl,Hl=Ul;function zl(x,k){for(var y=-1,c=Array(x);++y<x;)c[y]=k(y);return c}var Vl=zl;function Gl(x){return x!=null&&typeof x=="object"}var Ut=Gl,Kl=Bt,Wl=Ut,Xl="[object Arguments]";function Yl(x){return Wl(x)&&Kl(x)==Xl}var Zl=Yl,Or=Zl,Ql=Ut,jn=Object.prototype,Jl=jn.hasOwnProperty,eu=jn.propertyIsEnumerable,tu=Or(function(){return arguments}())?Or:function(x){return Ql(x)&&Jl.call(x,"callee")&&!eu.call(x,"callee")},ru=tu,kt={exports:{}};function nu(){return!1}var au=nu;kt.exports;(function(x,k){var y=Ve,c=au,p=k&&!k.nodeType&&k,A=p&&!0&&x&&!x.nodeType&&x,j=A&&A.exports===p,g=j?y.Buffer:void 0,v=g?g.isBuffer:void 0,m=v||c;x.exports=m})(kt,kt.exports);var En=kt.exports,iu=9007199254740991,ou=/^(?:0|[1-9]\d*)$/;function su(x,k){var y=typeof x;return k=k??iu,!!k&&(y=="number"||y!="symbol"&&ou.test(x))&&x>-1&&x%1==0&&x<k}var lu=su,uu=9007199254740991;function cu(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=uu}var On=cu,du=Bt,fu=On,hu=Ut,pu="[object Arguments]",vu="[object Array]",mu="[object Boolean]",gu="[object Date]",yu="[object Error]",xu="[object Function]",bu="[object Map]",_u="[object Number]",ju="[object Object]",Eu="[object RegExp]",Ou="[object Set]",Nu="[object String]",wu="[object WeakMap]",Au="[object ArrayBuffer]",Su="[object DataView]",Tu="[object Float32Array]",ku="[object Float64Array]",Pu="[object Int8Array]",Cu="[object Int16Array]",Iu="[object Int32Array]",Lu="[object Uint8Array]",Ru="[object Uint8ClampedArray]",Mu="[object Uint16Array]",Du="[object Uint32Array]",ve={};ve[Tu]=ve[ku]=ve[Pu]=ve[Cu]=ve[Iu]=ve[Lu]=ve[Ru]=ve[Mu]=ve[Du]=!0;ve[pu]=ve[vu]=ve[Au]=ve[mu]=ve[Su]=ve[gu]=ve[yu]=ve[xu]=ve[bu]=ve[_u]=ve[ju]=ve[Eu]=ve[Ou]=ve[Nu]=ve[wu]=!1;function qu(x){return hu(x)&&fu(x.length)&&!!ve[du(x)]}var Bu=qu;function Fu(x){return function(k){return x(k)}}var $u=Fu,Pt={exports:{}};Pt.exports;(function(x,k){var y=vn,c=k&&!k.nodeType&&k,p=c&&!0&&x&&!x.nodeType&&x,A=p&&p.exports===c,j=A&&y.process,g=function(){try{var v=p&&p.require&&p.require("util").types;return v||j&&j.binding&&j.binding("util")}catch{}}();x.exports=g})(Pt,Pt.exports);var Uu=Pt.exports,Hu=Bu,zu=$u,Nr=Uu,wr=Nr&&Nr.isTypedArray,Vu=wr?zu(wr):Hu,Nn=Vu,Gu=Vl,Ku=ru,Wu=fr,Xu=En,Yu=lu,Zu=Nn,Qu=Object.prototype,Ju=Qu.hasOwnProperty;function ec(x,k){var y=Wu(x),c=!y&&Ku(x),p=!y&&!c&&Xu(x),A=!y&&!c&&!p&&Zu(x),j=y||c||p||A,g=j?Gu(x.length,String):[],v=g.length;for(var m in x)(k||Ju.call(x,m))&&!(j&&(m=="length"||p&&(m=="offset"||m=="parent")||A&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Yu(m,v)))&&g.push(m);return g}var tc=ec,rc=Object.prototype;function nc(x){var k=x&&x.constructor,y=typeof k=="function"&&k.prototype||rc;return x===y}var ac=nc;function ic(x,k){return function(y){return x(k(y))}}var oc=ic,sc=oc,lc=sc(Object.keys,Object),uc=lc,cc=ac,dc=uc,fc=Object.prototype,hc=fc.hasOwnProperty;function pc(x){if(!cc(x))return dc(x);var k=[];for(var y in Object(x))hc.call(x,y)&&y!="constructor"&&k.push(y);return k}var vc=pc,mc=yn,gc=On;function yc(x){return x!=null&&gc(x.length)&&!mc(x)}var xc=yc,bc=tc,_c=vc,jc=xc;function Ec(x){return jc(x)?bc(x):_c(x)}var Oc=Ec,Nc=Il,wc=Hl,Ac=Oc;function Sc(x){return Nc(x,Ac,wc)}var Tc=Sc,Ar=Tc,kc=1,Pc=Object.prototype,Cc=Pc.hasOwnProperty;function Ic(x,k,y,c,p,A){var j=y&kc,g=Ar(x),v=g.length,m=Ar(k),d=m.length;if(v!=d&&!j)return!1;for(var s=v;s--;){var t=g[s];if(!(j?t in k:Cc.call(k,t)))return!1}var n=A.get(x),o=A.get(k);if(n&&o)return n==k&&o==x;var l=!0;A.set(x,k),A.set(k,x);for(var u=j;++s<v;){t=g[s];var a=x[t],i=k[t];if(c)var h=j?c(i,a,t,k,x,A):c(a,i,t,x,k,A);if(!(h===void 0?a===i||p(a,i,y,c,A):h)){l=!1;break}u||(u=t=="constructor")}if(l&&!u){var r=x.constructor,f=k.constructor;r!=f&&"constructor"in x&&"constructor"in k&&!(typeof r=="function"&&r instanceof r&&typeof f=="function"&&f instanceof f)&&(l=!1)}return A.delete(x),A.delete(k),l}var Lc=Ic,Rc=mt,Mc=Ve,Dc=Rc(Mc,"DataView"),qc=Dc,Bc=mt,Fc=Ve,$c=Bc(Fc,"Promise"),Uc=$c,Hc=mt,zc=Ve,Vc=Hc(zc,"Set"),Gc=Vc,Kc=mt,Wc=Ve,Xc=Kc(Wc,"WeakMap"),Yc=Xc,er=qc,tr=dr,rr=Uc,nr=Gc,ar=Yc,wn=Bt,bt=xn,Sr="[object Map]",Zc="[object Object]",Tr="[object Promise]",kr="[object Set]",Pr="[object WeakMap]",Cr="[object DataView]",Qc=bt(er),Jc=bt(tr),ed=bt(rr),td=bt(nr),rd=bt(ar),Qe=wn;(er&&Qe(new er(new ArrayBuffer(1)))!=Cr||tr&&Qe(new tr)!=Sr||rr&&Qe(rr.resolve())!=Tr||nr&&Qe(new nr)!=kr||ar&&Qe(new ar)!=Pr)&&(Qe=function(x){var k=wn(x),y=k==Zc?x.constructor:void 0,c=y?bt(y):"";if(c)switch(c){case Qc:return Cr;case Jc:return Sr;case ed:return Tr;case td:return kr;case rd:return Pr}return k});var nd=Qe,Wt=Rs,ad=_n,id=wl,od=Lc,Ir=nd,Lr=fr,Rr=En,sd=Nn,ld=1,Mr="[object Arguments]",Dr="[object Array]",At="[object Object]",ud=Object.prototype,qr=ud.hasOwnProperty;function cd(x,k,y,c,p,A){var j=Lr(x),g=Lr(k),v=j?Dr:Ir(x),m=g?Dr:Ir(k);v=v==Mr?At:v,m=m==Mr?At:m;var d=v==At,s=m==At,t=v==m;if(t&&Rr(x)){if(!Rr(k))return!1;j=!0,d=!1}if(t&&!d)return A||(A=new Wt),j||sd(x)?ad(x,k,y,c,p,A):id(x,k,v,y,c,p,A);if(!(y&ld)){var n=d&&qr.call(x,"__wrapped__"),o=s&&qr.call(k,"__wrapped__");if(n||o){var l=n?x.value():x,u=o?k.value():k;return A||(A=new Wt),p(l,u,y,c,A)}}return t?(A||(A=new Wt),od(x,k,y,c,p,A)):!1}var dd=cd,fd=dd,Br=Ut;function An(x,k,y,c,p){return x===k?!0:x==null||k==null||!Br(x)&&!Br(k)?x!==x&&k!==k:fd(x,k,y,c,An,p)}var hd=An,pd=hd;function vd(x,k){return pd(x,k)}var md=vd,Sn={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(x,k){(function(c,p){x.exports=p()})(typeof self<"u"?self:ke,function(){return function(y){var c={};function p(A){if(c[A])return c[A].exports;var j=c[A]={i:A,l:!1,exports:{}};return y[A].call(j.exports,j,j.exports,p),j.l=!0,j.exports}return p.m=y,p.c=c,p.d=function(A,j,g){p.o(A,j)||Object.defineProperty(A,j,{configurable:!1,enumerable:!0,get:g})},p.n=function(A){var j=A&&A.__esModule?function(){return A.default}:function(){return A};return p.d(j,"a",j),j},p.o=function(A,j){return Object.prototype.hasOwnProperty.call(A,j)},p.p="",p(p.s=109)}([function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(17),j=p(18),g=p(19),v=p(45),m=p(46),d=p(47),s=p(48),t=p(49),n=p(12),o=p(32),l=p(33),u=p(31),a=p(1),i={Scope:a.Scope,create:a.create,find:a.find,query:a.query,register:a.register,Container:A.default,Format:j.default,Leaf:g.default,Embed:s.default,Scroll:v.default,Block:d.default,Inline:m.default,Text:t.default,Attributor:{Attribute:n.default,Class:o.default,Style:l.default,Store:u.default}};c.default=i},function(y,c,p){var A=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var h in i)i.hasOwnProperty(h)&&(a[h]=i[h])};return function(a,i){u(a,i);function h(){this.constructor=a}a.prototype=i===null?Object.create(i):(h.prototype=i.prototype,new h)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=function(u){A(a,u);function a(i){var h=this;return i="[Parchment] "+i,h=u.call(this,i)||this,h.message=i,h.name=h.constructor.name,h}return a}(Error);c.ParchmentError=j;var g={},v={},m={},d={};c.DATA_KEY="__blot";var s;(function(u){u[u.TYPE=3]="TYPE",u[u.LEVEL=12]="LEVEL",u[u.ATTRIBUTE=13]="ATTRIBUTE",u[u.BLOT=14]="BLOT",u[u.INLINE=7]="INLINE",u[u.BLOCK=11]="BLOCK",u[u.BLOCK_BLOT=10]="BLOCK_BLOT",u[u.INLINE_BLOT=6]="INLINE_BLOT",u[u.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",u[u.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",u[u.ANY=15]="ANY"})(s=c.Scope||(c.Scope={}));function t(u,a){var i=o(u);if(i==null)throw new j("Unable to create "+u+" blot");var h=i,r=u instanceof Node||u.nodeType===Node.TEXT_NODE?u:h.create(a);return new h(r,a)}c.create=t;function n(u,a){return a===void 0&&(a=!1),u==null?null:u[c.DATA_KEY]!=null?u[c.DATA_KEY].blot:a?n(u.parentNode,a):null}c.find=n;function o(u,a){a===void 0&&(a=s.ANY);var i;if(typeof u=="string")i=d[u]||g[u];else if(u instanceof Text||u.nodeType===Node.TEXT_NODE)i=d.text;else if(typeof u=="number")u&s.LEVEL&s.BLOCK?i=d.block:u&s.LEVEL&s.INLINE&&(i=d.inline);else if(u instanceof HTMLElement){var h=(u.getAttribute("class")||"").split(/\s+/);for(var r in h)if(i=v[h[r]],i)break;i=i||m[u.tagName]}return i==null?null:a&s.LEVEL&i.scope&&a&s.TYPE&i.scope?i:null}c.query=o;function l(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];if(u.length>1)return u.map(function(r){return l(r)});var i=u[0];if(typeof i.blotName!="string"&&typeof i.attrName!="string")throw new j("Invalid definition");if(i.blotName==="abstract")throw new j("Cannot register abstract class");if(d[i.blotName||i.attrName]=i,typeof i.keyName=="string")g[i.keyName]=i;else if(i.className!=null&&(v[i.className]=i),i.tagName!=null){Array.isArray(i.tagName)?i.tagName=i.tagName.map(function(r){return r.toUpperCase()}):i.tagName=i.tagName.toUpperCase();var h=Array.isArray(i.tagName)?i.tagName:[i.tagName];h.forEach(function(r){(m[r]==null||i.className==null)&&(m[r]=i)})}return i}c.register=l},function(y,c,p){var A=p(51),j=p(11),g=p(3),v=p(20),m=String.fromCharCode(0),d=function(s){Array.isArray(s)?this.ops=s:s!=null&&Array.isArray(s.ops)?this.ops=s.ops:this.ops=[]};d.prototype.insert=function(s,t){var n={};return s.length===0?this:(n.insert=s,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},d.prototype.delete=function(s){return s<=0?this:this.push({delete:s})},d.prototype.retain=function(s,t){if(s<=0)return this;var n={retain:s};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},d.prototype.push=function(s){var t=this.ops.length,n=this.ops[t-1];if(s=g(!0,{},s),typeof n=="object"){if(typeof s.delete=="number"&&typeof n.delete=="number")return this.ops[t-1]={delete:n.delete+s.delete},this;if(typeof n.delete=="number"&&s.insert!=null&&(t-=1,n=this.ops[t-1],typeof n!="object"))return this.ops.unshift(s),this;if(j(s.attributes,n.attributes)){if(typeof s.insert=="string"&&typeof n.insert=="string")return this.ops[t-1]={insert:n.insert+s.insert},typeof s.attributes=="object"&&(this.ops[t-1].attributes=s.attributes),this;if(typeof s.retain=="number"&&typeof n.retain=="number")return this.ops[t-1]={retain:n.retain+s.retain},typeof s.attributes=="object"&&(this.ops[t-1].attributes=s.attributes),this}}return t===this.ops.length?this.ops.push(s):this.ops.splice(t,0,s),this},d.prototype.chop=function(){var s=this.ops[this.ops.length-1];return s&&s.retain&&!s.attributes&&this.ops.pop(),this},d.prototype.filter=function(s){return this.ops.filter(s)},d.prototype.forEach=function(s){this.ops.forEach(s)},d.prototype.map=function(s){return this.ops.map(s)},d.prototype.partition=function(s){var t=[],n=[];return this.forEach(function(o){var l=s(o)?t:n;l.push(o)}),[t,n]},d.prototype.reduce=function(s,t){return this.ops.reduce(s,t)},d.prototype.changeLength=function(){return this.reduce(function(s,t){return t.insert?s+v.length(t):t.delete?s-t.delete:s},0)},d.prototype.length=function(){return this.reduce(function(s,t){return s+v.length(t)},0)},d.prototype.slice=function(s,t){s=s||0,typeof t!="number"&&(t=1/0);for(var n=[],o=v.iterator(this.ops),l=0;l<t&&o.hasNext();){var u;l<s?u=o.next(s-l):(u=o.next(t-l),n.push(u)),l+=v.length(u)}return new d(n)},d.prototype.compose=function(s){var t=v.iterator(this.ops),n=v.iterator(s.ops),o=[],l=n.peek();if(l!=null&&typeof l.retain=="number"&&l.attributes==null){for(var u=l.retain;t.peekType()==="insert"&&t.peekLength()<=u;)u-=t.peekLength(),o.push(t.next());l.retain-u>0&&n.next(l.retain-u)}for(var a=new d(o);t.hasNext()||n.hasNext();)if(n.peekType()==="insert")a.push(n.next());else if(t.peekType()==="delete")a.push(t.next());else{var i=Math.min(t.peekLength(),n.peekLength()),h=t.next(i),r=n.next(i);if(typeof r.retain=="number"){var f={};typeof h.retain=="number"?f.retain=i:f.insert=h.insert;var b=v.attributes.compose(h.attributes,r.attributes,typeof h.retain=="number");if(b&&(f.attributes=b),a.push(f),!n.hasNext()&&j(a.ops[a.ops.length-1],f)){var N=new d(t.rest());return a.concat(N).chop()}}else typeof r.delete=="number"&&typeof h.retain=="number"&&a.push(r)}return a.chop()},d.prototype.concat=function(s){var t=new d(this.ops.slice());return s.ops.length>0&&(t.push(s.ops[0]),t.ops=t.ops.concat(s.ops.slice(1))),t},d.prototype.diff=function(s,t){if(this.ops===s.ops)return new d;var n=[this,s].map(function(i){return i.map(function(h){if(h.insert!=null)return typeof h.insert=="string"?h.insert:m;var r=i===s?"on":"with";throw new Error("diff() called "+r+" non-document")}).join("")}),o=new d,l=A(n[0],n[1],t),u=v.iterator(this.ops),a=v.iterator(s.ops);return l.forEach(function(i){for(var h=i[1].length;h>0;){var r=0;switch(i[0]){case A.INSERT:r=Math.min(a.peekLength(),h),o.push(a.next(r));break;case A.DELETE:r=Math.min(h,u.peekLength()),u.next(r),o.delete(r);break;case A.EQUAL:r=Math.min(u.peekLength(),a.peekLength(),h);var f=u.next(r),b=a.next(r);j(f.insert,b.insert)?o.retain(r,v.attributes.diff(f.attributes,b.attributes)):o.push(b).delete(r);break}h-=r}}),o.chop()},d.prototype.eachLine=function(s,t){t=t||`
`;for(var n=v.iterator(this.ops),o=new d,l=0;n.hasNext();){if(n.peekType()!=="insert")return;var u=n.peek(),a=v.length(u)-n.peekLength(),i=typeof u.insert=="string"?u.insert.indexOf(t,a)-a:-1;if(i<0)o.push(n.next());else if(i>0)o.push(n.next(i));else{if(s(o,n.next(1).attributes||{},l)===!1)return;l+=1,o=new d}}o.length()>0&&s(o,{},l)},d.prototype.transform=function(s,t){if(t=!!t,typeof s=="number")return this.transformPosition(s,t);for(var n=v.iterator(this.ops),o=v.iterator(s.ops),l=new d;n.hasNext()||o.hasNext();)if(n.peekType()==="insert"&&(t||o.peekType()!=="insert"))l.retain(v.length(n.next()));else if(o.peekType()==="insert")l.push(o.next());else{var u=Math.min(n.peekLength(),o.peekLength()),a=n.next(u),i=o.next(u);if(a.delete)continue;i.delete?l.push(i):l.retain(u,v.attributes.transform(a.attributes,i.attributes,t))}return l.chop()},d.prototype.transformPosition=function(s,t){t=!!t;for(var n=v.iterator(this.ops),o=0;n.hasNext()&&o<=s;){var l=n.peekLength(),u=n.peekType();if(n.next(),u==="delete"){s-=Math.min(l,s-o);continue}else u==="insert"&&(o<s||!t)&&(s+=l);o+=l}return s},y.exports=d},function(y,c){var p=Object.prototype.hasOwnProperty,A=Object.prototype.toString,j=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=function(n){return typeof Array.isArray=="function"?Array.isArray(n):A.call(n)==="[object Array]"},m=function(n){if(!n||A.call(n)!=="[object Object]")return!1;var o=p.call(n,"constructor"),l=n.constructor&&n.constructor.prototype&&p.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!o&&!l)return!1;var u;for(u in n);return typeof u>"u"||p.call(n,u)},d=function(n,o){j&&o.name==="__proto__"?j(n,o.name,{enumerable:!0,configurable:!0,value:o.newValue,writable:!0}):n[o.name]=o.newValue},s=function(n,o){if(o==="__proto__")if(p.call(n,o)){if(g)return g(n,o).value}else return;return n[o]};y.exports=function t(){var n,o,l,u,a,i,h=arguments[0],r=1,f=arguments.length,b=!1;for(typeof h=="boolean"&&(b=h,h=arguments[1]||{},r=2),(h==null||typeof h!="object"&&typeof h!="function")&&(h={});r<f;++r)if(n=arguments[r],n!=null)for(o in n)l=s(h,o),u=s(n,o),h!==u&&(b&&u&&(m(u)||(a=v(u)))?(a?(a=!1,i=l&&v(l)?l:[]):i=l&&m(l)?l:{},d(h,{name:o,newValue:t(b,i,u)})):typeof u<"u"&&d(h,{name:o,newValue:u}));return h}},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BlockEmbed=c.bubbleFormats=void 0;var A=function(){function _(O,T){for(var L=0;L<T.length;L++){var M=T[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}return function(O,T,L){return T&&_(O.prototype,T),L&&_(O,L),O}}(),j=function _(O,T,L){O===null&&(O=Function.prototype);var M=Object.getOwnPropertyDescriptor(O,T);if(M===void 0){var q=Object.getPrototypeOf(O);return q===null?void 0:_(q,T,L)}else{if("value"in M)return M.value;var U=M.get;return U===void 0?void 0:U.call(L)}},g=p(3),v=h(g),m=p(2),d=h(m),s=p(0),t=h(s),n=p(16),o=h(n),l=p(6),u=h(l),a=p(7),i=h(a);function h(_){return _&&_.__esModule?_:{default:_}}function r(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}function f(_,O){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:_}function b(_,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);_.prototype=Object.create(O&&O.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(_,O):_.__proto__=O)}var N=1,E=function(_){b(O,_);function O(){return r(this,O),f(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return A(O,[{key:"attach",value:function(){j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new t.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,v.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,M){var q=t.default.query(L,t.default.Scope.BLOCK_ATTRIBUTE);q!=null&&this.attributes.attribute(q,M)}},{key:"formatAt",value:function(L,M,q,U){this.format(q,U)}},{key:"insertAt",value:function(L,M,q){if(typeof M=="string"&&M.endsWith(`
`)){var U=t.default.create(S.blotName);this.parent.insertBefore(U,L===0?this:this.next),U.insertAt(0,M.slice(0,-1))}else j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,L,M,q)}}]),O}(t.default.Embed);E.scope=t.default.Scope.BLOCK_BLOT;var S=function(_){b(O,_);function O(T){r(this,O);var L=f(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,T));return L.cache={},L}return A(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(t.default.Leaf).reduce(function(L,M){return M.length()===0?L:L.insert(M.value(),w(M))},new d.default).insert(`
`,w(this))),this.cache.delta}},{key:"deleteAt",value:function(L,M){j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,L,M),this.cache={}}},{key:"formatAt",value:function(L,M,q,U){M<=0||(t.default.query(q,t.default.Scope.BLOCK)?L+M===this.length()&&this.format(q,U):j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,L,Math.min(M,this.length()-L-1),q,U),this.cache={})}},{key:"insertAt",value:function(L,M,q){if(q!=null)return j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,L,M,q);if(M.length!==0){var U=M.split(`
`),W=U.shift();W.length>0&&(L<this.length()-1||this.children.tail==null?j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),W):this.children.tail.insertAt(this.children.tail.length(),W),this.cache={});var H=this;U.reduce(function(D,P){return H=H.split(D,!0),H.insertAt(0,P),P.length},L+W.length)}}},{key:"insertBefore",value:function(L,M){var q=this.children.head;j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,L,M),q instanceof o.default&&q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+N),this.cache.length}},{key:"moveChildren",value:function(L,M){j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,L,M),this.cache={}}},{key:"optimize",value:function(L){j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M&&(L===0||L>=this.length()-N)){var q=this.clone();return L===0?(this.parent.insertBefore(q,this),this):(this.parent.insertBefore(q,this.next),q)}else{var U=j(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,L,M);return this.cache={},U}}}]),O}(t.default.Block);S.blotName="block",S.tagName="P",S.defaultChild="break",S.allowedChildren=[u.default,t.default.Embed,i.default];function w(_){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _==null||(typeof _.formats=="function"&&(O=(0,v.default)(O,_.formats())),_.parent==null||_.parent.blotName=="scroll"||_.parent.statics.scope!==_.statics.scope)?O:w(_.parent,O)}c.bubbleFormats=w,c.BlockEmbed=E,c.default=S},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.overload=c.expandConfig=void 0;var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},j=function(){function H(D,P){var C=[],I=!0,$=!1,F=void 0;try{for(var R=D[Symbol.iterator](),B;!(I=(B=R.next()).done)&&(C.push(B.value),!(P&&C.length===P));I=!0);}catch(z){$=!0,F=z}finally{try{!I&&R.return&&R.return()}finally{if($)throw F}}return C}return function(D,P){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return H(D,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function H(D,P){for(var C=0;C<P.length;C++){var I=P[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(D,I.key,I)}}return function(D,P,C){return P&&H(D.prototype,P),C&&H(D,C),D}}();p(50);var v=p(2),m=w(v),d=p(14),s=w(d),t=p(8),n=w(t),o=p(9),l=w(o),u=p(0),a=w(u),i=p(15),h=w(i),r=p(3),f=w(r),b=p(10),N=w(b),E=p(34),S=w(E);function w(H){return H&&H.__esModule?H:{default:H}}function _(H,D,P){return D in H?Object.defineProperty(H,D,{value:P,enumerable:!0,configurable:!0,writable:!0}):H[D]=P,H}function O(H,D){if(!(H instanceof D))throw new TypeError("Cannot call a class as a function")}var T=(0,N.default)("quill"),L=function(){g(H,null,[{key:"debug",value:function(P){P===!0&&(P="log"),N.default.level(P)}},{key:"find",value:function(P){return P.__quill||a.default.find(P)}},{key:"import",value:function(P){return this.imports[P]==null&&T.error("Cannot import "+P+". Are you sure it was registered?"),this.imports[P]}},{key:"register",value:function(P,C){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof P!="string"){var F=P.attrName||P.blotName;typeof F=="string"?this.register("formats/"+F,P,C):Object.keys(P).forEach(function(R){I.register(R,P[R],C)})}else this.imports[P]!=null&&!$&&T.warn("Overwriting "+P+" with",C),this.imports[P]=C,(P.startsWith("blots/")||P.startsWith("formats/"))&&C.blotName!=="abstract"?a.default.register(C):P.startsWith("modules")&&typeof C.register=="function"&&C.register()}}]);function H(D){var P=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,H),this.options=M(D,C),this.container=this.options.container,this.container==null)return T.error("Invalid Quill container",D);this.options.debug&&H.debug(this.options.debug);var I=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new n.default,this.scroll=a.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(n.default.events.EDITOR_CHANGE,function(F){F===n.default.events.TEXT_CHANGE&&P.root.classList.toggle("ql-blank",P.editor.isBlank())}),this.emitter.on(n.default.events.SCROLL_UPDATE,function(F,R){var B=P.selection.lastRange,z=B&&B.length===0?B.index:void 0;q.call(P,function(){return P.editor.update(null,R,z)},F)});var $=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+I+"<p><br></p></div>");this.setContents($),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return g(H,[{key:"addContainer",value:function(P){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof P=="string"){var I=P;P=document.createElement("div"),P.classList.add(I)}return this.container.insertBefore(P,C),P}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(P,C,I){var $=this,F=U(P,C,I),R=j(F,4);return P=R[0],C=R[1],I=R[3],q.call(this,function(){return $.editor.deleteText(P,C)},I,P,-1*C)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(P),this.container.classList.toggle("ql-disabled",!P)}},{key:"focus",value:function(){var P=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=P,this.scrollIntoView()}},{key:"format",value:function(P,C){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n.default.sources.API;return q.call(this,function(){var F=I.getSelection(!0),R=new m.default;if(F==null)return R;if(a.default.query(P,a.default.Scope.BLOCK))R=I.editor.formatLine(F.index,F.length,_({},P,C));else{if(F.length===0)return I.selection.format(P,C),R;R=I.editor.formatText(F.index,F.length,_({},P,C))}return I.setSelection(F,n.default.sources.SILENT),R},$)}},{key:"formatLine",value:function(P,C,I,$,F){var R=this,B=void 0,z=U(P,C,I,$,F),V=j(z,4);return P=V[0],C=V[1],B=V[2],F=V[3],q.call(this,function(){return R.editor.formatLine(P,C,B)},F,P,0)}},{key:"formatText",value:function(P,C,I,$,F){var R=this,B=void 0,z=U(P,C,I,$,F),V=j(z,4);return P=V[0],C=V[1],B=V[2],F=V[3],q.call(this,function(){return R.editor.formatText(P,C,B)},F,P,0)}},{key:"getBounds",value:function(P){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=void 0;typeof P=="number"?I=this.selection.getBounds(P,C):I=this.selection.getBounds(P.index,P.length);var $=this.container.getBoundingClientRect();return{bottom:I.bottom-$.top,height:I.height,left:I.left-$.left,right:I.right-$.left,top:I.top-$.top,width:I.width}}},{key:"getContents",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,I=U(P,C),$=j(I,2);return P=$[0],C=$[1],this.editor.getContents(P,C)}},{key:"getFormat",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof P=="number"?this.editor.getFormat(P,C):this.editor.getFormat(P.index,P.length)}},{key:"getIndex",value:function(P){return P.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(P){return this.scroll.leaf(P)}},{key:"getLine",value:function(P){return this.scroll.line(P)}},{key:"getLines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof P!="number"?this.scroll.lines(P.index,P.length):this.scroll.lines(P,C)}},{key:"getModule",value:function(P){return this.theme.modules[P]}},{key:"getSelection",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return P&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,I=U(P,C),$=j(I,2);return P=$[0],C=$[1],this.editor.getText(P,C)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(P,C,I){var $=this,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:H.sources.API;return q.call(this,function(){return $.editor.insertEmbed(P,C,I)},F,P)}},{key:"insertText",value:function(P,C,I,$,F){var R=this,B=void 0,z=U(P,0,I,$,F),V=j(z,4);return P=V[0],B=V[2],F=V[3],q.call(this,function(){return R.editor.insertText(P,C,B)},F,P,C.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(P,C,I){this.clipboard.dangerouslyPasteHTML(P,C,I)}},{key:"removeFormat",value:function(P,C,I){var $=this,F=U(P,C,I),R=j(F,4);return P=R[0],C=R[1],I=R[3],q.call(this,function(){return $.editor.removeFormat(P,C)},I,P)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(P){var C=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.default.sources.API;return q.call(this,function(){P=new m.default(P);var $=C.getLength(),F=C.editor.deleteText(0,$),R=C.editor.applyDelta(P),B=R.ops[R.ops.length-1];B!=null&&typeof B.insert=="string"&&B.insert[B.insert.length-1]===`
`&&(C.editor.deleteText(C.getLength()-1,1),R.delete(1));var z=F.compose(R);return z},I)}},{key:"setSelection",value:function(P,C,I){if(P==null)this.selection.setRange(null,C||H.sources.API);else{var $=U(P,C,I),F=j($,4);P=F[0],C=F[1],I=F[3],this.selection.setRange(new i.Range(P,C),I),I!==n.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(P){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.default.sources.API,I=new m.default().insert(P);return this.setContents(I,C)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.default.sources.USER,C=this.scroll.update(P);return this.selection.update(P),C}},{key:"updateContents",value:function(P){var C=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.default.sources.API;return q.call(this,function(){return P=new m.default(P),C.editor.applyDelta(P,I)},I,!0)}}]),H}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=n.default.events,L.sources=n.default.sources,L.version="1.3.7",L.imports={delta:m.default,parchment:a.default,"core/module":l.default,"core/theme":S.default};function M(H,D){if(D=(0,f.default)(!0,{container:H,modules:{clipboard:!0,keyboard:!0,history:!0}},D),!D.theme||D.theme===L.DEFAULTS.theme)D.theme=S.default;else if(D.theme=L.import("themes/"+D.theme),D.theme==null)throw new Error("Invalid theme "+D.theme+". Did you register it?");var P=(0,f.default)(!0,{},D.theme.DEFAULTS);[P,D].forEach(function($){$.modules=$.modules||{},Object.keys($.modules).forEach(function(F){$.modules[F]===!0&&($.modules[F]={})})});var C=Object.keys(P.modules).concat(Object.keys(D.modules)),I=C.reduce(function($,F){var R=L.import("modules/"+F);return R==null?T.error("Cannot load "+F+" module. Are you sure you registered it?"):$[F]=R.DEFAULTS||{},$},{});return D.modules!=null&&D.modules.toolbar&&D.modules.toolbar.constructor!==Object&&(D.modules.toolbar={container:D.modules.toolbar}),D=(0,f.default)(!0,{},L.DEFAULTS,{modules:I},P,D),["bounds","container","scrollingContainer"].forEach(function($){typeof D[$]=="string"&&(D[$]=document.querySelector(D[$]))}),D.modules=Object.keys(D.modules).reduce(function($,F){return D.modules[F]&&($[F]=D.modules[F]),$},{}),D}function q(H,D,P,C){if(this.options.strict&&!this.isEnabled()&&D===n.default.sources.USER)return new m.default;var I=P==null?null:this.getSelection(),$=this.editor.delta,F=H();if(I!=null&&(P===!0&&(P=I.index),C==null?I=W(I,F,D):C!==0&&(I=W(I,P,C,D)),this.setSelection(I,n.default.sources.SILENT)),F.length()>0){var R,B=[n.default.events.TEXT_CHANGE,F,$,D];if((R=this.emitter).emit.apply(R,[n.default.events.EDITOR_CHANGE].concat(B)),D!==n.default.sources.SILENT){var z;(z=this.emitter).emit.apply(z,B)}}return F}function U(H,D,P,C,I){var $={};return typeof H.index=="number"&&typeof H.length=="number"?typeof D!="number"?(I=C,C=P,P=D,D=H.length,H=H.index):(D=H.length,H=H.index):typeof D!="number"&&(I=C,C=P,P=D,D=0),(typeof P>"u"?"undefined":A(P))==="object"?($=P,I=C):typeof P=="string"&&(C!=null?$[P]=C:I=P),I=I||n.default.sources.API,[H,D,$,I]}function W(H,D,P,C){if(H==null)return null;var I=void 0,$=void 0;if(D instanceof m.default){var F=[H.index,H.index+H.length].map(function(V){return D.transformPosition(V,C!==n.default.sources.USER)}),R=j(F,2);I=R[0],$=R[1]}else{var B=[H.index,H.index+H.length].map(function(V){return V<D||V===D&&C===n.default.sources.USER?V:P>=0?V+P:Math.max(D,V+P)}),z=j(B,2);I=z[0],$=z[1]}return new i.Range(I,$-I)}c.expandConfig=M,c.overload=U,c.default=L},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function u(a,i){for(var h=0;h<i.length;h++){var r=i[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,i,h){return i&&u(a.prototype,i),h&&u(a,h),a}}(),j=function u(a,i,h){a===null&&(a=Function.prototype);var r=Object.getOwnPropertyDescriptor(a,i);if(r===void 0){var f=Object.getPrototypeOf(a);return f===null?void 0:u(f,i,h)}else{if("value"in r)return r.value;var b=r.get;return b===void 0?void 0:b.call(h)}},g=p(7),v=s(g),m=p(0),d=s(m);function s(u){return u&&u.__esModule?u:{default:u}}function t(u,a){if(!(u instanceof a))throw new TypeError("Cannot call a class as a function")}function n(u,a){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:u}function o(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);u.prototype=Object.create(a&&a.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(u,a):u.__proto__=a)}var l=function(u){o(a,u);function a(){return t(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return A(a,[{key:"formatAt",value:function(h,r,f,b){if(a.compare(this.statics.blotName,f)<0&&d.default.query(f,d.default.Scope.BLOT)){var N=this.isolate(h,r);b&&N.wrap(f,b)}else j(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"formatAt",this).call(this,h,r,f,b)}},{key:"optimize",value:function(h){if(j(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"optimize",this).call(this,h),this.parent instanceof a&&a.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(h,r){var f=a.order.indexOf(h),b=a.order.indexOf(r);return f>=0||b>=0?f-b:h===r?0:h<r?-1:1}}]),a}(d.default.Inline);l.allowedChildren=[l,d.default.Embed,v.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],c.default=l},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(0),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}function v(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function d(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){d(n,t);function n(){return v(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(j.default.Text);c.default=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function i(h,r){for(var f=0;f<r.length;f++){var b=r[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,r,f){return r&&i(h.prototype,r),f&&i(h,f),h}}(),j=function i(h,r,f){h===null&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,r);if(b===void 0){var N=Object.getPrototypeOf(h);return N===null?void 0:i(N,r,f)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(f)}},g=p(54),v=s(g),m=p(10),d=s(m);function s(i){return i&&i.__esModule?i:{default:i}}function t(i,h){if(!(i instanceof h))throw new TypeError("Cannot call a class as a function")}function n(i,h){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:i}function o(i,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);i.prototype=Object.create(h&&h.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(i,h):i.__proto__=h)}var l=(0,d.default)("quill:events"),u=["selectionchange","mousedown","mouseup","click"];u.forEach(function(i){document.addEventListener(i,function(){for(var h=arguments.length,r=Array(h),f=0;f<h;f++)r[f]=arguments[f];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(b){if(b.__quill&&b.__quill.emitter){var N;(N=b.__quill.emitter).handleDOM.apply(N,r)}})})});var a=function(i){o(h,i);function h(){t(this,h);var r=n(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return r.listeners={},r.on("error",l.error),r}return A(h,[{key:"emit",value:function(){l.log.apply(l,arguments),j(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(f){for(var b=arguments.length,N=Array(b>1?b-1:0),E=1;E<b;E++)N[E-1]=arguments[E];(this.listeners[f.type]||[]).forEach(function(S){var w=S.node,_=S.handler;(f.target===w||w.contains(f.target))&&_.apply(void 0,[f].concat(N))})}},{key:"listenDOM",value:function(f,b,N){this.listeners[f]||(this.listeners[f]=[]),this.listeners[f].push({node:b,handler:N})}}]),h}(v.default);a.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},a.sources={API:"api",SILENT:"silent",USER:"user"},c.default=a},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});function A(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}var j=function g(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A(this,g),this.quill=v,this.options=m};j.DEFAULTS={},c.default=j},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=["error","warn","log","info"],j="warn";function g(m){if(A.indexOf(m)<=A.indexOf(j)){for(var d,s=arguments.length,t=Array(s>1?s-1:0),n=1;n<s;n++)t[n-1]=arguments[n];(d=console)[m].apply(d,t)}}function v(m){return A.reduce(function(d,s){return d[s]=g.bind(console,s,m),d},{})}g.level=v.level=function(m){j=m},c.default=v},function(y,c,p){var A=Array.prototype.slice,j=p(52),g=p(53),v=y.exports=function(t,n,o){return o||(o={}),t===n?!0:t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!t||!n||typeof t!="object"&&typeof n!="object"?o.strict?t===n:t==n:s(t,n,o)};function m(t){return t==null}function d(t){return!(!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number")}function s(t,n,o){var l,u;if(m(t)||m(n)||t.prototype!==n.prototype)return!1;if(g(t))return g(n)?(t=A.call(t),n=A.call(n),v(t,n,o)):!1;if(d(t)){if(!d(n)||t.length!==n.length)return!1;for(l=0;l<t.length;l++)if(t[l]!==n[l])return!1;return!0}try{var a=j(t),i=j(n)}catch{return!1}if(a.length!=i.length)return!1;for(a.sort(),i.sort(),l=a.length-1;l>=0;l--)if(a[l]!=i[l])return!1;for(l=a.length-1;l>=0;l--)if(u=a[l],!v(t[u],n[u],o))return!1;return typeof t==typeof n}},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(1),j=function(){function g(v,m,d){d===void 0&&(d={}),this.attrName=v,this.keyName=m;var s=A.Scope.TYPE&A.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&A.Scope.LEVEL|s:this.scope=A.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return g.keys=function(v){return[].map.call(v.attributes,function(m){return m.name})},g.prototype.add=function(v,m){return this.canAdd(v,m)?(v.setAttribute(this.keyName,m),!0):!1},g.prototype.canAdd=function(v,m){var d=A.query(v,A.Scope.BLOT&(this.scope|A.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof m=="string"?this.whitelist.indexOf(m.replace(/["']/g,""))>-1:this.whitelist.indexOf(m)>-1},g.prototype.remove=function(v){v.removeAttribute(this.keyName)},g.prototype.value=function(v){var m=v.getAttribute(this.keyName);return this.canAdd(v,m)&&m?m:""},g}();c.default=j},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.Code=void 0;var A=function(){function E(S,w){var _=[],O=!0,T=!1,L=void 0;try{for(var M=S[Symbol.iterator](),q;!(O=(q=M.next()).done)&&(_.push(q.value),!(w&&_.length===w));O=!0);}catch(U){T=!0,L=U}finally{try{!O&&M.return&&M.return()}finally{if(T)throw L}}return _}return function(S,w){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return E(S,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function E(S,w){for(var _=0;_<w.length;_++){var O=w[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,w,_){return w&&E(S.prototype,w),_&&E(S,_),S}}(),g=function E(S,w,_){S===null&&(S=Function.prototype);var O=Object.getOwnPropertyDescriptor(S,w);if(O===void 0){var T=Object.getPrototypeOf(S);return T===null?void 0:E(T,w,_)}else{if("value"in O)return O.value;var L=O.get;return L===void 0?void 0:L.call(_)}},v=p(2),m=i(v),d=p(0),s=i(d),t=p(4),n=i(t),o=p(6),l=i(o),u=p(7),a=i(u);function i(E){return E&&E.__esModule?E:{default:E}}function h(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function r(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function f(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var b=function(E){f(S,E);function S(){return h(this,S),r(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(l.default);b.blotName="code",b.tagName="CODE";var N=function(E){f(S,E);function S(){return h(this,S),r(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return j(S,[{key:"delta",value:function(){var _=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(T,L){return T.insert(L).insert(`
`,_.formats())},new m.default)}},{key:"format",value:function(_,O){if(!(_===this.statics.blotName&&O)){var T=this.descendant(a.default,this.length()-1),L=A(T,1),M=L[0];M!=null&&M.deleteAt(M.length()-1,1),g(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,_,O)}}},{key:"formatAt",value:function(_,O,T,L){if(O!==0&&!(s.default.query(T,s.default.Scope.BLOCK)==null||T===this.statics.blotName&&L===this.statics.formats(this.domNode))){var M=this.newlineIndex(_);if(!(M<0||M>=_+O)){var q=this.newlineIndex(_,!0)+1,U=M-q+1,W=this.isolate(q,U),H=W.next;W.format(T,L),H instanceof S&&H.formatAt(0,_-q+O-U,T,L)}}}},{key:"insertAt",value:function(_,O,T){if(T==null){var L=this.descendant(a.default,_),M=A(L,2),q=M[0],U=M[1];q.insertAt(U,O)}}},{key:"length",value:function(){var _=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?_:_+1}},{key:"newlineIndex",value:function(_){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,_).lastIndexOf(`
`);var T=this.domNode.textContent.slice(_).indexOf(`
`);return T>-1?_+T:-1}},{key:"optimize",value:function(_){this.domNode.textContent.endsWith(`
`)||this.appendChild(s.default.create("text",`
`)),g(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,_);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(_),O.moveChildren(this),O.remove())}},{key:"replace",value:function(_){g(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,_),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var T=s.default.find(O);T==null?O.parentNode.removeChild(O):T instanceof s.default.Embed?T.remove():T.unwrap()})}}],[{key:"create",value:function(_){var O=g(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,_);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),S}(n.default);N.blotName="code-block",N.tagName="PRE",N.TAB="  ",c.Code=b,c.default=N},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},j=function(){function H(D,P){var C=[],I=!0,$=!1,F=void 0;try{for(var R=D[Symbol.iterator](),B;!(I=(B=R.next()).done)&&(C.push(B.value),!(P&&C.length===P));I=!0);}catch(z){$=!0,F=z}finally{try{!I&&R.return&&R.return()}finally{if($)throw F}}return C}return function(D,P){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return H(D,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function H(D,P){for(var C=0;C<P.length;C++){var I=P[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(D,I.key,I)}}return function(D,P,C){return P&&H(D.prototype,P),C&&H(D,C),D}}(),v=p(2),m=O(v),d=p(20),s=O(d),t=p(0),n=O(t),o=p(13),l=O(o),u=p(24),a=O(u),i=p(4),h=O(i),r=p(16),f=O(r),b=p(21),N=O(b),E=p(11),S=O(E),w=p(3),_=O(w);function O(H){return H&&H.__esModule?H:{default:H}}function T(H,D,P){return D in H?Object.defineProperty(H,D,{value:P,enumerable:!0,configurable:!0,writable:!0}):H[D]=P,H}function L(H,D){if(!(H instanceof D))throw new TypeError("Cannot call a class as a function")}var M=/^[ -~]*$/,q=function(){function H(D){L(this,H),this.scroll=D,this.delta=this.getDelta()}return g(H,[{key:"applyDelta",value:function(P){var C=this,I=!1;this.scroll.update();var $=this.scroll.length();return this.scroll.batchStart(),P=W(P),P.reduce(function(F,R){var B=R.retain||R.delete||R.insert.length||1,z=R.attributes||{};if(R.insert!=null){if(typeof R.insert=="string"){var V=R.insert;V.endsWith(`
`)&&I&&(I=!1,V=V.slice(0,-1)),F>=$&&!V.endsWith(`
`)&&(I=!0),C.scroll.insertAt(F,V);var Y=C.scroll.line(F),te=j(Y,2),ie=te[0],oe=te[1],he=(0,_.default)({},(0,i.bubbleFormats)(ie));if(ie instanceof h.default){var pe=ie.descendant(n.default.Leaf,oe),Ae=j(pe,1),xe=Ae[0];he=(0,_.default)(he,(0,i.bubbleFormats)(xe))}z=s.default.attributes.diff(he,z)||{}}else if(A(R.insert)==="object"){var K=Object.keys(R.insert)[0];if(K==null)return F;C.scroll.insertAt(F,K,R.insert[K])}$+=B}return Object.keys(z).forEach(function(X){C.scroll.formatAt(F,B,X,z[X])}),F+B},0),P.reduce(function(F,R){return typeof R.delete=="number"?(C.scroll.deleteAt(F,R.delete),F):F+(R.retain||R.insert.length||1)},0),this.scroll.batchEnd(),this.update(P)}},{key:"deleteText",value:function(P,C){return this.scroll.deleteAt(P,C),this.update(new m.default().retain(P).delete(C))}},{key:"formatLine",value:function(P,C){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys($).forEach(function(F){if(!(I.scroll.whitelist!=null&&!I.scroll.whitelist[F])){var R=I.scroll.lines(P,Math.max(C,1)),B=C;R.forEach(function(z){var V=z.length();if(!(z instanceof l.default))z.format(F,$[F]);else{var Y=P-z.offset(I.scroll),te=z.newlineIndex(Y+B)-Y+1;z.formatAt(Y,te,F,$[F])}B-=V})}}),this.scroll.optimize(),this.update(new m.default().retain(P).retain(C,(0,N.default)($)))}},{key:"formatText",value:function(P,C){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys($).forEach(function(F){I.scroll.formatAt(P,C,F,$[F])}),this.update(new m.default().retain(P).retain(C,(0,N.default)($)))}},{key:"getContents",value:function(P,C){return this.delta.slice(P,P+C)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(P,C){return P.concat(C.delta())},new m.default)}},{key:"getFormat",value:function(P){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=[],$=[];C===0?this.scroll.path(P).forEach(function(R){var B=j(R,1),z=B[0];z instanceof h.default?I.push(z):z instanceof n.default.Leaf&&$.push(z)}):(I=this.scroll.lines(P,C),$=this.scroll.descendants(n.default.Leaf,P,C));var F=[I,$].map(function(R){if(R.length===0)return{};for(var B=(0,i.bubbleFormats)(R.shift());Object.keys(B).length>0;){var z=R.shift();if(z==null)return B;B=U((0,i.bubbleFormats)(z),B)}return B});return _.default.apply(_.default,F)}},{key:"getText",value:function(P,C){return this.getContents(P,C).filter(function(I){return typeof I.insert=="string"}).map(function(I){return I.insert}).join("")}},{key:"insertEmbed",value:function(P,C,I){return this.scroll.insertAt(P,C,I),this.update(new m.default().retain(P).insert(T({},C,I)))}},{key:"insertText",value:function(P,C){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return C=C.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(P,C),Object.keys($).forEach(function(F){I.scroll.formatAt(P,C.length,F,$[F])}),this.update(new m.default().retain(P).insert(C,(0,N.default)($)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var P=this.scroll.children.head;return P.statics.blotName!==h.default.blotName||P.children.length>1?!1:P.children.head instanceof f.default}},{key:"removeFormat",value:function(P,C){var I=this.getText(P,C),$=this.scroll.line(P+C),F=j($,2),R=F[0],B=F[1],z=0,V=new m.default;R!=null&&(R instanceof l.default?z=R.newlineIndex(B)-B+1:z=R.length()-B,V=R.delta().slice(B,B+z-1).insert(`
`));var Y=this.getContents(P,C+z),te=Y.diff(new m.default().insert(I).concat(V)),ie=new m.default().retain(P).concat(te);return this.applyDelta(ie)}},{key:"update",value:function(P){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,$=this.delta;if(C.length===1&&C[0].type==="characterData"&&C[0].target.data.match(M)&&n.default.find(C[0].target)){var F=n.default.find(C[0].target),R=(0,i.bubbleFormats)(F),B=F.offset(this.scroll),z=C[0].oldValue.replace(a.default.CONTENTS,""),V=new m.default().insert(z),Y=new m.default().insert(F.value()),te=new m.default().retain(B).concat(V.diff(Y,I));P=te.reduce(function(ie,oe){return oe.insert?ie.insert(oe.insert,R):ie.push(oe)},new m.default),this.delta=$.compose(P)}else this.delta=this.getDelta(),(!P||!(0,S.default)($.compose(P),this.delta))&&(P=$.diff(this.delta,I));return P}}]),H}();function U(H,D){return Object.keys(D).reduce(function(P,C){return H[C]==null||(D[C]===H[C]?P[C]=D[C]:Array.isArray(D[C])?D[C].indexOf(H[C])<0&&(P[C]=D[C].concat([H[C]])):P[C]=[D[C],H[C]]),P},{})}function W(H){return H.reduce(function(D,P){if(P.insert===1){var C=(0,N.default)(P.attributes);return delete C.image,D.insert({image:P.attributes.image},C)}if(P.attributes!=null&&(P.attributes.list===!0||P.attributes.bullet===!0)&&(P=(0,N.default)(P),P.attributes.list?P.attributes.list="ordered":(P.attributes.list="bullet",delete P.attributes.bullet)),typeof P.insert=="string"){var I=P.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return D.insert(I,P.attributes)}return D.push(P)},new m.default)}c.default=q},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.Range=void 0;var A=function(){function E(S,w){var _=[],O=!0,T=!1,L=void 0;try{for(var M=S[Symbol.iterator](),q;!(O=(q=M.next()).done)&&(_.push(q.value),!(w&&_.length===w));O=!0);}catch(U){T=!0,L=U}finally{try{!O&&M.return&&M.return()}finally{if(T)throw L}}return _}return function(S,w){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return E(S,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function E(S,w){for(var _=0;_<w.length;_++){var O=w[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,w,_){return w&&E(S.prototype,w),_&&E(S,_),S}}(),g=p(0),v=a(g),m=p(21),d=a(m),s=p(11),t=a(s),n=p(8),o=a(n),l=p(10),u=a(l);function a(E){return E&&E.__esModule?E:{default:E}}function i(E){if(Array.isArray(E)){for(var S=0,w=Array(E.length);S<E.length;S++)w[S]=E[S];return w}else return Array.from(E)}function h(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}var r=(0,u.default)("quill:selection"),f=function E(S){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;h(this,E),this.index=S,this.length=w},b=function(){function E(S,w){var _=this;h(this,E),this.emitter=w,this.scroll=S,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=v.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){_.mouseDown||setTimeout(_.update.bind(_,o.default.sources.USER),1)}),this.emitter.on(o.default.events.EDITOR_CHANGE,function(O,T){O===o.default.events.TEXT_CHANGE&&T.length()>0&&_.update(o.default.sources.SILENT)}),this.emitter.on(o.default.events.SCROLL_BEFORE_UPDATE,function(){if(_.hasFocus()){var O=_.getNativeRange();O!=null&&O.start.node!==_.cursor.textNode&&_.emitter.once(o.default.events.SCROLL_UPDATE,function(){try{_.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(o.default.events.SCROLL_OPTIMIZE,function(O,T){if(T.range){var L=T.range,M=L.startNode,q=L.startOffset,U=L.endNode,W=L.endOffset;_.setNativeRange(M,q,U,W)}}),this.update(o.default.sources.SILENT)}return j(E,[{key:"handleComposition",value:function(){var w=this;this.root.addEventListener("compositionstart",function(){w.composing=!0}),this.root.addEventListener("compositionend",function(){if(w.composing=!1,w.cursor.parent){var _=w.cursor.restore();if(!_)return;setTimeout(function(){w.setNativeRange(_.startNode,_.startOffset,_.endNode,_.endOffset)},1)}})}},{key:"handleDragging",value:function(){var w=this;this.emitter.listenDOM("mousedown",document.body,function(){w.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){w.mouseDown=!1,w.update(o.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(w,_){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[w])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||v.default.query(w,v.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var T=v.default.find(O.start.node,!1);if(T==null)return;if(T instanceof v.default.Leaf){var L=T.split(O.start.offset);T.parent.insertBefore(this.cursor,L)}else T.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(w,_),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(w){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();w=Math.min(w,O-1),_=Math.min(w+_,O-1)-w;var T=void 0,L=this.scroll.leaf(w),M=A(L,2),q=M[0],U=M[1];if(q==null)return null;var W=q.position(U,!0),H=A(W,2);T=H[0],U=H[1];var D=document.createRange();if(_>0){D.setStart(T,U);var P=this.scroll.leaf(w+_),C=A(P,2);if(q=C[0],U=C[1],q==null)return null;var I=q.position(U,!0),$=A(I,2);return T=$[0],U=$[1],D.setEnd(T,U),D.getBoundingClientRect()}else{var F="left",R=void 0;return T instanceof Text?(U<T.data.length?(D.setStart(T,U),D.setEnd(T,U+1)):(D.setStart(T,U-1),D.setEnd(T,U),F="right"),R=D.getBoundingClientRect()):(R=q.domNode.getBoundingClientRect(),U>0&&(F="right")),{bottom:R.top+R.height,height:R.height,left:R[F],right:R[F],top:R.top,width:0}}}},{key:"getNativeRange",value:function(){var w=document.getSelection();if(w==null||w.rangeCount<=0)return null;var _=w.getRangeAt(0);if(_==null)return null;var O=this.normalizeNative(_);return r.info("getNativeRange",O),O}},{key:"getRange",value:function(){var w=this.getNativeRange();if(w==null)return[null,null];var _=this.normalizedToRange(w);return[_,w]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(w){var _=this,O=[[w.start.node,w.start.offset]];w.native.collapsed||O.push([w.end.node,w.end.offset]);var T=O.map(function(q){var U=A(q,2),W=U[0],H=U[1],D=v.default.find(W,!0),P=D.offset(_.scroll);return H===0?P:D instanceof v.default.Container?P+D.length():P+D.index(W,H)}),L=Math.min(Math.max.apply(Math,i(T)),this.scroll.length()-1),M=Math.min.apply(Math,[L].concat(i(T)));return new f(M,L-M)}},{key:"normalizeNative",value:function(w){if(!N(this.root,w.startContainer)||!w.collapsed&&!N(this.root,w.endContainer))return null;var _={start:{node:w.startContainer,offset:w.startOffset},end:{node:w.endContainer,offset:w.endOffset},native:w};return[_.start,_.end].forEach(function(O){for(var T=O.node,L=O.offset;!(T instanceof Text)&&T.childNodes.length>0;)if(T.childNodes.length>L)T=T.childNodes[L],L=0;else if(T.childNodes.length===L)T=T.lastChild,L=T instanceof Text?T.data.length:T.childNodes.length+1;else break;O.node=T,O.offset=L}),_}},{key:"rangeToNative",value:function(w){var _=this,O=w.collapsed?[w.index]:[w.index,w.index+w.length],T=[],L=this.scroll.length();return O.forEach(function(M,q){M=Math.min(L-1,M);var U=void 0,W=_.scroll.leaf(M),H=A(W,2),D=H[0],P=H[1],C=D.position(P,q!==0),I=A(C,2);U=I[0],P=I[1],T.push(U,P)}),T.length<2&&(T=T.concat(T)),T}},{key:"scrollIntoView",value:function(w){var _=this.lastRange;if(_!=null){var O=this.getBounds(_.index,_.length);if(O!=null){var T=this.scroll.length()-1,L=this.scroll.line(Math.min(_.index,T)),M=A(L,1),q=M[0],U=q;if(_.length>0){var W=this.scroll.line(Math.min(_.index+_.length,T)),H=A(W,1);U=H[0]}if(!(q==null||U==null)){var D=w.getBoundingClientRect();O.top<D.top?w.scrollTop-=D.top-O.top:O.bottom>D.bottom&&(w.scrollTop+=O.bottom-D.bottom)}}}}},{key:"setNativeRange",value:function(w,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r.info("setNativeRange",w,_,O,T),!(w!=null&&(this.root.parentNode==null||w.parentNode==null||O.parentNode==null))){var M=document.getSelection();if(M!=null)if(w!=null){this.hasFocus()||this.root.focus();var q=(this.getNativeRange()||{}).native;if(q==null||L||w!==q.startContainer||_!==q.startOffset||O!==q.endContainer||T!==q.endOffset){w.tagName=="BR"&&(_=[].indexOf.call(w.parentNode.childNodes,w),w=w.parentNode),O.tagName=="BR"&&(T=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var U=document.createRange();U.setStart(w,_),U.setEnd(O,T),M.removeAllRanges(),M.addRange(U)}}else M.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(w){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.default.sources.API;if(typeof _=="string"&&(O=_,_=!1),r.info("setRange",w),w!=null){var T=this.rangeToNative(w);this.setNativeRange.apply(this,i(T).concat([_]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.default.sources.USER,_=this.lastRange,O=this.getRange(),T=A(O,2),L=T[0],M=T[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,t.default)(_,this.lastRange)){var q;!this.composing&&M!=null&&M.native.collapsed&&M.start.node!==this.cursor.textNode&&this.cursor.restore();var U=[o.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(_),w];if((q=this.emitter).emit.apply(q,[o.default.events.EDITOR_CHANGE].concat(U)),w!==o.default.sources.SILENT){var W;(W=this.emitter).emit.apply(W,U)}}}}]),E}();function N(E,S){try{S.parentNode}catch{return!1}return S instanceof Text&&(S=S.parentNode),E.contains(S)}c.Range=f,c.default=b},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function o(l,u){for(var a=0;a<u.length;a++){var i=u[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}return function(l,u,a){return u&&o(l.prototype,u),a&&o(l,a),l}}(),j=function o(l,u,a){l===null&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(i===void 0){var h=Object.getPrototypeOf(l);return h===null?void 0:o(h,u,a)}else{if("value"in i)return i.value;var r=i.get;return r===void 0?void 0:r.call(a)}},g=p(0),v=m(g);function m(o){return o&&o.__esModule?o:{default:o}}function d(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function s(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=function(o){t(l,o);function l(){return d(this,l),s(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return A(l,[{key:"insertInto",value:function(a,i){a.children.length===0?j(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"insertInto",this).call(this,a,i):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),l}(v.default.Embed);n.blotName="break",n.tagName="BR",c.default=n},function(y,c,p){var A=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(t,n){s(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(44),g=p(30),v=p(1),m=function(s){A(t,s);function t(n){var o=s.call(this,n)||this;return o.build(),o}return t.prototype.appendChild=function(n){this.insertBefore(n)},t.prototype.attach=function(){s.prototype.attach.call(this),this.children.forEach(function(n){n.attach()})},t.prototype.build=function(){var n=this;this.children=new j.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(o){try{var l=d(o);n.insertBefore(l,n.children.head||void 0)}catch(u){if(u instanceof v.ParchmentError)return;throw u}})},t.prototype.deleteAt=function(n,o){if(n===0&&o===this.length())return this.remove();this.children.forEachAt(n,o,function(l,u,a){l.deleteAt(u,a)})},t.prototype.descendant=function(n,o){var l=this.children.find(o),u=l[0],a=l[1];return n.blotName==null&&n(u)||n.blotName!=null&&u instanceof n?[u,a]:u instanceof t?u.descendant(n,a):[null,-1]},t.prototype.descendants=function(n,o,l){o===void 0&&(o=0),l===void 0&&(l=Number.MAX_VALUE);var u=[],a=l;return this.children.forEachAt(o,l,function(i,h,r){(n.blotName==null&&n(i)||n.blotName!=null&&i instanceof n)&&u.push(i),i instanceof t&&(u=u.concat(i.descendants(n,h,a))),a-=r}),u},t.prototype.detach=function(){this.children.forEach(function(n){n.detach()}),s.prototype.detach.call(this)},t.prototype.formatAt=function(n,o,l,u){this.children.forEachAt(n,o,function(a,i,h){a.formatAt(i,h,l,u)})},t.prototype.insertAt=function(n,o,l){var u=this.children.find(n),a=u[0],i=u[1];if(a)a.insertAt(i,o,l);else{var h=l==null?v.create("text",o):v.create(o,l);this.appendChild(h)}},t.prototype.insertBefore=function(n,o){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(l){return n instanceof l}))throw new v.ParchmentError("Cannot insert "+n.statics.blotName+" into "+this.statics.blotName);n.insertInto(this,o)},t.prototype.length=function(){return this.children.reduce(function(n,o){return n+o.length()},0)},t.prototype.moveChildren=function(n,o){this.children.forEach(function(l){n.insertBefore(l,o)})},t.prototype.optimize=function(n){if(s.prototype.optimize.call(this,n),this.children.length===0)if(this.statics.defaultChild!=null){var o=v.create(this.statics.defaultChild);this.appendChild(o),o.optimize(n)}else this.remove()},t.prototype.path=function(n,o){o===void 0&&(o=!1);var l=this.children.find(n,o),u=l[0],a=l[1],i=[[this,n]];return u instanceof t?i.concat(u.path(a,o)):(u!=null&&i.push([u,a]),i)},t.prototype.removeChild=function(n){this.children.remove(n)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),s.prototype.replace.call(this,n)},t.prototype.split=function(n,o){if(o===void 0&&(o=!1),!o){if(n===0)return this;if(n===this.length())return this.next}var l=this.clone();return this.parent.insertBefore(l,this.next),this.children.forEachAt(n,this.length(),function(u,a,i){u=u.split(a,o),l.appendChild(u)}),l},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(n,o){var l=this,u=[],a=[];n.forEach(function(i){i.target===l.domNode&&i.type==="childList"&&(u.push.apply(u,i.addedNodes),a.push.apply(a,i.removedNodes))}),a.forEach(function(i){if(!(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var h=v.find(i);h!=null&&(h.domNode.parentNode==null||h.domNode.parentNode===l.domNode)&&h.detach()}}),u.filter(function(i){return i.parentNode==l.domNode}).sort(function(i,h){return i===h?0:i.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(i){var h=null;i.nextSibling!=null&&(h=v.find(i.nextSibling));var r=d(i);(r.next!=h||r.next==null)&&(r.parent!=null&&r.parent.removeChild(l),l.insertBefore(r,h||void 0))})},t}(g.default);function d(s){var t=v.find(s);if(t==null)try{t=v.create(s)}catch{t=v.create(v.Scope.INLINE),[].slice.call(s.childNodes).forEach(function(o){t.domNode.appendChild(o)}),s.parentNode&&s.parentNode.replaceChild(t.domNode,s),t.attach()}return t}c.default=m},function(y,c,p){var A=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(t,n){s(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(12),g=p(31),v=p(17),m=p(1),d=function(s){A(t,s);function t(n){var o=s.call(this,n)||this;return o.attributes=new g.default(o.domNode),o}return t.formats=function(n){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return n.tagName.toLowerCase()},t.prototype.format=function(n,o){var l=m.query(n);l instanceof j.default?this.attributes.attribute(l,o):o&&l!=null&&(n!==this.statics.blotName||this.formats()[n]!==o)&&this.replaceWith(n,o)},t.prototype.formats=function(){var n=this.attributes.values(),o=this.statics.formats(this.domNode);return o!=null&&(n[this.statics.blotName]=o),n},t.prototype.replaceWith=function(n,o){var l=s.prototype.replaceWith.call(this,n,o);return this.attributes.copy(l),l},t.prototype.update=function(n,o){var l=this;s.prototype.update.call(this,n,o),n.some(function(u){return u.target===l.domNode&&u.type==="attributes"})&&this.attributes.build()},t.prototype.wrap=function(n,o){var l=s.prototype.wrap.call(this,n,o);return l instanceof t&&l.statics.scope===this.statics.scope&&this.attributes.move(l),l},t}(v.default);c.default=d},function(y,c,p){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var t in s)s.hasOwnProperty(t)&&(d[t]=s[t])};return function(d,s){m(d,s);function t(){this.constructor=d}d.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(30),g=p(1),v=function(m){A(d,m);function d(){return m!==null&&m.apply(this,arguments)||this}return d.value=function(s){return!0},d.prototype.index=function(s,t){return this.domNode===s||this.domNode.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},d.prototype.position=function(s,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return s>0&&(n+=1),[this.parent.domNode,n]},d.prototype.value=function(){var s;return s={},s[this.statics.blotName]=this.statics.value(this.domNode)||!0,s},d.scope=g.Scope.INLINE_BLOT,d}(j.default);c.default=v},function(y,c,p){var A=p(11),j=p(3),g={attributes:{compose:function(m,d,s){typeof m!="object"&&(m={}),typeof d!="object"&&(d={});var t=j(!0,{},d);s||(t=Object.keys(t).reduce(function(o,l){return t[l]!=null&&(o[l]=t[l]),o},{}));for(var n in m)m[n]!==void 0&&d[n]===void 0&&(t[n]=m[n]);return Object.keys(t).length>0?t:void 0},diff:function(m,d){typeof m!="object"&&(m={}),typeof d!="object"&&(d={});var s=Object.keys(m).concat(Object.keys(d)).reduce(function(t,n){return A(m[n],d[n])||(t[n]=d[n]===void 0?null:d[n]),t},{});return Object.keys(s).length>0?s:void 0},transform:function(m,d,s){if(typeof m!="object")return d;if(typeof d=="object"){if(!s)return d;var t=Object.keys(d).reduce(function(n,o){return m[o]===void 0&&(n[o]=d[o]),n},{});return Object.keys(t).length>0?t:void 0}}},iterator:function(m){return new v(m)},length:function(m){return typeof m.delete=="number"?m.delete:typeof m.retain=="number"?m.retain:typeof m.insert=="string"?m.insert.length:1}};function v(m){this.ops=m,this.index=0,this.offset=0}v.prototype.hasNext=function(){return this.peekLength()<1/0},v.prototype.next=function(m){m||(m=1/0);var d=this.ops[this.index];if(d){var s=this.offset,t=g.length(d);if(m>=t-s?(m=t-s,this.index+=1,this.offset=0):this.offset+=m,typeof d.delete=="number")return{delete:m};var n={};return d.attributes&&(n.attributes=d.attributes),typeof d.retain=="number"?n.retain=m:typeof d.insert=="string"?n.insert=d.insert.substr(s,m):n.insert=d.insert,n}else return{retain:1/0}},v.prototype.peek=function(){return this.ops[this.index]},v.prototype.peekLength=function(){return this.ops[this.index]?g.length(this.ops[this.index])-this.offset:1/0},v.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},v.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var m=this.offset,d=this.index,s=this.next(),t=this.ops.slice(this.index);return this.offset=m,this.index=d,[s].concat(t)}else return[]},y.exports=g},function(y,c){var p=function(){function A(l,u){return u!=null&&l instanceof u}var j;try{j=Map}catch{j=function(){}}var g;try{g=Set}catch{g=function(){}}var v;try{v=Promise}catch{v=function(){}}function m(l,u,a,i,h){typeof u=="object"&&(a=u.depth,i=u.prototype,h=u.includeNonEnumerable,u=u.circular);var r=[],f=[],b=typeof Buffer<"u";typeof u>"u"&&(u=!0),typeof a>"u"&&(a=1/0);function N(E,S){if(E===null)return null;if(S===0)return E;var w,_;if(typeof E!="object")return E;if(A(E,j))w=new j;else if(A(E,g))w=new g;else if(A(E,v))w=new v(function(D,P){E.then(function(C){D(N(C,S-1))},function(C){P(N(C,S-1))})});else if(m.__isArray(E))w=[];else if(m.__isRegExp(E))w=new RegExp(E.source,o(E)),E.lastIndex&&(w.lastIndex=E.lastIndex);else if(m.__isDate(E))w=new Date(E.getTime());else{if(b&&Buffer.isBuffer(E))return Buffer.allocUnsafe?w=Buffer.allocUnsafe(E.length):w=new Buffer(E.length),E.copy(w),w;A(E,Error)?w=Object.create(E):typeof i>"u"?(_=Object.getPrototypeOf(E),w=Object.create(_)):(w=Object.create(i),_=i)}if(u){var O=r.indexOf(E);if(O!=-1)return f[O];r.push(E),f.push(w)}A(E,j)&&E.forEach(function(D,P){var C=N(P,S-1),I=N(D,S-1);w.set(C,I)}),A(E,g)&&E.forEach(function(D){var P=N(D,S-1);w.add(P)});for(var T in E){var L;_&&(L=Object.getOwnPropertyDescriptor(_,T)),!(L&&L.set==null)&&(w[T]=N(E[T],S-1))}if(Object.getOwnPropertySymbols)for(var M=Object.getOwnPropertySymbols(E),T=0;T<M.length;T++){var q=M[T],U=Object.getOwnPropertyDescriptor(E,q);U&&!U.enumerable&&!h||(w[q]=N(E[q],S-1),U.enumerable||Object.defineProperty(w,q,{enumerable:!1}))}if(h)for(var W=Object.getOwnPropertyNames(E),T=0;T<W.length;T++){var H=W[T],U=Object.getOwnPropertyDescriptor(E,H);U&&U.enumerable||(w[H]=N(E[H],S-1),Object.defineProperty(w,H,{enumerable:!1}))}return w}return N(l,a)}m.clonePrototype=function(u){if(u===null)return null;var a=function(){};return a.prototype=u,new a};function d(l){return Object.prototype.toString.call(l)}m.__objToStr=d;function s(l){return typeof l=="object"&&d(l)==="[object Date]"}m.__isDate=s;function t(l){return typeof l=="object"&&d(l)==="[object Array]"}m.__isArray=t;function n(l){return typeof l=="object"&&d(l)==="[object RegExp]"}m.__isRegExp=n;function o(l){var u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),u}return m.__getRegExpFlags=o,m}();typeof y=="object"&&y.exports&&(y.exports=p)},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function w(_,O){var T=[],L=!0,M=!1,q=void 0;try{for(var U=_[Symbol.iterator](),W;!(L=(W=U.next()).done)&&(T.push(W.value),!(O&&T.length===O));L=!0);}catch(H){M=!0,q=H}finally{try{!L&&U.return&&U.return()}finally{if(M)throw q}}return T}return function(_,O){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return w(_,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function w(_,O){for(var T=0;T<O.length;T++){var L=O[T];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(_,L.key,L)}}return function(_,O,T){return O&&w(_.prototype,O),T&&w(_,T),_}}(),g=function w(_,O,T){_===null&&(_=Function.prototype);var L=Object.getOwnPropertyDescriptor(_,O);if(L===void 0){var M=Object.getPrototypeOf(_);return M===null?void 0:w(M,O,T)}else{if("value"in L)return L.value;var q=L.get;return q===void 0?void 0:q.call(T)}},v=p(0),m=r(v),d=p(8),s=r(d),t=p(4),n=r(t),o=p(16),l=r(o),u=p(13),a=r(u),i=p(25),h=r(i);function r(w){return w&&w.__esModule?w:{default:w}}function f(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function b(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function N(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}function E(w){return w instanceof n.default||w instanceof t.BlockEmbed}var S=function(w){N(_,w);function _(O,T){f(this,_);var L=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,O));return L.emitter=T.emitter,Array.isArray(T.whitelist)&&(L.whitelist=T.whitelist.reduce(function(M,q){return M[q]=!0,M},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return j(_,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(T,L){var M=this.line(T),q=A(M,2),U=q[0],W=q[1],H=this.line(T+L),D=A(H,1),P=D[0];if(g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,T,L),P!=null&&U!==P&&W>0){if(U instanceof t.BlockEmbed||P instanceof t.BlockEmbed){this.optimize();return}if(U instanceof a.default){var C=U.newlineIndex(U.length(),!0);if(C>-1&&(U=U.split(C+1),U===P)){this.optimize();return}}else if(P instanceof a.default){var I=P.newlineIndex(0);I>-1&&P.split(I+1)}var $=P.children.head instanceof l.default?null:P.children.head;U.moveChildren(P,$),U.remove()}this.optimize()}},{key:"enable",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",T)}},{key:"formatAt",value:function(T,L,M,q){this.whitelist!=null&&!this.whitelist[M]||(g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,T,L,M,q),this.optimize())}},{key:"insertAt",value:function(T,L,M){if(!(M!=null&&this.whitelist!=null&&!this.whitelist[L])){if(T>=this.length())if(M==null||m.default.query(L,m.default.Scope.BLOCK)==null){var q=m.default.create(this.statics.defaultChild);this.appendChild(q),M==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),q.insertAt(0,L,M)}else{var U=m.default.create(L,M);this.appendChild(U)}else g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,T,L,M);this.optimize()}}},{key:"insertBefore",value:function(T,L){if(T.statics.scope===m.default.Scope.INLINE_BLOT){var M=m.default.create(this.statics.defaultChild);M.appendChild(T),T=M}g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,T,L)}},{key:"leaf",value:function(T){return this.path(T).pop()||[null,-1]}},{key:"line",value:function(T){return T===this.length()?this.line(T-1):this.descendant(E,T)}},{key:"lines",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,M=function q(U,W,H){var D=[],P=H;return U.children.forEachAt(W,H,function(C,I,$){E(C)?D.push(C):C instanceof m.default.Container&&(D=D.concat(q(C,I,P))),P-=$}),D};return M(this,T,L)}},{key:"optimize",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,T,L),T.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,T,L))}},{key:"path",value:function(T){return g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,T).slice(1)}},{key:"update",value:function(T){if(this.batch!==!0){var L=s.default.sources.USER;typeof T=="string"&&(L=T),Array.isArray(T)||(T=this.observer.takeRecords()),T.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,L,T),g(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"update",this).call(this,T.concat([])),T.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,L,T)}}}]),_}(m.default.Scroll);S.blotName="scroll",S.className="ql-editor",S.tagName="DIV",S.defaultChild="block",S.allowedChildren=[n.default,t.BlockEmbed,h.default],c.default=S},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.SHORTKEY=c.default=void 0;var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},j=function(){function R(B,z){var V=[],Y=!0,te=!1,ie=void 0;try{for(var oe=B[Symbol.iterator](),he;!(Y=(he=oe.next()).done)&&(V.push(he.value),!(z&&V.length===z));Y=!0);}catch(pe){te=!0,ie=pe}finally{try{!Y&&oe.return&&oe.return()}finally{if(te)throw ie}}return V}return function(B,z){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return R(B,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function R(B,z){for(var V=0;V<z.length;V++){var Y=z[V];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(B,Y.key,Y)}}return function(B,z,V){return z&&R(B.prototype,z),V&&R(B,V),B}}(),v=p(21),m=w(v),d=p(11),s=w(d),t=p(3),n=w(t),o=p(2),l=w(o),u=p(20),a=w(u),i=p(0),h=w(i),r=p(5),f=w(r),b=p(10),N=w(b),E=p(9),S=w(E);function w(R){return R&&R.__esModule?R:{default:R}}function _(R,B,z){return B in R?Object.defineProperty(R,B,{value:z,enumerable:!0,configurable:!0,writable:!0}):R[B]=z,R}function O(R,B){if(!(R instanceof B))throw new TypeError("Cannot call a class as a function")}function T(R,B){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:R}function L(R,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);R.prototype=Object.create(B&&B.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(R,B):R.__proto__=B)}var M=(0,N.default)("quill:keyboard"),q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",U=function(R){L(B,R),g(B,null,[{key:"match",value:function(V,Y){return Y=F(Y),["altKey","ctrlKey","metaKey","shiftKey"].some(function(te){return!!Y[te]!==V[te]&&Y[te]!==null})?!1:Y.key===(V.which||V.keyCode)}}]);function B(z,V){O(this,B);var Y=T(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,z,V));return Y.bindings={},Object.keys(Y.options.bindings).forEach(function(te){te==="list autofill"&&z.scroll.whitelist!=null&&!z.scroll.whitelist.list||Y.options.bindings[te]&&Y.addBinding(Y.options.bindings[te])}),Y.addBinding({key:B.keys.ENTER,shiftKey:null},C),Y.addBinding({key:B.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Y.addBinding({key:B.keys.BACKSPACE},{collapsed:!0},H),Y.addBinding({key:B.keys.DELETE},{collapsed:!0},D)):(Y.addBinding({key:B.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},H),Y.addBinding({key:B.keys.DELETE},{collapsed:!0,suffix:/^.?$/},D)),Y.addBinding({key:B.keys.BACKSPACE},{collapsed:!1},P),Y.addBinding({key:B.keys.DELETE},{collapsed:!1},P),Y.addBinding({key:B.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},H),Y.listen(),Y}return g(B,[{key:"addBinding",value:function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ie=F(V);if(ie==null||ie.key==null)return M.warn("Attempted to add invalid keyboard binding",ie);typeof Y=="function"&&(Y={handler:Y}),typeof te=="function"&&(te={handler:te}),ie=(0,n.default)(ie,Y,te),this.bindings[ie.key]=this.bindings[ie.key]||[],this.bindings[ie.key].push(ie)}},{key:"listen",value:function(){var V=this;this.quill.root.addEventListener("keydown",function(Y){if(!Y.defaultPrevented){var te=Y.which||Y.keyCode,ie=(V.bindings[te]||[]).filter(function(ye){return B.match(Y,ye)});if(ie.length!==0){var oe=V.quill.getSelection();if(!(oe==null||!V.quill.hasFocus())){var he=V.quill.getLine(oe.index),pe=j(he,2),Ae=pe[0],xe=pe[1],K=V.quill.getLeaf(oe.index),X=j(K,2),Q=X[0],ee=X[1],Z=oe.length===0?[Q,ee]:V.quill.getLeaf(oe.index+oe.length),le=j(Z,2),ue=le[0],ce=le[1],Pe=Q instanceof h.default.Text?Q.value().slice(0,ee):"",ze=ue instanceof h.default.Text?ue.value().slice(ce):"",me={collapsed:oe.length===0,empty:oe.length===0&&Ae.length()<=1,format:V.quill.getFormat(oe),offset:xe,prefix:Pe,suffix:ze},Tn=ie.some(function(ye){if(ye.collapsed!=null&&ye.collapsed!==me.collapsed||ye.empty!=null&&ye.empty!==me.empty||ye.offset!=null&&ye.offset!==me.offset)return!1;if(Array.isArray(ye.format)){if(ye.format.every(function(Ge){return me.format[Ge]==null}))return!1}else if(A(ye.format)==="object"&&!Object.keys(ye.format).every(function(Ge){return ye.format[Ge]===!0?me.format[Ge]!=null:ye.format[Ge]===!1?me.format[Ge]==null:(0,s.default)(ye.format[Ge],me.format[Ge])}))return!1;return ye.prefix!=null&&!ye.prefix.test(me.prefix)||ye.suffix!=null&&!ye.suffix.test(me.suffix)?!1:ye.handler.call(V,oe,me)!==!0});Tn&&Y.preventDefault()}}}})}}]),B}(S.default);U.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},U.DEFAULTS={bindings:{bold:$("bold"),italic:$("italic"),underline:$("underline"),indent:{key:U.keys.TAB,format:["blockquote","indent","list"],handler:function(B,z){if(z.collapsed&&z.offset!==0)return!0;this.quill.format("indent","+1",f.default.sources.USER)}},outdent:{key:U.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(B,z){if(z.collapsed&&z.offset!==0)return!0;this.quill.format("indent","-1",f.default.sources.USER)}},"outdent backspace":{key:U.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(B,z){z.format.indent!=null?this.quill.format("indent","-1",f.default.sources.USER):z.format.list!=null&&this.quill.format("list",!1,f.default.sources.USER)}},"indent code-block":I(!0),"outdent code-block":I(!1),"remove tab":{key:U.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(B){this.quill.deleteText(B.index-1,1,f.default.sources.USER)}},tab:{key:U.keys.TAB,handler:function(B){this.quill.history.cutoff();var z=new l.default().retain(B.index).delete(B.length).insert("	");this.quill.updateContents(z,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index+1,f.default.sources.SILENT)}},"list empty enter":{key:U.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(B,z){this.quill.format("list",!1,f.default.sources.USER),z.format.indent&&this.quill.format("indent",!1,f.default.sources.USER)}},"checklist enter":{key:U.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(B){var z=this.quill.getLine(B.index),V=j(z,2),Y=V[0],te=V[1],ie=(0,n.default)({},Y.formats(),{list:"checked"}),oe=new l.default().retain(B.index).insert(`
`,ie).retain(Y.length()-te-1).retain(1,{list:"unchecked"});this.quill.updateContents(oe,f.default.sources.USER),this.quill.setSelection(B.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:U.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(B,z){var V=this.quill.getLine(B.index),Y=j(V,2),te=Y[0],ie=Y[1],oe=new l.default().retain(B.index).insert(`
`,z.format).retain(te.length()-ie-1).retain(1,{header:null});this.quill.updateContents(oe,f.default.sources.USER),this.quill.setSelection(B.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(B,z){var V=z.prefix.length,Y=this.quill.getLine(B.index),te=j(Y,2),ie=te[0],oe=te[1];if(oe>V)return!0;var he=void 0;switch(z.prefix.trim()){case"[]":case"[ ]":he="unchecked";break;case"[x]":he="checked";break;case"-":case"*":he="bullet";break;default:he="ordered"}this.quill.insertText(B.index," ",f.default.sources.USER),this.quill.history.cutoff();var pe=new l.default().retain(B.index-oe).delete(V+1).retain(ie.length()-2-oe).retain(1,{list:he});this.quill.updateContents(pe,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index-V,f.default.sources.SILENT)}},"code exit":{key:U.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(B){var z=this.quill.getLine(B.index),V=j(z,2),Y=V[0],te=V[1],ie=new l.default().retain(B.index+Y.length()-te-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ie,f.default.sources.USER)}},"embed left":W(U.keys.LEFT,!1),"embed left shift":W(U.keys.LEFT,!0),"embed right":W(U.keys.RIGHT,!1),"embed right shift":W(U.keys.RIGHT,!0)}};function W(R,B){var z,V=R===U.keys.LEFT?"prefix":"suffix";return z={key:R,shiftKey:B,altKey:null},_(z,V,/^$/),_(z,"handler",function(te){var ie=te.index;R===U.keys.RIGHT&&(ie+=te.length+1);var oe=this.quill.getLeaf(ie),he=j(oe,1),pe=he[0];return pe instanceof h.default.Embed?(R===U.keys.LEFT?B?this.quill.setSelection(te.index-1,te.length+1,f.default.sources.USER):this.quill.setSelection(te.index-1,f.default.sources.USER):B?this.quill.setSelection(te.index,te.length+1,f.default.sources.USER):this.quill.setSelection(te.index+te.length+1,f.default.sources.USER),!1):!0}),z}function H(R,B){if(!(R.index===0||this.quill.getLength()<=1)){var z=this.quill.getLine(R.index),V=j(z,1),Y=V[0],te={};if(B.offset===0){var ie=this.quill.getLine(R.index-1),oe=j(ie,1),he=oe[0];if(he!=null&&he.length()>1){var pe=Y.formats(),Ae=this.quill.getFormat(R.index-1,1);te=a.default.attributes.diff(pe,Ae)||{}}}var xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(B.prefix)?2:1;this.quill.deleteText(R.index-xe,xe,f.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(R.index-xe,xe,te,f.default.sources.USER),this.quill.focus()}}function D(R,B){var z=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(B.suffix)?2:1;if(!(R.index>=this.quill.getLength()-z)){var V={},Y=0,te=this.quill.getLine(R.index),ie=j(te,1),oe=ie[0];if(B.offset>=oe.length()-1){var he=this.quill.getLine(R.index+1),pe=j(he,1),Ae=pe[0];if(Ae){var xe=oe.formats(),K=this.quill.getFormat(R.index,1);V=a.default.attributes.diff(xe,K)||{},Y=Ae.length()}}this.quill.deleteText(R.index,z,f.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(R.index+Y-1,z,V,f.default.sources.USER)}}function P(R){var B=this.quill.getLines(R),z={};if(B.length>1){var V=B[0].formats(),Y=B[B.length-1].formats();z=a.default.attributes.diff(Y,V)||{}}this.quill.deleteText(R,f.default.sources.USER),Object.keys(z).length>0&&this.quill.formatLine(R.index,1,z,f.default.sources.USER),this.quill.setSelection(R.index,f.default.sources.SILENT),this.quill.focus()}function C(R,B){var z=this;R.length>0&&this.quill.scroll.deleteAt(R.index,R.length);var V=Object.keys(B.format).reduce(function(Y,te){return h.default.query(te,h.default.Scope.BLOCK)&&!Array.isArray(B.format[te])&&(Y[te]=B.format[te]),Y},{});this.quill.insertText(R.index,`
`,V,f.default.sources.USER),this.quill.setSelection(R.index+1,f.default.sources.SILENT),this.quill.focus(),Object.keys(B.format).forEach(function(Y){V[Y]==null&&(Array.isArray(B.format[Y])||Y!=="link"&&z.quill.format(Y,B.format[Y],f.default.sources.USER))})}function I(R){return{key:U.keys.TAB,shiftKey:!R,format:{"code-block":!0},handler:function(z){var V=h.default.query("code-block"),Y=z.index,te=z.length,ie=this.quill.scroll.descendant(V,Y),oe=j(ie,2),he=oe[0],pe=oe[1];if(he!=null){var Ae=this.quill.getIndex(he),xe=he.newlineIndex(pe,!0)+1,K=he.newlineIndex(Ae+pe+te),X=he.domNode.textContent.slice(xe,K).split(`
`);pe=0,X.forEach(function(Q,ee){R?(he.insertAt(xe+pe,V.TAB),pe+=V.TAB.length,ee===0?Y+=V.TAB.length:te+=V.TAB.length):Q.startsWith(V.TAB)&&(he.deleteAt(xe+pe,V.TAB.length),pe-=V.TAB.length,ee===0?Y-=V.TAB.length:te-=V.TAB.length),pe+=Q.length+1}),this.quill.update(f.default.sources.USER),this.quill.setSelection(Y,te,f.default.sources.SILENT)}}}}function $(R){return{key:R[0].toUpperCase(),shortKey:!0,handler:function(z,V){this.quill.format(R,!V.format[R],f.default.sources.USER)}}}function F(R){if(typeof R=="string"||typeof R=="number")return F({key:R});if((typeof R>"u"?"undefined":A(R))==="object"&&(R=(0,m.default)(R,!1)),typeof R.key=="string")if(U.keys[R.key.toUpperCase()]!=null)R.key=U.keys[R.key.toUpperCase()];else if(R.key.length===1)R.key=R.key.toUpperCase().charCodeAt(0);else return null;return R.shortKey&&(R[q]=R.shortKey,delete R.shortKey),R}c.default=U,c.SHORTKEY=q},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function a(i,h){var r=[],f=!0,b=!1,N=void 0;try{for(var E=i[Symbol.iterator](),S;!(f=(S=E.next()).done)&&(r.push(S.value),!(h&&r.length===h));f=!0);}catch(w){b=!0,N=w}finally{try{!f&&E.return&&E.return()}finally{if(b)throw N}}return r}return function(i,h){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return a(i,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function a(i,h,r){i===null&&(i=Function.prototype);var f=Object.getOwnPropertyDescriptor(i,h);if(f===void 0){var b=Object.getPrototypeOf(i);return b===null?void 0:a(b,h,r)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(r)}},g=function(){function a(i,h){for(var r=0;r<h.length;r++){var f=h[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,f.key,f)}}return function(i,h,r){return h&&a(i.prototype,h),r&&a(i,r),i}}(),v=p(0),m=t(v),d=p(7),s=t(d);function t(a){return a&&a.__esModule?a:{default:a}}function n(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function o(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function l(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var u=function(a){l(i,a),g(i,null,[{key:"value",value:function(){}}]);function i(h,r){n(this,i);var f=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,h));return f.selection=r,f.textNode=document.createTextNode(i.CONTENTS),f.domNode.appendChild(f.textNode),f._length=0,f}return g(i,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(r,f){if(this._length!==0)return j(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,r,f);for(var b=this,N=0;b!=null&&b.statics.scope!==m.default.Scope.BLOCK_BLOT;)N+=b.offset(b.parent),b=b.parent;b!=null&&(this._length=i.CONTENTS.length,b.optimize(),b.formatAt(N,i.CONTENTS.length,r,f),this._length=0)}},{key:"index",value:function(r,f){return r===this.textNode?0:j(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"index",this).call(this,r,f)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){j(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var r=this.textNode,f=this.selection.getNativeRange(),b=void 0,N=void 0,E=void 0;if(f!=null&&f.start.node===r&&f.end.node===r){var S=[r,f.start.offset,f.end.offset];b=S[0],N=S[1],E=S[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==i.CONTENTS){var w=this.textNode.data.split(i.CONTENTS).join("");this.next instanceof s.default?(b=this.next.domNode,this.next.insertAt(0,w),this.textNode.data=i.CONTENTS):(this.textNode.data=w,this.parent.insertBefore(m.default.create(this.textNode),this),this.textNode=document.createTextNode(i.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),N!=null){var _=[N,E].map(function(T){return Math.max(0,Math.min(b.data.length,T-1))}),O=A(_,2);return N=O[0],E=O[1],{startNode:b,startOffset:N,endNode:b,endOffset:E}}}}},{key:"update",value:function(r,f){var b=this;if(r.some(function(E){return E.type==="characterData"&&E.target===b.textNode})){var N=this.restore();N&&(f.range=N)}}},{key:"value",value:function(){return""}}]),i}(m.default.Embed);u.blotName="cursor",u.className="ql-cursor",u.tagName="span",u.CONTENTS="\uFEFF",c.default=u},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(0),j=m(A),g=p(4),v=m(g);function m(o){return o&&o.__esModule?o:{default:o}}function d(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function s(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=function(o){t(l,o);function l(){return d(this,l),s(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(j.default.Container);n.allowedChildren=[v.default,g.BlockEmbed,n],c.default=n},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.ColorStyle=c.ColorClass=c.ColorAttributor=void 0;var A=function(){function u(a,i){for(var h=0;h<i.length;h++){var r=i[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,i,h){return i&&u(a.prototype,i),h&&u(a,h),a}}(),j=function u(a,i,h){a===null&&(a=Function.prototype);var r=Object.getOwnPropertyDescriptor(a,i);if(r===void 0){var f=Object.getPrototypeOf(a);return f===null?void 0:u(f,i,h)}else{if("value"in r)return r.value;var b=r.get;return b===void 0?void 0:b.call(h)}},g=p(0),v=m(g);function m(u){return u&&u.__esModule?u:{default:u}}function d(u,a){if(!(u instanceof a))throw new TypeError("Cannot call a class as a function")}function s(u,a){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:u}function t(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);u.prototype=Object.create(a&&a.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(u,a):u.__proto__=a)}var n=function(u){t(a,u);function a(){return d(this,a),s(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return A(a,[{key:"value",value:function(h){var r=j(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"value",this).call(this,h);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+r.split(",").map(function(f){return("00"+parseInt(f).toString(16)).slice(-2)}).join("")):r}}]),a}(v.default.Attributor.Style),o=new v.default.Attributor.Class("color","ql-color",{scope:v.default.Scope.INLINE}),l=new n("color","color",{scope:v.default.Scope.INLINE});c.ColorAttributor=n,c.ColorClass=o,c.ColorStyle=l},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.sanitize=c.default=void 0;var A=function(){function l(u,a){for(var i=0;i<a.length;i++){var h=a[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,a,i){return a&&l(u.prototype,a),i&&l(u,i),u}}(),j=function l(u,a,i){u===null&&(u=Function.prototype);var h=Object.getOwnPropertyDescriptor(u,a);if(h===void 0){var r=Object.getPrototypeOf(u);return r===null?void 0:l(r,a,i)}else{if("value"in h)return h.value;var f=h.get;return f===void 0?void 0:f.call(i)}},g=p(6),v=m(g);function m(l){return l&&l.__esModule?l:{default:l}}function d(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function s(l,u){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:l}function t(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);l.prototype=Object.create(u&&u.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(l,u):l.__proto__=u)}var n=function(l){t(u,l);function u(){return d(this,u),s(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return A(u,[{key:"format",value:function(i,h){if(i!==this.statics.blotName||!h)return j(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,i,h);h=this.constructor.sanitize(h),this.domNode.setAttribute("href",h)}}],[{key:"create",value:function(i){var h=j(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,i);return i=this.sanitize(i),h.setAttribute("href",i),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}},{key:"formats",value:function(i){return i.getAttribute("href")}},{key:"sanitize",value:function(i){return o(i,this.PROTOCOL_WHITELIST)?i:this.SANITIZED_URL}}]),u}(v.default);n.blotName="link",n.tagName="A",n.SANITIZED_URL="about:blank",n.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function o(l,u){var a=document.createElement("a");a.href=l;var i=a.href.slice(0,a.href.indexOf(":"));return u.indexOf(i)>-1}c.default=n,c.sanitize=o},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},j=function(){function u(a,i){for(var h=0;h<i.length;h++){var r=i[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,i,h){return i&&u(a.prototype,i),h&&u(a,h),a}}(),g=p(23),v=s(g),m=p(107),d=s(m);function s(u){return u&&u.__esModule?u:{default:u}}function t(u,a){if(!(u instanceof a))throw new TypeError("Cannot call a class as a function")}var n=0;function o(u,a){u.setAttribute(a,u.getAttribute(a)!=="true")}var l=function(){function u(a){var i=this;t(this,u),this.select=a,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){i.togglePicker()}),this.label.addEventListener("keydown",function(h){switch(h.keyCode){case v.default.keys.ENTER:i.togglePicker();break;case v.default.keys.ESCAPE:i.escape(),h.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return j(u,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),o(this.label,"aria-expanded"),o(this.options,"aria-hidden")}},{key:"buildItem",value:function(i){var h=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),i.hasAttribute("value")&&r.setAttribute("data-value",i.getAttribute("value")),i.textContent&&r.setAttribute("data-label",i.textContent),r.addEventListener("click",function(){h.selectItem(r,!0)}),r.addEventListener("keydown",function(f){switch(f.keyCode){case v.default.keys.ENTER:h.selectItem(r,!0),f.preventDefault();break;case v.default.keys.ESCAPE:h.escape(),f.preventDefault();break}}),r}},{key:"buildLabel",value:function(){var i=document.createElement("span");return i.classList.add("ql-picker-label"),i.innerHTML=d.default,i.tabIndex="0",i.setAttribute("role","button"),i.setAttribute("aria-expanded","false"),this.container.appendChild(i),i}},{key:"buildOptions",value:function(){var i=this,h=document.createElement("span");h.classList.add("ql-picker-options"),h.setAttribute("aria-hidden","true"),h.tabIndex="-1",h.id="ql-picker-options-"+n,n+=1,this.label.setAttribute("aria-controls",h.id),this.options=h,[].slice.call(this.select.options).forEach(function(r){var f=i.buildItem(r);h.appendChild(f),r.selected===!0&&i.selectItem(f)}),this.container.appendChild(h)}},{key:"buildPicker",value:function(){var i=this;[].slice.call(this.select.attributes).forEach(function(h){i.container.setAttribute(h.name,h.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var i=this;this.close(),setTimeout(function(){return i.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(i){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.container.querySelector(".ql-selected");if(i!==r&&(r!=null&&r.classList.remove("ql-selected"),i!=null&&(i.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(i.parentNode.children,i),i.hasAttribute("data-value")?this.label.setAttribute("data-value",i.getAttribute("data-value")):this.label.removeAttribute("data-value"),i.hasAttribute("data-label")?this.label.setAttribute("data-label",i.getAttribute("data-label")):this.label.removeAttribute("data-label"),h))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":A(Event))==="object"){var f=document.createEvent("Event");f.initEvent("change",!0,!0),this.select.dispatchEvent(f)}this.close()}}},{key:"update",value:function(){var i=void 0;if(this.select.selectedIndex>-1){var h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];i=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);var r=i!=null&&i!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),u}();c.default=l},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(0),j=M(A),g=p(5),v=M(g),m=p(4),d=M(m),s=p(16),t=M(s),n=p(25),o=M(n),l=p(24),u=M(l),a=p(35),i=M(a),h=p(6),r=M(h),f=p(22),b=M(f),N=p(7),E=M(N),S=p(55),w=M(S),_=p(42),O=M(_),T=p(23),L=M(T);function M(q){return q&&q.__esModule?q:{default:q}}v.default.register({"blots/block":d.default,"blots/block/embed":m.BlockEmbed,"blots/break":t.default,"blots/container":o.default,"blots/cursor":u.default,"blots/embed":i.default,"blots/inline":r.default,"blots/scroll":b.default,"blots/text":E.default,"modules/clipboard":w.default,"modules/history":O.default,"modules/keyboard":L.default}),j.default.register(d.default,t.default,u.default,r.default,b.default,E.default),c.default=v.default},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(1),j=function(){function g(v){this.domNode=v,this.domNode[A.DATA_KEY]={blot:this}}return Object.defineProperty(g.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),g.create=function(v){if(this.tagName==null)throw new A.ParchmentError("Blot definition missing tagName");var m;return Array.isArray(this.tagName)?(typeof v=="string"&&(v=v.toUpperCase(),parseInt(v).toString()===v&&(v=parseInt(v))),typeof v=="number"?m=document.createElement(this.tagName[v-1]):this.tagName.indexOf(v)>-1?m=document.createElement(v):m=document.createElement(this.tagName[0])):m=document.createElement(this.tagName),this.className&&m.classList.add(this.className),m},g.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},g.prototype.clone=function(){var v=this.domNode.cloneNode(!1);return A.create(v)},g.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[A.DATA_KEY]},g.prototype.deleteAt=function(v,m){var d=this.isolate(v,m);d.remove()},g.prototype.formatAt=function(v,m,d,s){var t=this.isolate(v,m);if(A.query(d,A.Scope.BLOT)!=null&&s)t.wrap(d,s);else if(A.query(d,A.Scope.ATTRIBUTE)!=null){var n=A.create(this.statics.scope);t.wrap(n),n.format(d,s)}},g.prototype.insertAt=function(v,m,d){var s=d==null?A.create("text",m):A.create(m,d),t=this.split(v);this.parent.insertBefore(s,t)},g.prototype.insertInto=function(v,m){m===void 0&&(m=null),this.parent!=null&&this.parent.children.remove(this);var d=null;v.children.insertBefore(this,m),m!=null&&(d=m.domNode),(this.domNode.parentNode!=v.domNode||this.domNode.nextSibling!=d)&&v.domNode.insertBefore(this.domNode,d),this.parent=v,this.attach()},g.prototype.isolate=function(v,m){var d=this.split(v);return d.split(m),d},g.prototype.length=function(){return 1},g.prototype.offset=function(v){return v===void 0&&(v=this.parent),this.parent==null||this==v?0:this.parent.children.offset(this)+this.parent.offset(v)},g.prototype.optimize=function(v){this.domNode[A.DATA_KEY]!=null&&delete this.domNode[A.DATA_KEY].mutations},g.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},g.prototype.replace=function(v){v.parent!=null&&(v.parent.insertBefore(this,v.next),v.remove())},g.prototype.replaceWith=function(v,m){var d=typeof v=="string"?A.create(v,m):v;return d.replace(this),d},g.prototype.split=function(v,m){return v===0?this:this.next},g.prototype.update=function(v,m){},g.prototype.wrap=function(v,m){var d=typeof v=="string"?A.create(v,m):v;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},g.blotName="abstract",g}();c.default=j},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(12),j=p(32),g=p(33),v=p(1),m=function(){function d(s){this.attributes={},this.domNode=s,this.build()}return d.prototype.attribute=function(s,t){t?s.add(this.domNode,t)&&(s.value(this.domNode)!=null?this.attributes[s.attrName]=s:delete this.attributes[s.attrName]):(s.remove(this.domNode),delete this.attributes[s.attrName])},d.prototype.build=function(){var s=this;this.attributes={};var t=A.default.keys(this.domNode),n=j.default.keys(this.domNode),o=g.default.keys(this.domNode);t.concat(n).concat(o).forEach(function(l){var u=v.query(l,v.Scope.ATTRIBUTE);u instanceof A.default&&(s.attributes[u.attrName]=u)})},d.prototype.copy=function(s){var t=this;Object.keys(this.attributes).forEach(function(n){var o=t.attributes[n].value(t.domNode);s.format(n,o)})},d.prototype.move=function(s){var t=this;this.copy(s),Object.keys(this.attributes).forEach(function(n){t.attributes[n].remove(t.domNode)}),this.attributes={}},d.prototype.values=function(){var s=this;return Object.keys(this.attributes).reduce(function(t,n){return t[n]=s.attributes[n].value(s.domNode),t},{})},d}();c.default=m},function(y,c,p){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var t in s)s.hasOwnProperty(t)&&(d[t]=s[t])};return function(d,s){m(d,s);function t(){this.constructor=d}d.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(12);function g(m,d){var s=m.getAttribute("class")||"";return s.split(/\s+/).filter(function(t){return t.indexOf(d+"-")===0})}var v=function(m){A(d,m);function d(){return m!==null&&m.apply(this,arguments)||this}return d.keys=function(s){return(s.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},d.prototype.add=function(s,t){return this.canAdd(s,t)?(this.remove(s),s.classList.add(this.keyName+"-"+t),!0):!1},d.prototype.remove=function(s){var t=g(s,this.keyName);t.forEach(function(n){s.classList.remove(n)}),s.classList.length===0&&s.removeAttribute("class")},d.prototype.value=function(s){var t=g(s,this.keyName)[0]||"",n=t.slice(this.keyName.length+1);return this.canAdd(s,n)?n:""},d}(j.default);c.default=v},function(y,c,p){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var t in s)s.hasOwnProperty(t)&&(d[t]=s[t])};return function(d,s){m(d,s);function t(){this.constructor=d}d.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(12);function g(m){var d=m.split("-"),s=d.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return d[0]+s}var v=function(m){A(d,m);function d(){return m!==null&&m.apply(this,arguments)||this}return d.keys=function(s){return(s.getAttribute("style")||"").split(";").map(function(t){var n=t.split(":");return n[0].trim()})},d.prototype.add=function(s,t){return this.canAdd(s,t)?(s.style[g(this.keyName)]=t,!0):!1},d.prototype.remove=function(s){s.style[g(this.keyName)]="",s.getAttribute("style")||s.removeAttribute("style")},d.prototype.value=function(s){var t=s.style[g(this.keyName)];return this.canAdd(s,t)?t:""},d}(j.default);c.default=v},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function v(m,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(m,t.key,t)}}return function(m,d,s){return d&&v(m.prototype,d),s&&v(m,s),m}}();function j(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}var g=function(){function v(m,d){j(this,v),this.quill=m,this.options=d,this.modules={}}return A(v,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(s){d.modules[s]==null&&d.addModule(s)})}},{key:"addModule",value:function(d){var s=this.quill.constructor.import("modules/"+d);return this.modules[d]=new s(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),v}();g.DEFAULTS={modules:{}},g.themes={default:g},c.default=g},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function a(i,h){for(var r=0;r<h.length;r++){var f=h[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,f.key,f)}}return function(i,h,r){return h&&a(i.prototype,h),r&&a(i,r),i}}(),j=function a(i,h,r){i===null&&(i=Function.prototype);var f=Object.getOwnPropertyDescriptor(i,h);if(f===void 0){var b=Object.getPrototypeOf(i);return b===null?void 0:a(b,h,r)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(r)}},g=p(0),v=s(g),m=p(7),d=s(m);function s(a){return a&&a.__esModule?a:{default:a}}function t(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function n(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function o(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var l="\uFEFF",u=function(a){o(i,a);function i(h){t(this,i);var r=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,h));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(f){r.contentNode.appendChild(f)}),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return A(i,[{key:"index",value:function(r,f){return r===this.leftGuard?0:r===this.rightGuard?1:j(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"index",this).call(this,r,f)}},{key:"restore",value:function(r){var f=void 0,b=void 0,N=r.data.split(l).join("");if(r===this.leftGuard)if(this.prev instanceof d.default){var E=this.prev.length();this.prev.insertAt(E,N),f={startNode:this.prev.domNode,startOffset:E+N.length}}else b=document.createTextNode(N),this.parent.insertBefore(v.default.create(b),this),f={startNode:b,startOffset:N.length};else r===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,N),f={startNode:this.next.domNode,startOffset:N.length}):(b=document.createTextNode(N),this.parent.insertBefore(v.default.create(b),this.next),f={startNode:b,startOffset:N.length}));return r.data=l,f}},{key:"update",value:function(r,f){var b=this;r.forEach(function(N){if(N.type==="characterData"&&(N.target===b.leftGuard||N.target===b.rightGuard)){var E=b.restore(N.target);E&&(f.range=E)}})}}]),i}(v.default.Embed);c.default=u},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.AlignStyle=c.AlignClass=c.AlignAttribute=void 0;var A=p(0),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}var v={scope:j.default.Scope.BLOCK,whitelist:["right","center","justify"]},m=new j.default.Attributor.Attribute("align","align",v),d=new j.default.Attributor.Class("align","ql-align",v),s=new j.default.Attributor.Style("align","text-align",v);c.AlignAttribute=m,c.AlignClass=d,c.AlignStyle=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.BackgroundStyle=c.BackgroundClass=void 0;var A=p(0),j=v(A),g=p(26);function v(s){return s&&s.__esModule?s:{default:s}}var m=new j.default.Attributor.Class("background","ql-bg",{scope:j.default.Scope.INLINE}),d=new g.ColorAttributor("background","background-color",{scope:j.default.Scope.INLINE});c.BackgroundClass=m,c.BackgroundStyle=d},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.DirectionStyle=c.DirectionClass=c.DirectionAttribute=void 0;var A=p(0),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}var v={scope:j.default.Scope.BLOCK,whitelist:["rtl"]},m=new j.default.Attributor.Attribute("direction","dir",v),d=new j.default.Attributor.Class("direction","ql-direction",v),s=new j.default.Attributor.Style("direction","direction",v);c.DirectionAttribute=m,c.DirectionClass=d,c.DirectionStyle=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.FontClass=c.FontStyle=void 0;var A=function(){function a(i,h){for(var r=0;r<h.length;r++){var f=h[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,f.key,f)}}return function(i,h,r){return h&&a(i.prototype,h),r&&a(i,r),i}}(),j=function a(i,h,r){i===null&&(i=Function.prototype);var f=Object.getOwnPropertyDescriptor(i,h);if(f===void 0){var b=Object.getPrototypeOf(i);return b===null?void 0:a(b,h,r)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(r)}},g=p(0),v=m(g);function m(a){return a&&a.__esModule?a:{default:a}}function d(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function s(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function t(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var n={scope:v.default.Scope.INLINE,whitelist:["serif","monospace"]},o=new v.default.Attributor.Class("font","ql-font",n),l=function(a){t(i,a);function i(){return d(this,i),s(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return A(i,[{key:"value",value:function(r){return j(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"value",this).call(this,r).replace(/["']/g,"")}}]),i}(v.default.Attributor.Style),u=new l("font","font-family",n);c.FontStyle=u,c.FontClass=o},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.SizeStyle=c.SizeClass=void 0;var A=p(0),j=g(A);function g(d){return d&&d.__esModule?d:{default:d}}var v=new j.default.Attributor.Class("size","ql-size",{scope:j.default.Scope.INLINE,whitelist:["small","large","huge"]}),m=new j.default.Attributor.Style("size","font-size",{scope:j.default.Scope.INLINE,whitelist:["10px","18px","32px"]});c.SizeClass=v,c.SizeStyle=m},function(y,c,p){y.exports={align:{"":p(76),center:p(77),right:p(78),justify:p(79)},background:p(80),blockquote:p(81),bold:p(82),clean:p(83),code:p(58),"code-block":p(58),color:p(84),direction:{"":p(85),rtl:p(86)},float:{center:p(87),full:p(88),left:p(89),right:p(90)},formula:p(91),header:{1:p(92),2:p(93)},italic:p(94),image:p(95),indent:{"+1":p(96),"-1":p(97)},link:p(98),list:{ordered:p(99),bullet:p(100),check:p(101)},script:{sub:p(102),super:p(103)},strike:p(104),underline:p(105),video:p(106)}},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.getLastChangeIndex=c.default=void 0;var A=function(){function h(r,f){for(var b=0;b<f.length;b++){var N=f[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(r,N.key,N)}}return function(r,f,b){return f&&h(r.prototype,f),b&&h(r,b),r}}(),j=p(0),g=t(j),v=p(5),m=t(v),d=p(9),s=t(d);function t(h){return h&&h.__esModule?h:{default:h}}function n(h,r){if(!(h instanceof r))throw new TypeError("Cannot call a class as a function")}function o(h,r){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:h}function l(h,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);h.prototype=Object.create(r&&r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(h,r):h.__proto__=r)}var u=function(h){l(r,h);function r(f,b){n(this,r);var N=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,f,b));return N.lastRecorded=0,N.ignoreChange=!1,N.clear(),N.quill.on(m.default.events.EDITOR_CHANGE,function(E,S,w,_){E!==m.default.events.TEXT_CHANGE||N.ignoreChange||(!N.options.userOnly||_===m.default.sources.USER?N.record(S,w):N.transform(S))}),N.quill.keyboard.addBinding({key:"Z",shortKey:!0},N.undo.bind(N)),N.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},N.redo.bind(N)),/Win/i.test(navigator.platform)&&N.quill.keyboard.addBinding({key:"Y",shortKey:!0},N.redo.bind(N)),N}return A(r,[{key:"change",value:function(b,N){if(this.stack[b].length!==0){var E=this.stack[b].pop();this.stack[N].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[b],m.default.sources.USER),this.ignoreChange=!1;var S=i(E[b]);this.quill.setSelection(S)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(b,N){if(b.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(N),S=Date.now();if(this.lastRecorded+this.options.delay>S&&this.stack.undo.length>0){var w=this.stack.undo.pop();E=E.compose(w.undo),b=w.redo.compose(b)}else this.lastRecorded=S;this.stack.undo.push({redo:b,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(b){this.stack.undo.forEach(function(N){N.undo=b.transform(N.undo,!0),N.redo=b.transform(N.redo,!0)}),this.stack.redo.forEach(function(N){N.undo=b.transform(N.undo,!0),N.redo=b.transform(N.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),r}(s.default);u.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function a(h){var r=h.ops[h.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(function(f){return g.default.query(f,g.default.Scope.BLOCK)!=null}):!1}function i(h){var r=h.reduce(function(b,N){return b+=N.delete||0,b},0),f=h.length()-r;return a(h)&&(f-=1),f}c.default=u,c.getLastChangeIndex=i},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BaseTooltip=void 0;var A=function(){function C(I,$){for(var F=0;F<$.length;F++){var R=$[F];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}return function(I,$,F){return $&&C(I.prototype,$),F&&C(I,F),I}}(),j=function C(I,$,F){I===null&&(I=Function.prototype);var R=Object.getOwnPropertyDescriptor(I,$);if(R===void 0){var B=Object.getPrototypeOf(I);return B===null?void 0:C(B,$,F)}else{if("value"in R)return R.value;var z=R.get;return z===void 0?void 0:z.call(F)}},g=p(3),v=S(g),m=p(2),d=S(m),s=p(8),t=S(s),n=p(23),o=S(n),l=p(34),u=S(l),a=p(59),i=S(a),h=p(60),r=S(h),f=p(28),b=S(f),N=p(61),E=S(N);function S(C){return C&&C.__esModule?C:{default:C}}function w(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")}function _(C,I){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:C}function O(C,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);C.prototype=Object.create(I&&I.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(C,I):C.__proto__=I)}var T=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],M=[!1,"serif","monospace"],q=["1","2","3",!1],U=["small",!1,"large","huge"],W=function(C){O(I,C);function I($,F){w(this,I);var R=_(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,$,F)),B=function z(V){if(!document.body.contains($.root))return document.body.removeEventListener("click",z);R.tooltip!=null&&!R.tooltip.root.contains(V.target)&&document.activeElement!==R.tooltip.textbox&&!R.quill.hasFocus()&&R.tooltip.hide(),R.pickers!=null&&R.pickers.forEach(function(Y){Y.container.contains(V.target)||Y.close()})};return $.emitter.listenDOM("click",document.body,B),R}return A(I,[{key:"addModule",value:function(F){var R=j(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"addModule",this).call(this,F);return F==="toolbar"&&this.extendToolbar(R),R}},{key:"buildButtons",value:function(F,R){F.forEach(function(B){var z=B.getAttribute("class")||"";z.split(/\s+/).forEach(function(V){if(V.startsWith("ql-")&&(V=V.slice(3),R[V]!=null))if(V==="direction")B.innerHTML=R[V][""]+R[V].rtl;else if(typeof R[V]=="string")B.innerHTML=R[V];else{var Y=B.value||"";Y!=null&&R[V][Y]&&(B.innerHTML=R[V][Y])}})})}},{key:"buildPickers",value:function(F,R){var B=this;this.pickers=F.map(function(V){if(V.classList.contains("ql-align"))return V.querySelector("option")==null&&P(V,T),new r.default(V,R.align);if(V.classList.contains("ql-background")||V.classList.contains("ql-color")){var Y=V.classList.contains("ql-background")?"background":"color";return V.querySelector("option")==null&&P(V,L,Y==="background"?"#ffffff":"#000000"),new i.default(V,R[Y])}else return V.querySelector("option")==null&&(V.classList.contains("ql-font")?P(V,M):V.classList.contains("ql-header")?P(V,q):V.classList.contains("ql-size")&&P(V,U)),new b.default(V)});var z=function(){B.pickers.forEach(function(Y){Y.update()})};this.quill.on(t.default.events.EDITOR_CHANGE,z)}}]),I}(u.default);W.DEFAULTS=(0,v.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var I=this,$=this.container.querySelector("input.ql-image[type=file]");$==null&&($=document.createElement("input"),$.setAttribute("type","file"),$.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),$.classList.add("ql-image"),$.addEventListener("change",function(){if($.files!=null&&$.files[0]!=null){var F=new FileReader;F.onload=function(R){var B=I.quill.getSelection(!0);I.quill.updateContents(new d.default().retain(B.index).delete(B.length).insert({image:R.target.result}),t.default.sources.USER),I.quill.setSelection(B.index+1,t.default.sources.SILENT),$.value=""},F.readAsDataURL($.files[0])}}),this.container.appendChild($)),$.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var H=function(C){O(I,C);function I($,F){w(this,I);var R=_(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,$,F));return R.textbox=R.root.querySelector('input[type="text"]'),R.listen(),R}return A(I,[{key:"listen",value:function(){var F=this;this.textbox.addEventListener("keydown",function(R){o.default.match(R,"enter")?(F.save(),R.preventDefault()):o.default.match(R,"escape")&&(F.cancel(),R.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),R!=null?this.textbox.value=R:F!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+F)||""),this.root.setAttribute("data-mode",F)}},{key:"restoreFocus",value:function(){var F=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=F}},{key:"save",value:function(){var F=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var R=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",F,t.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",F,t.default.sources.USER)),this.quill.root.scrollTop=R;break}case"video":F=D(F);case"formula":{if(!F)break;var B=this.quill.getSelection(!0);if(B!=null){var z=B.index+B.length;this.quill.insertEmbed(z,this.root.getAttribute("data-mode"),F,t.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(z+1," ",t.default.sources.USER),this.quill.setSelection(z+2,t.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),I}(E.default);function D(C){var I=C.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||C.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return I?(I[1]||"https")+"://www.youtube.com/embed/"+I[2]+"?showinfo=0":(I=C.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(I[1]||"https")+"://player.vimeo.com/video/"+I[2]+"/":C}function P(C,I){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;I.forEach(function(F){var R=document.createElement("option");F===$?R.setAttribute("selected","selected"):R.setAttribute("value",F),C.appendChild(R)})}c.BaseTooltip=H,c.default=W},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function j(){this.head=this.tail=null,this.length=0}return j.prototype.append=function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];this.insertBefore(g[0],null),g.length>1&&this.append.apply(this,g.slice(1))},j.prototype.contains=function(g){for(var v,m=this.iterator();v=m();)if(v===g)return!0;return!1},j.prototype.insertBefore=function(g,v){g&&(g.next=v,v!=null?(g.prev=v.prev,v.prev!=null&&(v.prev.next=g),v.prev=g,v===this.head&&(this.head=g)):this.tail!=null?(this.tail.next=g,g.prev=this.tail,this.tail=g):(g.prev=null,this.head=this.tail=g),this.length+=1)},j.prototype.offset=function(g){for(var v=0,m=this.head;m!=null;){if(m===g)return v;v+=m.length(),m=m.next}return-1},j.prototype.remove=function(g){this.contains(g)&&(g.prev!=null&&(g.prev.next=g.next),g.next!=null&&(g.next.prev=g.prev),g===this.head&&(this.head=g.next),g===this.tail&&(this.tail=g.prev),this.length-=1)},j.prototype.iterator=function(g){return g===void 0&&(g=this.head),function(){var v=g;return g!=null&&(g=g.next),v}},j.prototype.find=function(g,v){v===void 0&&(v=!1);for(var m,d=this.iterator();m=d();){var s=m.length();if(g<s||v&&g===s&&(m.next==null||m.next.length()!==0))return[m,g];g-=s}return[null,0]},j.prototype.forEach=function(g){for(var v,m=this.iterator();v=m();)g(v)},j.prototype.forEachAt=function(g,v,m){if(!(v<=0))for(var d=this.find(g),s=d[0],t=d[1],n,o=g-t,l=this.iterator(s);(n=l())&&o<g+v;){var u=n.length();g>o?m(n,g-o,Math.min(v,o+u-g)):m(n,0,Math.min(u,g+v-o)),o+=u}},j.prototype.map=function(g){return this.reduce(function(v,m){return v.push(g(m)),v},[])},j.prototype.reduce=function(g,v){for(var m,d=this.iterator();m=d();)v=g(v,m);return v},j}();c.default=A},function(y,c,p){var A=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(t,n){s(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(17),g=p(1),v={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},m=100,d=function(s){A(t,s);function t(n){var o=s.call(this,n)||this;return o.scroll=o,o.observer=new MutationObserver(function(l){o.update(l)}),o.observer.observe(o.domNode,v),o.attach(),o}return t.prototype.detach=function(){s.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(n,o){this.update(),n===0&&o===this.length()?this.children.forEach(function(l){l.remove()}):s.prototype.deleteAt.call(this,n,o)},t.prototype.formatAt=function(n,o,l,u){this.update(),s.prototype.formatAt.call(this,n,o,l,u)},t.prototype.insertAt=function(n,o,l){this.update(),s.prototype.insertAt.call(this,n,o,l)},t.prototype.optimize=function(n,o){var l=this;n===void 0&&(n=[]),o===void 0&&(o={}),s.prototype.optimize.call(this,o);for(var u=[].slice.call(this.observer.takeRecords());u.length>0;)n.push(u.pop());for(var a=function(f,b){b===void 0&&(b=!0),!(f==null||f===l)&&f.domNode.parentNode!=null&&(f.domNode[g.DATA_KEY].mutations==null&&(f.domNode[g.DATA_KEY].mutations=[]),b&&a(f.parent))},i=function(f){f.domNode[g.DATA_KEY]==null||f.domNode[g.DATA_KEY].mutations==null||(f instanceof j.default&&f.children.forEach(i),f.optimize(o))},h=n,r=0;h.length>0;r+=1){if(r>=m)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(function(f){var b=g.find(f.target,!0);b!=null&&(b.domNode===f.target&&(f.type==="childList"?(a(g.find(f.previousSibling,!1)),[].forEach.call(f.addedNodes,function(N){var E=g.find(N,!1);a(E,!1),E instanceof j.default&&E.children.forEach(function(S){a(S,!1)})})):f.type==="attributes"&&a(b.prev)),a(b))}),this.children.forEach(i),h=[].slice.call(this.observer.takeRecords()),u=h.slice();u.length>0;)n.push(u.pop())}},t.prototype.update=function(n,o){var l=this;o===void 0&&(o={}),n=n||this.observer.takeRecords(),n.map(function(u){var a=g.find(u.target,!0);return a==null?null:a.domNode[g.DATA_KEY].mutations==null?(a.domNode[g.DATA_KEY].mutations=[u],a):(a.domNode[g.DATA_KEY].mutations.push(u),null)}).forEach(function(u){u==null||u===l||u.domNode[g.DATA_KEY]==null||u.update(u.domNode[g.DATA_KEY].mutations||[],o)}),this.domNode[g.DATA_KEY].mutations!=null&&s.prototype.update.call(this,this.domNode[g.DATA_KEY].mutations,o),this.optimize(n,o)},t.blotName="scroll",t.defaultChild="block",t.scope=g.Scope.BLOCK_BLOT,t.tagName="DIV",t}(j.default);c.default=d},function(y,c,p){var A=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n])};return function(s,t){d(s,t);function n(){this.constructor=s}s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(18),g=p(1);function v(d,s){if(Object.keys(d).length!==Object.keys(s).length)return!1;for(var t in d)if(d[t]!==s[t])return!1;return!0}var m=function(d){A(s,d);function s(){return d!==null&&d.apply(this,arguments)||this}return s.formats=function(t){if(t.tagName!==s.tagName)return d.formats.call(this,t)},s.prototype.format=function(t,n){var o=this;t===this.statics.blotName&&!n?(this.children.forEach(function(l){l instanceof j.default||(l=l.wrap(s.blotName,!0)),o.attributes.copy(l)}),this.unwrap()):d.prototype.format.call(this,t,n)},s.prototype.formatAt=function(t,n,o,l){if(this.formats()[o]!=null||g.query(o,g.Scope.ATTRIBUTE)){var u=this.isolate(t,n);u.format(o,l)}else d.prototype.formatAt.call(this,t,n,o,l)},s.prototype.optimize=function(t){d.prototype.optimize.call(this,t);var n=this.formats();if(Object.keys(n).length===0)return this.unwrap();var o=this.next;o instanceof s&&o.prev===this&&v(n,o.formats())&&(o.moveChildren(this),o.remove())},s.blotName="inline",s.scope=g.Scope.INLINE_BLOT,s.tagName="SPAN",s}(j.default);c.default=m},function(y,c,p){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var t in s)s.hasOwnProperty(t)&&(d[t]=s[t])};return function(d,s){m(d,s);function t(){this.constructor=d}d.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(18),g=p(1),v=function(m){A(d,m);function d(){return m!==null&&m.apply(this,arguments)||this}return d.formats=function(s){var t=g.query(d.blotName).tagName;if(s.tagName!==t)return m.formats.call(this,s)},d.prototype.format=function(s,t){g.query(s,g.Scope.BLOCK)!=null&&(s===this.statics.blotName&&!t?this.replaceWith(d.blotName):m.prototype.format.call(this,s,t))},d.prototype.formatAt=function(s,t,n,o){g.query(n,g.Scope.BLOCK)!=null?this.format(n,o):m.prototype.formatAt.call(this,s,t,n,o)},d.prototype.insertAt=function(s,t,n){if(n==null||g.query(t,g.Scope.INLINE)!=null)m.prototype.insertAt.call(this,s,t,n);else{var o=this.split(s),l=g.create(t,n);o.parent.insertBefore(l,o)}},d.prototype.update=function(s,t){navigator.userAgent.match(/Trident/)?this.build():m.prototype.update.call(this,s,t)},d.blotName="block",d.scope=g.Scope.BLOCK_BLOT,d.tagName="P",d}(j.default);c.default=v},function(y,c,p){var A=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var s in d)d.hasOwnProperty(s)&&(m[s]=d[s])};return function(m,d){v(m,d);function s(){this.constructor=m}m.prototype=d===null?Object.create(d):(s.prototype=d.prototype,new s)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(19),g=function(v){A(m,v);function m(){return v!==null&&v.apply(this,arguments)||this}return m.formats=function(d){},m.prototype.format=function(d,s){v.prototype.formatAt.call(this,0,this.length(),d,s)},m.prototype.formatAt=function(d,s,t,n){d===0&&s===this.length()?this.format(t,n):v.prototype.formatAt.call(this,d,s,t,n)},m.prototype.formats=function(){return this.statics.formats(this.domNode)},m}(j.default);c.default=g},function(y,c,p){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var t in s)s.hasOwnProperty(t)&&(d[t]=s[t])};return function(d,s){m(d,s);function t(){this.constructor=d}d.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var j=p(19),g=p(1),v=function(m){A(d,m);function d(s){var t=m.call(this,s)||this;return t.text=t.statics.value(t.domNode),t}return d.create=function(s){return document.createTextNode(s)},d.value=function(s){var t=s.data;return t.normalize&&(t=t.normalize()),t},d.prototype.deleteAt=function(s,t){this.domNode.data=this.text=this.text.slice(0,s)+this.text.slice(s+t)},d.prototype.index=function(s,t){return this.domNode===s?t:-1},d.prototype.insertAt=function(s,t,n){n==null?(this.text=this.text.slice(0,s)+t+this.text.slice(s),this.domNode.data=this.text):m.prototype.insertAt.call(this,s,t,n)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(s){m.prototype.optimize.call(this,s),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(s,t){return[this.domNode,s]},d.prototype.split=function(s,t){if(t===void 0&&(t=!1),!t){if(s===0)return this;if(s===this.length())return this.next}var n=g.create(this.domNode.splitText(s));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},d.prototype.update=function(s,t){var n=this;s.some(function(o){return o.type==="characterData"&&o.target===n.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=g.Scope.INLINE_BLOT,d}(j.default);c.default=v},function(y,c,p){var A=document.createElement("div");if(A.classList.toggle("test-class",!1),A.classList.contains("test-class")){var j=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,v){return arguments.length>1&&!this.contains(g)==!v?v:j.call(this,g)}}String.prototype.startsWith||(String.prototype.startsWith=function(g,v){return v=v||0,this.substr(v,g.length)===g}),String.prototype.endsWith||(String.prototype.endsWith=function(g,v){var m=this.toString();(typeof v!="number"||!isFinite(v)||Math.floor(v)!==v||v>m.length)&&(v=m.length),v-=g.length;var d=m.indexOf(g,v);return d!==-1&&d===v}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(v){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof v!="function")throw new TypeError("predicate must be a function");for(var m=Object(this),d=m.length>>>0,s=arguments[1],t,n=0;n<d;n++)if(t=m[n],v.call(s,t,n,m))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(y,c){var p=-1,A=1,j=0;function g(r,f,b){if(r==f)return r?[[j,r]]:[];(b<0||r.length<b)&&(b=null);var N=s(r,f),E=r.substring(0,N);r=r.substring(N),f=f.substring(N),N=t(r,f);var S=r.substring(r.length-N);r=r.substring(0,r.length-N),f=f.substring(0,f.length-N);var w=v(r,f);return E&&w.unshift([j,E]),S&&w.push([j,S]),o(w),b!=null&&(w=a(w,b)),w=i(w),w}function v(r,f){var b;if(!r)return[[A,f]];if(!f)return[[p,r]];var N=r.length>f.length?r:f,E=r.length>f.length?f:r,S=N.indexOf(E);if(S!=-1)return b=[[A,N.substring(0,S)],[j,E],[A,N.substring(S+E.length)]],r.length>f.length&&(b[0][0]=b[2][0]=p),b;if(E.length==1)return[[p,r],[A,f]];var w=n(r,f);if(w){var _=w[0],O=w[1],T=w[2],L=w[3],M=w[4],q=g(_,T),U=g(O,L);return q.concat([[j,M]],U)}return m(r,f)}function m(r,f){for(var b=r.length,N=f.length,E=Math.ceil((b+N)/2),S=E,w=2*E,_=new Array(w),O=new Array(w),T=0;T<w;T++)_[T]=-1,O[T]=-1;_[S+1]=0,O[S+1]=0;for(var L=b-N,M=L%2!=0,q=0,U=0,W=0,H=0,D=0;D<E;D++){for(var P=-D+q;P<=D-U;P+=2){var C=S+P,I;P==-D||P!=D&&_[C-1]<_[C+1]?I=_[C+1]:I=_[C-1]+1;for(var $=I-P;I<b&&$<N&&r.charAt(I)==f.charAt($);)I++,$++;if(_[C]=I,I>b)U+=2;else if($>N)q+=2;else if(M){var F=S+L-P;if(F>=0&&F<w&&O[F]!=-1){var R=b-O[F];if(I>=R)return d(r,f,I,$)}}}for(var B=-D+W;B<=D-H;B+=2){var F=S+B,R;B==-D||B!=D&&O[F-1]<O[F+1]?R=O[F+1]:R=O[F-1]+1;for(var z=R-B;R<b&&z<N&&r.charAt(b-R-1)==f.charAt(N-z-1);)R++,z++;if(O[F]=R,R>b)H+=2;else if(z>N)W+=2;else if(!M){var C=S+L-B;if(C>=0&&C<w&&_[C]!=-1){var I=_[C],$=S+I-C;if(R=b-R,I>=R)return d(r,f,I,$)}}}}return[[p,r],[A,f]]}function d(r,f,b,N){var E=r.substring(0,b),S=f.substring(0,N),w=r.substring(b),_=f.substring(N),O=g(E,S),T=g(w,_);return O.concat(T)}function s(r,f){if(!r||!f||r.charAt(0)!=f.charAt(0))return 0;for(var b=0,N=Math.min(r.length,f.length),E=N,S=0;b<E;)r.substring(S,E)==f.substring(S,E)?(b=E,S=b):N=E,E=Math.floor((N-b)/2+b);return E}function t(r,f){if(!r||!f||r.charAt(r.length-1)!=f.charAt(f.length-1))return 0;for(var b=0,N=Math.min(r.length,f.length),E=N,S=0;b<E;)r.substring(r.length-E,r.length-S)==f.substring(f.length-E,f.length-S)?(b=E,S=b):N=E,E=Math.floor((N-b)/2+b);return E}function n(r,f){var b=r.length>f.length?r:f,N=r.length>f.length?f:r;if(b.length<4||N.length*2<b.length)return null;function E(U,W,H){for(var D=U.substring(H,H+Math.floor(U.length/4)),P=-1,C="",I,$,F,R;(P=W.indexOf(D,P+1))!=-1;){var B=s(U.substring(H),W.substring(P)),z=t(U.substring(0,H),W.substring(0,P));C.length<z+B&&(C=W.substring(P-z,P)+W.substring(P,P+B),I=U.substring(0,H-z),$=U.substring(H+B),F=W.substring(0,P-z),R=W.substring(P+B))}return C.length*2>=U.length?[I,$,F,R,C]:null}var S=E(b,N,Math.ceil(b.length/4)),w=E(b,N,Math.ceil(b.length/2)),_;if(!S&&!w)return null;w?S?_=S[4].length>w[4].length?S:w:_=w:_=S;var O,T,L,M;r.length>f.length?(O=_[0],T=_[1],L=_[2],M=_[3]):(L=_[0],M=_[1],O=_[2],T=_[3]);var q=_[4];return[O,T,L,M,q]}function o(r){r.push([j,""]);for(var f=0,b=0,N=0,E="",S="",w;f<r.length;)switch(r[f][0]){case A:N++,S+=r[f][1],f++;break;case p:b++,E+=r[f][1],f++;break;case j:b+N>1?(b!==0&&N!==0&&(w=s(S,E),w!==0&&(f-b-N>0&&r[f-b-N-1][0]==j?r[f-b-N-1][1]+=S.substring(0,w):(r.splice(0,0,[j,S.substring(0,w)]),f++),S=S.substring(w),E=E.substring(w)),w=t(S,E),w!==0&&(r[f][1]=S.substring(S.length-w)+r[f][1],S=S.substring(0,S.length-w),E=E.substring(0,E.length-w))),b===0?r.splice(f-N,b+N,[A,S]):N===0?r.splice(f-b,b+N,[p,E]):r.splice(f-b-N,b+N,[p,E],[A,S]),f=f-b-N+(b?1:0)+(N?1:0)+1):f!==0&&r[f-1][0]==j?(r[f-1][1]+=r[f][1],r.splice(f,1)):f++,N=0,b=0,E="",S="";break}r[r.length-1][1]===""&&r.pop();var _=!1;for(f=1;f<r.length-1;)r[f-1][0]==j&&r[f+1][0]==j&&(r[f][1].substring(r[f][1].length-r[f-1][1].length)==r[f-1][1]?(r[f][1]=r[f-1][1]+r[f][1].substring(0,r[f][1].length-r[f-1][1].length),r[f+1][1]=r[f-1][1]+r[f+1][1],r.splice(f-1,1),_=!0):r[f][1].substring(0,r[f+1][1].length)==r[f+1][1]&&(r[f-1][1]+=r[f+1][1],r[f][1]=r[f][1].substring(r[f+1][1].length)+r[f+1][1],r.splice(f+1,1),_=!0)),f++;_&&o(r)}var l=g;l.INSERT=A,l.DELETE=p,l.EQUAL=j,y.exports=l;function u(r,f){if(f===0)return[j,r];for(var b=0,N=0;N<r.length;N++){var E=r[N];if(E[0]===p||E[0]===j){var S=b+E[1].length;if(f===S)return[N+1,r];if(f<S){r=r.slice();var w=f-b,_=[E[0],E[1].slice(0,w)],O=[E[0],E[1].slice(w)];return r.splice(N,1,_,O),[N+1,r]}else b=S}}throw new Error("cursor_pos is out of bounds!")}function a(r,f){var b=u(r,f),N=b[1],E=b[0],S=N[E],w=N[E+1];if(S==null)return r;if(S[0]!==j)return r;if(w!=null&&S[1]+w[1]===w[1]+S[1])return N.splice(E,2,w,S),h(N,E,2);if(w!=null&&w[1].indexOf(S[1])===0){N.splice(E,2,[w[0],S[1]],[0,S[1]]);var _=w[1].slice(S[1].length);return _.length>0&&N.splice(E+2,0,[w[0],_]),h(N,E,3)}else return r}function i(r){for(var f=!1,b=function(w){return w.charCodeAt(0)>=56320&&w.charCodeAt(0)<=57343},N=function(w){return w.charCodeAt(w.length-1)>=55296&&w.charCodeAt(w.length-1)<=56319},E=2;E<r.length;E+=1)r[E-2][0]===j&&N(r[E-2][1])&&r[E-1][0]===p&&b(r[E-1][1])&&r[E][0]===A&&b(r[E][1])&&(f=!0,r[E-1][1]=r[E-2][1].slice(-1)+r[E-1][1],r[E][1]=r[E-2][1].slice(-1)+r[E][1],r[E-2][1]=r[E-2][1].slice(0,-1));if(!f)return r;for(var S=[],E=0;E<r.length;E+=1)r[E][1].length>0&&S.push(r[E]);return S}function h(r,f,b){for(var N=f+b-1;N>=0&&N>=f-1;N--)if(N+1<r.length){var E=r[N],S=r[N+1];E[0]===S[1]&&r.splice(N,2,[E[0],E[1]+S[1]])}return r}},function(y,c){c=y.exports=typeof Object.keys=="function"?Object.keys:p,c.shim=p;function p(A){var j=[];for(var g in A)j.push(g);return j}},function(y,c){var p=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";c=y.exports=p?A:j,c.supported=A;function A(g){return Object.prototype.toString.call(g)=="[object Arguments]"}c.unsupported=j;function j(g){return g&&typeof g=="object"&&typeof g.length=="number"&&Object.prototype.hasOwnProperty.call(g,"callee")&&!Object.prototype.propertyIsEnumerable.call(g,"callee")||!1}},function(y,c){var p=Object.prototype.hasOwnProperty,A="~";function j(){}Object.create&&(j.prototype=Object.create(null),new j().__proto__||(A=!1));function g(m,d,s){this.fn=m,this.context=d,this.once=s||!1}function v(){this._events=new j,this._eventsCount=0}v.prototype.eventNames=function(){var d=[],s,t;if(this._eventsCount===0)return d;for(t in s=this._events)p.call(s,t)&&d.push(A?t.slice(1):t);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(s)):d},v.prototype.listeners=function(d,s){var t=A?A+d:d,n=this._events[t];if(s)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,l=n.length,u=new Array(l);o<l;o++)u[o]=n[o].fn;return u},v.prototype.emit=function(d,s,t,n,o,l){var u=A?A+d:d;if(!this._events[u])return!1;var a=this._events[u],i=arguments.length,h,r;if(a.fn){switch(a.once&&this.removeListener(d,a.fn,void 0,!0),i){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,s),!0;case 3:return a.fn.call(a.context,s,t),!0;case 4:return a.fn.call(a.context,s,t,n),!0;case 5:return a.fn.call(a.context,s,t,n,o),!0;case 6:return a.fn.call(a.context,s,t,n,o,l),!0}for(r=1,h=new Array(i-1);r<i;r++)h[r-1]=arguments[r];a.fn.apply(a.context,h)}else{var f=a.length,b;for(r=0;r<f;r++)switch(a[r].once&&this.removeListener(d,a[r].fn,void 0,!0),i){case 1:a[r].fn.call(a[r].context);break;case 2:a[r].fn.call(a[r].context,s);break;case 3:a[r].fn.call(a[r].context,s,t);break;case 4:a[r].fn.call(a[r].context,s,t,n);break;default:if(!h)for(b=1,h=new Array(i-1);b<i;b++)h[b-1]=arguments[b];a[r].fn.apply(a[r].context,h)}}return!0},v.prototype.on=function(d,s,t){var n=new g(s,t||this),o=A?A+d:d;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},v.prototype.once=function(d,s,t){var n=new g(s,t||this,!0),o=A?A+d:d;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},v.prototype.removeListener=function(d,s,t,n){var o=A?A+d:d;if(!this._events[o])return this;if(!s)return--this._eventsCount===0?this._events=new j:delete this._events[o],this;var l=this._events[o];if(l.fn)l.fn===s&&(!n||l.once)&&(!t||l.context===t)&&(--this._eventsCount===0?this._events=new j:delete this._events[o]);else{for(var u=0,a=[],i=l.length;u<i;u++)(l[u].fn!==s||n&&!l[u].once||t&&l[u].context!==t)&&a.push(l[u]);a.length?this._events[o]=a.length===1?a[0]:a:--this._eventsCount===0?this._events=new j:delete this._events[o]}return this},v.prototype.removeAllListeners=function(d){var s;return d?(s=A?A+d:d,this._events[s]&&(--this._eventsCount===0?this._events=new j:delete this._events[s])):(this._events=new j,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prototype.setMaxListeners=function(){return this},v.prefixed=A,v.EventEmitter=v,typeof y<"u"&&(y.exports=v)},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.matchText=c.matchSpacing=c.matchNewline=c.matchBlot=c.matchAttributor=c.default=void 0;var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},j=function(){function K(X,Q){var ee=[],Z=!0,le=!1,ue=void 0;try{for(var ce=X[Symbol.iterator](),Pe;!(Z=(Pe=ce.next()).done)&&(ee.push(Pe.value),!(Q&&ee.length===Q));Z=!0);}catch(ze){le=!0,ue=ze}finally{try{!Z&&ce.return&&ce.return()}finally{if(le)throw ue}}return ee}return function(X,Q){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return K(X,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function K(X,Q){for(var ee=0;ee<Q.length;ee++){var Z=Q[ee];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(X,Z.key,Z)}}return function(X,Q,ee){return Q&&K(X.prototype,Q),ee&&K(X,ee),X}}(),v=p(3),m=O(v),d=p(2),s=O(d),t=p(0),n=O(t),o=p(5),l=O(o),u=p(10),a=O(u),i=p(9),h=O(i),r=p(36),f=p(37),b=p(13),N=O(b),E=p(26),S=p(38),w=p(39),_=p(40);function O(K){return K&&K.__esModule?K:{default:K}}function T(K,X,Q){return X in K?Object.defineProperty(K,X,{value:Q,enumerable:!0,configurable:!0,writable:!0}):K[X]=Q,K}function L(K,X){if(!(K instanceof X))throw new TypeError("Cannot call a class as a function")}function M(K,X){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:K}function q(K,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);K.prototype=Object.create(X&&X.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(K,X):K.__proto__=X)}var U=(0,a.default)("quill:clipboard"),W="__ql-matcher",H=[[Node.TEXT_NODE,xe],[Node.TEXT_NODE,he],["br",te],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,Y],[Node.ELEMENT_NODE,pe],[Node.ELEMENT_NODE,V],[Node.ELEMENT_NODE,Ae],["li",oe],["b",z.bind(z,"bold")],["i",z.bind(z,"italic")],["style",ie]],D=[r.AlignAttribute,S.DirectionAttribute].reduce(function(K,X){return K[X.keyName]=X,K},{}),P=[r.AlignStyle,f.BackgroundStyle,E.ColorStyle,S.DirectionStyle,w.FontStyle,_.SizeStyle].reduce(function(K,X){return K[X.keyName]=X,K},{}),C=function(K){q(X,K);function X(Q,ee){L(this,X);var Z=M(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,Q,ee));return Z.quill.root.addEventListener("paste",Z.onPaste.bind(Z)),Z.container=Z.quill.addContainer("ql-clipboard"),Z.container.setAttribute("contenteditable",!0),Z.container.setAttribute("tabindex",-1),Z.matchers=[],H.concat(Z.options.matchers).forEach(function(le){var ue=j(le,2),ce=ue[0],Pe=ue[1];!ee.matchVisual&&Pe===pe||Z.addMatcher(ce,Pe)}),Z}return g(X,[{key:"addMatcher",value:function(ee,Z){this.matchers.push([ee,Z])}},{key:"convert",value:function(ee){if(typeof ee=="string")return this.container.innerHTML=ee.replace(/\>\r?\n +\</g,"><"),this.convert();var Z=this.quill.getFormat(this.quill.selection.savedRange.index);if(Z[N.default.blotName]){var le=this.container.innerText;return this.container.innerHTML="",new s.default().insert(le,T({},N.default.blotName,Z[N.default.blotName]))}var ue=this.prepareMatching(),ce=j(ue,2),Pe=ce[0],ze=ce[1],me=B(this.container,Pe,ze);return F(me,`
`)&&me.ops[me.ops.length-1].attributes==null&&(me=me.compose(new s.default().retain(me.length()-1).delete(1))),U.log("convert",this.container.innerHTML,me),this.container.innerHTML="",me}},{key:"dangerouslyPasteHTML",value:function(ee,Z){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.default.sources.API;if(typeof ee=="string")this.quill.setContents(this.convert(ee),Z),this.quill.setSelection(0,l.default.sources.SILENT);else{var ue=this.convert(Z);this.quill.updateContents(new s.default().retain(ee).concat(ue),le),this.quill.setSelection(ee+ue.length(),l.default.sources.SILENT)}}},{key:"onPaste",value:function(ee){var Z=this;if(!(ee.defaultPrevented||!this.quill.isEnabled())){var le=this.quill.getSelection(),ue=new s.default().retain(le.index),ce=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(l.default.sources.SILENT),setTimeout(function(){ue=ue.concat(Z.convert()).delete(le.length),Z.quill.updateContents(ue,l.default.sources.USER),Z.quill.setSelection(ue.length()-le.length,l.default.sources.SILENT),Z.quill.scrollingContainer.scrollTop=ce,Z.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ee=this,Z=[],le=[];return this.matchers.forEach(function(ue){var ce=j(ue,2),Pe=ce[0],ze=ce[1];switch(Pe){case Node.TEXT_NODE:le.push(ze);break;case Node.ELEMENT_NODE:Z.push(ze);break;default:[].forEach.call(ee.container.querySelectorAll(Pe),function(me){me[W]=me[W]||[],me[W].push(ze)});break}}),[Z,le]}}]),X}(h.default);C.DEFAULTS={matchers:[],matchVisual:!0};function I(K,X,Q){return(typeof X>"u"?"undefined":A(X))==="object"?Object.keys(X).reduce(function(ee,Z){return I(ee,Z,X[Z])},K):K.reduce(function(ee,Z){return Z.attributes&&Z.attributes[X]?ee.push(Z):ee.insert(Z.insert,(0,m.default)({},T({},X,Q),Z.attributes))},new s.default)}function $(K){if(K.nodeType!==Node.ELEMENT_NODE)return{};var X="__ql-computed-style";return K[X]||(K[X]=window.getComputedStyle(K))}function F(K,X){for(var Q="",ee=K.ops.length-1;ee>=0&&Q.length<X.length;--ee){var Z=K.ops[ee];if(typeof Z.insert!="string")break;Q=Z.insert+Q}return Q.slice(-1*X.length)===X}function R(K){if(K.childNodes.length===0)return!1;var X=$(K);return["block","list-item"].indexOf(X.display)>-1}function B(K,X,Q){return K.nodeType===K.TEXT_NODE?Q.reduce(function(ee,Z){return Z(K,ee)},new s.default):K.nodeType===K.ELEMENT_NODE?[].reduce.call(K.childNodes||[],function(ee,Z){var le=B(Z,X,Q);return Z.nodeType===K.ELEMENT_NODE&&(le=X.reduce(function(ue,ce){return ce(Z,ue)},le),le=(Z[W]||[]).reduce(function(ue,ce){return ce(Z,ue)},le)),ee.concat(le)},new s.default):new s.default}function z(K,X,Q){return I(Q,K,!0)}function V(K,X){var Q=n.default.Attributor.Attribute.keys(K),ee=n.default.Attributor.Class.keys(K),Z=n.default.Attributor.Style.keys(K),le={};return Q.concat(ee).concat(Z).forEach(function(ue){var ce=n.default.query(ue,n.default.Scope.ATTRIBUTE);ce!=null&&(le[ce.attrName]=ce.value(K),le[ce.attrName])||(ce=D[ue],ce!=null&&(ce.attrName===ue||ce.keyName===ue)&&(le[ce.attrName]=ce.value(K)||void 0),ce=P[ue],ce!=null&&(ce.attrName===ue||ce.keyName===ue)&&(ce=P[ue],le[ce.attrName]=ce.value(K)||void 0))}),Object.keys(le).length>0&&(X=I(X,le)),X}function Y(K,X){var Q=n.default.query(K);if(Q==null)return X;if(Q.prototype instanceof n.default.Embed){var ee={},Z=Q.value(K);Z!=null&&(ee[Q.blotName]=Z,X=new s.default().insert(ee,Q.formats(K)))}else typeof Q.formats=="function"&&(X=I(X,Q.blotName,Q.formats(K)));return X}function te(K,X){return F(X,`
`)||X.insert(`
`),X}function ie(){return new s.default}function oe(K,X){var Q=n.default.query(K);if(Q==null||Q.blotName!=="list-item"||!F(X,`
`))return X;for(var ee=-1,Z=K.parentNode;!Z.classList.contains("ql-clipboard");)(n.default.query(Z)||{}).blotName==="list"&&(ee+=1),Z=Z.parentNode;return ee<=0?X:X.compose(new s.default().retain(X.length()-1).retain(1,{indent:ee}))}function he(K,X){return F(X,`
`)||(R(K)||X.length()>0&&K.nextSibling&&R(K.nextSibling))&&X.insert(`
`),X}function pe(K,X){if(R(K)&&K.nextElementSibling!=null&&!F(X,`

`)){var Q=K.offsetHeight+parseFloat($(K).marginTop)+parseFloat($(K).marginBottom);K.nextElementSibling.offsetTop>K.offsetTop+Q*1.5&&X.insert(`
`)}return X}function Ae(K,X){var Q={},ee=K.style||{};return ee.fontStyle&&$(K).fontStyle==="italic"&&(Q.italic=!0),ee.fontWeight&&($(K).fontWeight.startsWith("bold")||parseInt($(K).fontWeight)>=700)&&(Q.bold=!0),Object.keys(Q).length>0&&(X=I(X,Q)),parseFloat(ee.textIndent||0)>0&&(X=new s.default().insert("	").concat(X)),X}function xe(K,X){var Q=K.data;if(K.parentNode.tagName==="O:P")return X.insert(Q.trim());if(Q.trim().length===0&&K.parentNode.classList.contains("ql-clipboard"))return X;if(!$(K.parentNode).whiteSpace.startsWith("pre")){var ee=function(le,ue){return ue=ue.replace(/[^\u00a0]/g,""),ue.length<1&&le?" ":ue};Q=Q.replace(/\r\n/g," ").replace(/\n/g," "),Q=Q.replace(/\s\s+/g,ee.bind(ee,!0)),(K.previousSibling==null&&R(K.parentNode)||K.previousSibling!=null&&R(K.previousSibling))&&(Q=Q.replace(/^\s+/,ee.bind(ee,!1))),(K.nextSibling==null&&R(K.parentNode)||K.nextSibling!=null&&R(K.nextSibling))&&(Q=Q.replace(/\s+$/,ee.bind(ee,!1)))}return X.insert(Q)}c.default=C,c.matchAttributor=V,c.matchBlot=Y,c.matchNewline=he,c.matchSpacing=pe,c.matchText=xe},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function o(l,u){for(var a=0;a<u.length;a++){var i=u[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}return function(l,u,a){return u&&o(l.prototype,u),a&&o(l,a),l}}(),j=function o(l,u,a){l===null&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(i===void 0){var h=Object.getPrototypeOf(l);return h===null?void 0:o(h,u,a)}else{if("value"in i)return i.value;var r=i.get;return r===void 0?void 0:r.call(a)}},g=p(6),v=m(g);function m(o){return o&&o.__esModule?o:{default:o}}function d(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function s(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=function(o){t(l,o);function l(){return d(this,l),s(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return A(l,[{key:"optimize",value:function(a){j(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"optimize",this).call(this,a),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return j(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),l}(v.default);n.blotName="bold",n.tagName=["STRONG","B"],c.default=n},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.addControls=c.default=void 0;var A=function(){function _(O,T){var L=[],M=!0,q=!1,U=void 0;try{for(var W=O[Symbol.iterator](),H;!(M=(H=W.next()).done)&&(L.push(H.value),!(T&&L.length===T));M=!0);}catch(D){q=!0,U=D}finally{try{!M&&W.return&&W.return()}finally{if(q)throw U}}return L}return function(O,T){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return _(O,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function _(O,T){for(var L=0;L<T.length;L++){var M=T[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}return function(O,T,L){return T&&_(O.prototype,T),L&&_(O,L),O}}(),g=p(2),v=a(g),m=p(0),d=a(m),s=p(5),t=a(s),n=p(10),o=a(n),l=p(9),u=a(l);function a(_){return _&&_.__esModule?_:{default:_}}function i(_,O,T){return O in _?Object.defineProperty(_,O,{value:T,enumerable:!0,configurable:!0,writable:!0}):_[O]=T,_}function h(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}function r(_,O){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:_}function f(_,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);_.prototype=Object.create(O&&O.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(_,O):_.__proto__=O)}var b=(0,o.default)("quill:toolbar"),N=function(_){f(O,_);function O(T,L){h(this,O);var M=r(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,T,L));if(Array.isArray(M.options.container)){var q=document.createElement("div");S(q,M.options.container),T.container.parentNode.insertBefore(q,T.container),M.container=q}else typeof M.options.container=="string"?M.container=document.querySelector(M.options.container):M.container=M.options.container;if(!(M.container instanceof HTMLElement)){var U;return U=b.error("Container required for toolbar",M.options),r(M,U)}return M.container.classList.add("ql-toolbar"),M.controls=[],M.handlers={},Object.keys(M.options.handlers).forEach(function(W){M.addHandler(W,M.options.handlers[W])}),[].forEach.call(M.container.querySelectorAll("button, select"),function(W){M.attach(W)}),M.quill.on(t.default.events.EDITOR_CHANGE,function(W,H){W===t.default.events.SELECTION_CHANGE&&M.update(H)}),M.quill.on(t.default.events.SCROLL_OPTIMIZE,function(){var W=M.quill.selection.getRange(),H=A(W,1),D=H[0];M.update(D)}),M}return j(O,[{key:"addHandler",value:function(L,M){this.handlers[L]=M}},{key:"attach",value:function(L){var M=this,q=[].find.call(L.classList,function(W){return W.indexOf("ql-")===0});if(q){if(q=q.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[q]==null){b.warn("ignoring attaching to disabled format",q,L);return}if(d.default.query(q)==null){b.warn("ignoring attaching to nonexistent format",q,L);return}}var U=L.tagName==="SELECT"?"change":"click";L.addEventListener(U,function(W){var H=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var D=L.options[L.selectedIndex];D.hasAttribute("selected")?H=!1:H=D.value||!1}else L.classList.contains("ql-active")?H=!1:H=L.value||!L.hasAttribute("value"),W.preventDefault();M.quill.focus();var P=M.quill.selection.getRange(),C=A(P,1),I=C[0];if(M.handlers[q]!=null)M.handlers[q].call(M,H);else if(d.default.query(q).prototype instanceof d.default.Embed){if(H=prompt("Enter "+q),!H)return;M.quill.updateContents(new v.default().retain(I.index).delete(I.length).insert(i({},q,H)),t.default.sources.USER)}else M.quill.format(q,H,t.default.sources.USER);M.update(I)}),this.controls.push([q,L])}}},{key:"update",value:function(L){var M=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(q){var U=A(q,2),W=U[0],H=U[1];if(H.tagName==="SELECT"){var D=void 0;if(L==null)D=null;else if(M[W]==null)D=H.querySelector("option[selected]");else if(!Array.isArray(M[W])){var P=M[W];typeof P=="string"&&(P=P.replace(/\"/g,'\\"')),D=H.querySelector('option[value="'+P+'"]')}D==null?(H.value="",H.selectedIndex=-1):D.selected=!0}else if(L==null)H.classList.remove("ql-active");else if(H.hasAttribute("value")){var C=M[W]===H.getAttribute("value")||M[W]!=null&&M[W].toString()===H.getAttribute("value")||M[W]==null&&!H.getAttribute("value");H.classList.toggle("ql-active",C)}else H.classList.toggle("ql-active",M[W]!=null)})}}]),O}(u.default);N.DEFAULTS={};function E(_,O,T){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+O),T!=null&&(L.value=T),_.appendChild(L)}function S(_,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(T){var L=document.createElement("span");L.classList.add("ql-formats"),T.forEach(function(M){if(typeof M=="string")E(L,M);else{var q=Object.keys(M)[0],U=M[q];Array.isArray(U)?w(L,q,U):E(L,q,U)}}),_.appendChild(L)})}function w(_,O,T){var L=document.createElement("select");L.classList.add("ql-"+O),T.forEach(function(M){var q=document.createElement("option");M!==!1?q.setAttribute("value",M):q.setAttribute("selected","selected"),L.appendChild(q)}),_.appendChild(L)}N.DEFAULTS={container:null,handlers:{clean:function(){var O=this,T=this.quill.getSelection();if(T!=null)if(T.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(M){d.default.query(M,d.default.Scope.INLINE)!=null&&O.quill.format(M,!1)})}else this.quill.removeFormat(T,t.default.sources.USER)},direction:function(O){var T=this.quill.getFormat().align;O==="rtl"&&T==null?this.quill.format("align","right",t.default.sources.USER):!O&&T==="right"&&this.quill.format("align",!1,t.default.sources.USER),this.quill.format("direction",O,t.default.sources.USER)},indent:function(O){var T=this.quill.getSelection(),L=this.quill.getFormat(T),M=parseInt(L.indent||0);if(O==="+1"||O==="-1"){var q=O==="+1"?1:-1;L.direction==="rtl"&&(q*=-1),this.quill.format("indent",M+q,t.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,t.default.sources.USER)},list:function(O){var T=this.quill.getSelection(),L=this.quill.getFormat(T);O==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,t.default.sources.USER):this.quill.format("list","unchecked",t.default.sources.USER):this.quill.format("list",O,t.default.sources.USER)}}},c.default=N,c.addControls=S},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function o(l,u){for(var a=0;a<u.length;a++){var i=u[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}return function(l,u,a){return u&&o(l.prototype,u),a&&o(l,a),l}}(),j=function o(l,u,a){l===null&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(i===void 0){var h=Object.getPrototypeOf(l);return h===null?void 0:o(h,u,a)}else{if("value"in i)return i.value;var r=i.get;return r===void 0?void 0:r.call(a)}},g=p(28),v=m(g);function m(o){return o&&o.__esModule?o:{default:o}}function d(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function s(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=function(o){t(l,o);function l(u,a){d(this,l);var i=s(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,u));return i.label.innerHTML=a,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(h){h.classList.add("ql-primary")}),i}return A(l,[{key:"buildItem",value:function(a){var i=j(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"buildItem",this).call(this,a);return i.style.backgroundColor=a.getAttribute("value")||"",i}},{key:"selectItem",value:function(a,i){j(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"selectItem",this).call(this,a,i);var h=this.label.querySelector(".ql-color-label"),r=a&&a.getAttribute("data-value")||"";h&&(h.tagName==="line"?h.style.stroke=r:h.style.fill=r)}}]),l}(v.default);c.default=n},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function o(l,u){for(var a=0;a<u.length;a++){var i=u[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}return function(l,u,a){return u&&o(l.prototype,u),a&&o(l,a),l}}(),j=function o(l,u,a){l===null&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(i===void 0){var h=Object.getPrototypeOf(l);return h===null?void 0:o(h,u,a)}else{if("value"in i)return i.value;var r=i.get;return r===void 0?void 0:r.call(a)}},g=p(28),v=m(g);function m(o){return o&&o.__esModule?o:{default:o}}function d(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function s(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=function(o){t(l,o);function l(u,a){d(this,l);var i=s(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,u));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),function(h){h.innerHTML=a[h.getAttribute("data-value")||""]}),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return A(l,[{key:"selectItem",value:function(a,i){j(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"selectItem",this).call(this,a,i),a=a||this.defaultItem,this.label.innerHTML=a.innerHTML}}]),l}(v.default);c.default=n},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function v(m,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(m,t.key,t)}}return function(m,d,s){return d&&v(m.prototype,d),s&&v(m,s),m}}();function j(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}var g=function(){function v(m,d){var s=this;j(this,v),this.quill=m,this.boundsContainer=d||document.body,this.root=m.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){s.root.style.marginTop=-1*s.quill.root.scrollTop+"px"}),this.hide()}return A(v,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var s=d.left+d.width/2-this.root.offsetWidth/2,t=d.bottom+this.quill.root.scrollTop;this.root.style.left=s+"px",this.root.style.top=t+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),l=0;if(o.right>n.right&&(l=n.right-o.right,this.root.style.left=s+l+"px"),o.left<n.left&&(l=n.left-o.left,this.root.style.left=s+l+"px"),o.bottom>n.bottom){var u=o.bottom-o.top,a=d.bottom-d.top+u;this.root.style.top=t-a+"px",this.root.classList.add("ql-flip")}return l}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),v}();c.default=g},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function w(_,O){var T=[],L=!0,M=!1,q=void 0;try{for(var U=_[Symbol.iterator](),W;!(L=(W=U.next()).done)&&(T.push(W.value),!(O&&T.length===O));L=!0);}catch(H){M=!0,q=H}finally{try{!L&&U.return&&U.return()}finally{if(M)throw q}}return T}return function(_,O){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return w(_,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function w(_,O,T){_===null&&(_=Function.prototype);var L=Object.getOwnPropertyDescriptor(_,O);if(L===void 0){var M=Object.getPrototypeOf(_);return M===null?void 0:w(M,O,T)}else{if("value"in L)return L.value;var q=L.get;return q===void 0?void 0:q.call(T)}},g=function(){function w(_,O){for(var T=0;T<O.length;T++){var L=O[T];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(_,L.key,L)}}return function(_,O,T){return O&&w(_.prototype,O),T&&w(_,T),_}}(),v=p(3),m=h(v),d=p(8),s=h(d),t=p(43),n=h(t),o=p(27),l=h(o),u=p(15),a=p(41),i=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function r(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function f(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function b(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var N=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(w){b(_,w);function _(O,T){r(this,_),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=N);var L=f(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,O,T));return L.quill.container.classList.add("ql-snow"),L}return g(_,[{key:"extendToolbar",value:function(T){T.container.classList.add("ql-snow"),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),i.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),i.default),this.tooltip=new S(this.quill,this.options.bounds),T.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,M){T.handlers.link.call(T,!M.format.link)})}}]),_}(n.default);E.DEFAULTS=(0,m.default)(!0,{},n.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){if(_){var O=this.quill.getSelection();if(O==null||O.length==0)return;var T=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(T)&&T.indexOf("mailto:")!==0&&(T="mailto:"+T);var L=this.quill.theme.tooltip;L.edit("link",T)}else this.quill.format("link",!1)}}}}});var S=function(w){b(_,w);function _(O,T){r(this,_);var L=f(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,O,T));return L.preview=L.root.querySelector("a.ql-preview"),L}return g(_,[{key:"listen",value:function(){var T=this;j(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){T.root.classList.contains("ql-editing")?T.save():T.edit("link",T.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(T.linkRange!=null){var M=T.linkRange;T.restoreFocus(),T.quill.formatText(M,"link",!1,s.default.sources.USER),delete T.linkRange}L.preventDefault(),T.hide()}),this.quill.on(s.default.events.SELECTION_CHANGE,function(L,M,q){if(L!=null){if(L.length===0&&q===s.default.sources.USER){var U=T.quill.scroll.descendant(l.default,L.index),W=A(U,2),H=W[0],D=W[1];if(H!=null){T.linkRange=new u.Range(L.index-D,H.length());var P=l.default.formats(H.domNode);T.preview.textContent=P,T.preview.setAttribute("href",P),T.show(),T.position(T.quill.getBounds(T.linkRange));return}}else delete T.linkRange;T.hide()}})}},{key:"show",value:function(){j(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),_}(t.BaseTooltip);S.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),c.default=E},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(29),j=Z(A),g=p(36),v=p(38),m=p(64),d=p(65),s=Z(d),t=p(66),n=Z(t),o=p(67),l=Z(o),u=p(37),a=p(26),i=p(39),h=p(40),r=p(56),f=Z(r),b=p(68),N=Z(b),E=p(27),S=Z(E),w=p(69),_=Z(w),O=p(70),T=Z(O),L=p(71),M=Z(L),q=p(72),U=Z(q),W=p(73),H=Z(W),D=p(13),P=Z(D),C=p(74),I=Z(C),$=p(75),F=Z($),R=p(57),B=Z(R),z=p(41),V=Z(z),Y=p(28),te=Z(Y),ie=p(59),oe=Z(ie),he=p(60),pe=Z(he),Ae=p(61),xe=Z(Ae),K=p(108),X=Z(K),Q=p(62),ee=Z(Q);function Z(le){return le&&le.__esModule?le:{default:le}}j.default.register({"attributors/attribute/direction":v.DirectionAttribute,"attributors/class/align":g.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":a.ColorClass,"attributors/class/direction":v.DirectionClass,"attributors/class/font":i.FontClass,"attributors/class/size":h.SizeClass,"attributors/style/align":g.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":a.ColorStyle,"attributors/style/direction":v.DirectionStyle,"attributors/style/font":i.FontStyle,"attributors/style/size":h.SizeStyle},!0),j.default.register({"formats/align":g.AlignClass,"formats/direction":v.DirectionClass,"formats/indent":m.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":a.ColorStyle,"formats/font":i.FontClass,"formats/size":h.SizeClass,"formats/blockquote":s.default,"formats/code-block":P.default,"formats/header":n.default,"formats/list":l.default,"formats/bold":f.default,"formats/code":D.Code,"formats/italic":N.default,"formats/link":S.default,"formats/script":_.default,"formats/strike":T.default,"formats/underline":M.default,"formats/image":U.default,"formats/video":H.default,"formats/list/item":o.ListItem,"modules/formula":I.default,"modules/syntax":F.default,"modules/toolbar":B.default,"themes/bubble":X.default,"themes/snow":ee.default,"ui/icons":V.default,"ui/picker":te.default,"ui/icon-picker":pe.default,"ui/color-picker":oe.default,"ui/tooltip":xe.default},!0),c.default=j.default},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.IndentClass=void 0;var A=function(){function l(u,a){for(var i=0;i<a.length;i++){var h=a[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,a,i){return a&&l(u.prototype,a),i&&l(u,i),u}}(),j=function l(u,a,i){u===null&&(u=Function.prototype);var h=Object.getOwnPropertyDescriptor(u,a);if(h===void 0){var r=Object.getPrototypeOf(u);return r===null?void 0:l(r,a,i)}else{if("value"in h)return h.value;var f=h.get;return f===void 0?void 0:f.call(i)}},g=p(0),v=m(g);function m(l){return l&&l.__esModule?l:{default:l}}function d(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function s(l,u){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:l}function t(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);l.prototype=Object.create(u&&u.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(l,u):l.__proto__=u)}var n=function(l){t(u,l);function u(){return d(this,u),s(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return A(u,[{key:"add",value:function(i,h){if(h==="+1"||h==="-1"){var r=this.value(i)||0;h=h==="+1"?r+1:r-1}return h===0?(this.remove(i),!0):j(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"add",this).call(this,i,h)}},{key:"canAdd",value:function(i,h){return j(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"canAdd",this).call(this,i,h)||j(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"canAdd",this).call(this,i,parseInt(h))}},{key:"value",value:function(i){return parseInt(j(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,i))||void 0}}]),u}(v.default.Attributor.Class),o=new n("indent","ql-indent",{scope:v.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});c.IndentClass=o},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(4),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}function v(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function d(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){d(n,t);function n(){return v(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(j.default);s.blotName="blockquote",s.tagName="blockquote",c.default=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function n(o,l){for(var u=0;u<l.length;u++){var a=l[u];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}return function(o,l,u){return l&&n(o.prototype,l),u&&n(o,u),o}}(),j=p(4),g=v(j);function v(n){return n&&n.__esModule?n:{default:n}}function m(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function d(n,o){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:n}function s(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(n,o):n.__proto__=o)}var t=function(n){s(o,n);function o(){return m(this,o),d(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return A(o,null,[{key:"formats",value:function(u){return this.tagName.indexOf(u.tagName)+1}}]),o}(g.default);t.blotName="header",t.tagName=["H1","H2","H3","H4","H5","H6"],c.default=t},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.ListItem=void 0;var A=function(){function r(f,b){for(var N=0;N<b.length;N++){var E=b[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,E.key,E)}}return function(f,b,N){return b&&r(f.prototype,b),N&&r(f,N),f}}(),j=function r(f,b,N){f===null&&(f=Function.prototype);var E=Object.getOwnPropertyDescriptor(f,b);if(E===void 0){var S=Object.getPrototypeOf(f);return S===null?void 0:r(S,b,N)}else{if("value"in E)return E.value;var w=E.get;return w===void 0?void 0:w.call(N)}},g=p(0),v=n(g),m=p(4),d=n(m),s=p(25),t=n(s);function n(r){return r&&r.__esModule?r:{default:r}}function o(r,f,b){return f in r?Object.defineProperty(r,f,{value:b,enumerable:!0,configurable:!0,writable:!0}):r[f]=b,r}function l(r,f){if(!(r instanceof f))throw new TypeError("Cannot call a class as a function")}function u(r,f){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:r}function a(r,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);r.prototype=Object.create(f&&f.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(r,f):r.__proto__=f)}var i=function(r){a(f,r);function f(){return l(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return A(f,[{key:"format",value:function(N,E){N===h.blotName&&!E?this.replaceWith(v.default.create(this.statics.scope)):j(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,N,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():j(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(N,E){return this.parent.isolate(this.offset(this.parent),this.length()),N===this.parent.statics.blotName?(this.parent.replaceWith(N,E),this):(this.parent.unwrap(),j(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"replaceWith",this).call(this,N,E))}}],[{key:"formats",value:function(N){return N.tagName===this.tagName?void 0:j(f.__proto__||Object.getPrototypeOf(f),"formats",this).call(this,N)}}]),f}(d.default);i.blotName="list-item",i.tagName="LI";var h=function(r){a(f,r),A(f,null,[{key:"create",value:function(N){var E=N==="ordered"?"OL":"UL",S=j(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,E);return(N==="checked"||N==="unchecked")&&S.setAttribute("data-checked",N==="checked"),S}},{key:"formats",value:function(N){if(N.tagName==="OL")return"ordered";if(N.tagName==="UL")return N.hasAttribute("data-checked")?N.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function f(b){l(this,f);var N=u(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,b)),E=function(w){if(w.target.parentNode===b){var _=N.statics.formats(b),O=v.default.find(w.target);_==="checked"?O.format("list","unchecked"):_==="unchecked"&&O.format("list","checked")}};return b.addEventListener("touchstart",E),b.addEventListener("mousedown",E),N}return A(f,[{key:"format",value:function(N,E){this.children.length>0&&this.children.tail.format(N,E)}},{key:"formats",value:function(){return o({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(N,E){if(N instanceof i)j(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"insertBefore",this).call(this,N,E);else{var S=E==null?this.length():E.offset(this),w=this.split(S);w.parent.insertBefore(N,w)}}},{key:"optimize",value:function(N){j(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,N);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(N){if(N.statics.blotName!==this.statics.blotName){var E=v.default.create(this.statics.defaultChild);N.moveChildren(E),this.appendChild(E)}j(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"replace",this).call(this,N)}}]),f}(t.default);h.blotName="list",h.scope=v.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[i],c.ListItem=i,c.default=h},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(56),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}function v(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function d(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){d(n,t);function n(){return v(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(j.default);s.blotName="italic",s.tagName=["EM","I"],c.default=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function o(l,u){for(var a=0;a<u.length;a++){var i=u[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}return function(l,u,a){return u&&o(l.prototype,u),a&&o(l,a),l}}(),j=function o(l,u,a){l===null&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(i===void 0){var h=Object.getPrototypeOf(l);return h===null?void 0:o(h,u,a)}else{if("value"in i)return i.value;var r=i.get;return r===void 0?void 0:r.call(a)}},g=p(6),v=m(g);function m(o){return o&&o.__esModule?o:{default:o}}function d(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function s(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function t(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=function(o){t(l,o);function l(){return d(this,l),s(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return A(l,null,[{key:"create",value:function(a){return a==="super"?document.createElement("sup"):a==="sub"?document.createElement("sub"):j(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,a)}},{key:"formats",value:function(a){if(a.tagName==="SUB")return"sub";if(a.tagName==="SUP")return"super"}}]),l}(v.default);n.blotName="script",n.tagName=["SUB","SUP"],c.default=n},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(6),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}function v(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function d(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){d(n,t);function n(){return v(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(j.default);s.blotName="strike",s.tagName="S",c.default=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=p(6),j=g(A);function g(t){return t&&t.__esModule?t:{default:t}}function v(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function d(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){d(n,t);function n(){return v(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(j.default);s.blotName="underline",s.tagName="U",c.default=s},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function u(a,i){for(var h=0;h<i.length;h++){var r=i[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,i,h){return i&&u(a.prototype,i),h&&u(a,h),a}}(),j=function u(a,i,h){a===null&&(a=Function.prototype);var r=Object.getOwnPropertyDescriptor(a,i);if(r===void 0){var f=Object.getPrototypeOf(a);return f===null?void 0:u(f,i,h)}else{if("value"in r)return r.value;var b=r.get;return b===void 0?void 0:b.call(h)}},g=p(0),v=d(g),m=p(27);function d(u){return u&&u.__esModule?u:{default:u}}function s(u,a){if(!(u instanceof a))throw new TypeError("Cannot call a class as a function")}function t(u,a){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:u}function n(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);u.prototype=Object.create(a&&a.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(u,a):u.__proto__=a)}var o=["alt","height","width"],l=function(u){n(a,u);function a(){return s(this,a),t(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return A(a,[{key:"format",value:function(h,r){o.indexOf(h)>-1?r?this.domNode.setAttribute(h,r):this.domNode.removeAttribute(h):j(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,h,r)}}],[{key:"create",value:function(h){var r=j(a.__proto__||Object.getPrototypeOf(a),"create",this).call(this,h);return typeof h=="string"&&r.setAttribute("src",this.sanitize(h)),r}},{key:"formats",value:function(h){return o.reduce(function(r,f){return h.hasAttribute(f)&&(r[f]=h.getAttribute(f)),r},{})}},{key:"match",value:function(h){return/\.(jpe?g|gif|png)$/.test(h)||/^data:image\/.+;base64/.test(h)}},{key:"sanitize",value:function(h){return(0,m.sanitize)(h,["http","https","data"])?h:"//:0"}},{key:"value",value:function(h){return h.getAttribute("src")}}]),a}(v.default.Embed);l.blotName="image",l.tagName="IMG",c.default=l},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0});var A=function(){function u(a,i){for(var h=0;h<i.length;h++){var r=i[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,i,h){return i&&u(a.prototype,i),h&&u(a,h),a}}(),j=function u(a,i,h){a===null&&(a=Function.prototype);var r=Object.getOwnPropertyDescriptor(a,i);if(r===void 0){var f=Object.getPrototypeOf(a);return f===null?void 0:u(f,i,h)}else{if("value"in r)return r.value;var b=r.get;return b===void 0?void 0:b.call(h)}},g=p(4),v=p(27),m=d(v);function d(u){return u&&u.__esModule?u:{default:u}}function s(u,a){if(!(u instanceof a))throw new TypeError("Cannot call a class as a function")}function t(u,a){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:u}function n(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);u.prototype=Object.create(a&&a.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(u,a):u.__proto__=a)}var o=["height","width"],l=function(u){n(a,u);function a(){return s(this,a),t(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return A(a,[{key:"format",value:function(h,r){o.indexOf(h)>-1?r?this.domNode.setAttribute(h,r):this.domNode.removeAttribute(h):j(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,h,r)}}],[{key:"create",value:function(h){var r=j(a.__proto__||Object.getPrototypeOf(a),"create",this).call(this,h);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(h)),r}},{key:"formats",value:function(h){return o.reduce(function(r,f){return h.hasAttribute(f)&&(r[f]=h.getAttribute(f)),r},{})}},{key:"sanitize",value:function(h){return m.default.sanitize(h)}},{key:"value",value:function(h){return h.getAttribute("src")}}]),a}(g.BlockEmbed);l.blotName="video",l.className="ql-video",l.tagName="IFRAME",c.default=l},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.FormulaBlot=void 0;var A=function(){function h(r,f){for(var b=0;b<f.length;b++){var N=f[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(r,N.key,N)}}return function(r,f,b){return f&&h(r.prototype,f),b&&h(r,b),r}}(),j=function h(r,f,b){r===null&&(r=Function.prototype);var N=Object.getOwnPropertyDescriptor(r,f);if(N===void 0){var E=Object.getPrototypeOf(r);return E===null?void 0:h(E,f,b)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(b)}},g=p(35),v=n(g),m=p(5),d=n(m),s=p(9),t=n(s);function n(h){return h&&h.__esModule?h:{default:h}}function o(h,r){if(!(h instanceof r))throw new TypeError("Cannot call a class as a function")}function l(h,r){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:h}function u(h,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);h.prototype=Object.create(r&&r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(h,r):h.__proto__=r)}var a=function(h){u(r,h);function r(){return o(this,r),l(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return A(r,null,[{key:"create",value:function(b){var N=j(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,b);return typeof b=="string"&&(window.katex.render(b,N,{throwOnError:!1,errorColor:"#f00"}),N.setAttribute("data-value",b)),N}},{key:"value",value:function(b){return b.getAttribute("data-value")}}]),r}(v.default);a.blotName="formula",a.className="ql-formula",a.tagName="SPAN";var i=function(h){u(r,h),A(r,null,[{key:"register",value:function(){d.default.register(a,!0)}}]);function r(){o(this,r);var f=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return f}return r}(t.default);c.FormulaBlot=a,c.default=i},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.CodeToken=c.CodeBlock=void 0;var A=function(){function b(N,E){for(var S=0;S<E.length;S++){var w=E[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(N,w.key,w)}}return function(N,E,S){return E&&b(N.prototype,E),S&&b(N,S),N}}(),j=function b(N,E,S){N===null&&(N=Function.prototype);var w=Object.getOwnPropertyDescriptor(N,E);if(w===void 0){var _=Object.getPrototypeOf(N);return _===null?void 0:b(_,E,S)}else{if("value"in w)return w.value;var O=w.get;return O===void 0?void 0:O.call(S)}},g=p(0),v=l(g),m=p(5),d=l(m),s=p(9),t=l(s),n=p(13),o=l(n);function l(b){return b&&b.__esModule?b:{default:b}}function u(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function a(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function i(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var h=function(b){i(N,b);function N(){return u(this,N),a(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return A(N,[{key:"replaceWith",value:function(S){this.domNode.textContent=this.domNode.textContent,this.attach(),j(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,S)}},{key:"highlight",value:function(S){var w=this.domNode.textContent;this.cachedText!==w&&((w.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=S(w),this.domNode.normalize(),this.attach()),this.cachedText=w)}}]),N}(o.default);h.className="ql-syntax";var r=new v.default.Attributor.Class("token","hljs",{scope:v.default.Scope.INLINE}),f=function(b){i(N,b),A(N,null,[{key:"register",value:function(){d.default.register(r,!0),d.default.register(h,!0)}}]);function N(E,S){u(this,N);var w=a(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,E,S));if(typeof w.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var _=null;return w.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(_),_=setTimeout(function(){w.highlight(),_=null},w.options.interval)}),w.highlight(),w}return A(N,[{key:"highlight",value:function(){var S=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var w=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(_){_.highlight(S.options.highlight)}),this.quill.update(d.default.sources.SILENT),w!=null&&this.quill.setSelection(w,d.default.sources.SILENT)}}}]),N}(t.default);f.DEFAULTS={highlight:function(){return window.hljs==null?null:function(b){var N=window.hljs.highlightAuto(b);return N.value}}(),interval:1e3},c.CodeBlock=h,c.CodeToken=r,c.default=f},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(y,c){y.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(y,c){y.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(y,c){y.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(y,c){y.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(y,c){y.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(y,c,p){Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BubbleTooltip=void 0;var A=function N(E,S,w){E===null&&(E=Function.prototype);var _=Object.getOwnPropertyDescriptor(E,S);if(_===void 0){var O=Object.getPrototypeOf(E);return O===null?void 0:N(O,S,w)}else{if("value"in _)return _.value;var T=_.get;return T===void 0?void 0:T.call(w)}},j=function(){function N(E,S){for(var w=0;w<S.length;w++){var _=S[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,S,w){return S&&N(E.prototype,S),w&&N(E,w),E}}(),g=p(3),v=u(g),m=p(8),d=u(m),s=p(43),t=u(s),n=p(15),o=p(41),l=u(o);function u(N){return N&&N.__esModule?N:{default:N}}function a(N,E){if(!(N instanceof E))throw new TypeError("Cannot call a class as a function")}function i(N,E){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:N}function h(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);N.prototype=Object.create(E&&E.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(N,E):N.__proto__=E)}var r=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],f=function(N){h(E,N);function E(S,w){a(this,E),w.modules.toolbar!=null&&w.modules.toolbar.container==null&&(w.modules.toolbar.container=r);var _=i(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,S,w));return _.quill.container.classList.add("ql-bubble"),_}return j(E,[{key:"extendToolbar",value:function(w){this.tooltip=new b(this.quill,this.options.bounds),this.tooltip.root.appendChild(w.container),this.buildButtons([].slice.call(w.container.querySelectorAll("button")),l.default),this.buildPickers([].slice.call(w.container.querySelectorAll("select")),l.default)}}]),E}(t.default);f.DEFAULTS=(0,v.default)(!0,{},t.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var b=function(N){h(E,N);function E(S,w){a(this,E);var _=i(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,S,w));return _.quill.on(d.default.events.EDITOR_CHANGE,function(O,T,L,M){if(O===d.default.events.SELECTION_CHANGE)if(T!=null&&T.length>0&&M===d.default.sources.USER){_.show(),_.root.style.left="0px",_.root.style.width="",_.root.style.width=_.root.offsetWidth+"px";var q=_.quill.getLines(T.index,T.length);if(q.length===1)_.position(_.quill.getBounds(T));else{var U=q[q.length-1],W=_.quill.getIndex(U),H=Math.min(U.length()-1,T.index+T.length-W),D=_.quill.getBounds(new n.Range(W,H));_.position(D)}}else document.activeElement!==_.textbox&&_.quill.hasFocus()&&_.hide()}),_}return j(E,[{key:"listen",value:function(){var w=this;A(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){w.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!w.root.classList.contains("ql-hidden")){var _=w.quill.getSelection();_!=null&&w.position(w.quill.getBounds(_))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(w){var _=A(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,w),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",_===0)return _;O.style.marginLeft=-1*_-O.offsetWidth/2+"px"}}]),E}(s.BaseTooltip);b.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),c.BubbleTooltip=b,c.default=f},function(y,c,p){y.exports=p(63)}]).default})})(Sn);var gd=Sn.exports,yd=ke&&ke.__extends||function(){var x=function(k,y){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var A in p)p.hasOwnProperty(A)&&(c[A]=p[A])},x(k,y)};return function(k,y){x(k,y);function c(){this.constructor=k}k.prototype=y===null?Object.create(y):(c.prototype=y.prototype,new c)}}(),Ct=ke&&ke.__assign||function(){return Ct=Object.assign||function(x){for(var k,y=1,c=arguments.length;y<c;y++){k=arguments[y];for(var p in k)Object.prototype.hasOwnProperty.call(k,p)&&(x[p]=k[p])}return x},Ct.apply(this,arguments)},xd=ke&&ke.__spreadArrays||function(){for(var x=0,k=0,y=arguments.length;k<y;k++)x+=arguments[k].length;for(var c=Array(x),p=0,k=0;k<y;k++)for(var A=arguments[k],j=0,g=A.length;j<g;j++,p++)c[p]=A[j];return c},Ht=ke&&ke.__importDefault||function(x){return x&&x.__esModule?x:{default:x}},Be=Ht(G),bd=Ht(Wn),jt=Ht(md),Fr=Ht(gd),_d=function(x){yd(k,x);function k(y){var c=x.call(this,y)||this;c.dirtyProps=["modules","formats","bounds","theme","children"],c.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],c.state={generation:0},c.selection=null,c.onEditorChange=function(A,j,g,v){var m,d,s,t;A==="text-change"?(d=(m=c).onEditorChangeText)===null||d===void 0||d.call(m,c.editor.root.innerHTML,j,v,c.unprivilegedEditor):A==="selection-change"&&((t=(s=c).onEditorChangeSelection)===null||t===void 0||t.call(s,j,v,c.unprivilegedEditor))};var p=c.isControlled()?y.value:y.defaultValue;return c.value=p??"",c}return k.prototype.validateProps=function(y){var c;if(Be.default.Children.count(y.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Be.default.Children.count(y.children)){var p=Be.default.Children.only(y.children);if(((c=p)===null||c===void 0?void 0:c.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&y.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},k.prototype.shouldComponentUpdate=function(y,c){var p=this,A;if(this.validateProps(y),!this.editor||this.state.generation!==c.generation)return!0;if("value"in y){var j=this.getEditorContents(),g=(A=y.value,A??"");this.isEqualValue(g,j)||this.setEditorContents(this.editor,g)}return y.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,y.readOnly),xd(this.cleanProps,this.dirtyProps).some(function(v){return!jt.default(y[v],p.props[v])})},k.prototype.shouldComponentRegenerate=function(y){var c=this;return this.dirtyProps.some(function(p){return!jt.default(y[p],c.props[p])})},k.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},k.prototype.componentWillUnmount=function(){this.destroyEditor()},k.prototype.componentDidUpdate=function(y,c){var p=this;if(this.editor&&this.shouldComponentRegenerate(y)){var A=this.editor.getContents(),j=this.editor.getSelection();this.regenerationSnapshot={delta:A,selection:j},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==c.generation){var g=this.regenerationSnapshot,A=g.delta,v=g.selection;delete this.regenerationSnapshot,this.instantiateEditor();var m=this.editor;m.setContents(A),$r(function(){return p.setEditorSelection(m,v)})}},k.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},k.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},k.prototype.isControlled=function(){return"value"in this.props},k.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},k.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},k.prototype.createEditor=function(y,c){var p=new Fr.default(y,c);return c.tabIndex!=null&&this.setEditorTabIndex(p,c.tabIndex),this.hookEditor(p),p},k.prototype.hookEditor=function(y){this.unprivilegedEditor=this.makeUnprivilegedEditor(y),y.on("editor-change",this.onEditorChange)},k.prototype.unhookEditor=function(y){y.off("editor-change",this.onEditorChange)},k.prototype.getEditorContents=function(){return this.value},k.prototype.getEditorSelection=function(){return this.selection},k.prototype.isDelta=function(y){return y&&y.ops},k.prototype.isEqualValue=function(y,c){return this.isDelta(y)&&this.isDelta(c)?jt.default(y.ops,c.ops):jt.default(y,c)},k.prototype.setEditorContents=function(y,c){var p=this;this.value=c;var A=this.getEditorSelection();typeof c=="string"?y.setContents(y.clipboard.convert(c)):y.setContents(c),$r(function(){return p.setEditorSelection(y,A)})},k.prototype.setEditorSelection=function(y,c){if(this.selection=c,c){var p=y.getLength();c.index=Math.max(0,Math.min(c.index,p-1)),c.length=Math.max(0,Math.min(c.length,p-1-c.index)),y.setSelection(c)}},k.prototype.setEditorTabIndex=function(y,c){var p,A;!((A=(p=y)===null||p===void 0?void 0:p.scroll)===null||A===void 0)&&A.domNode&&(y.scroll.domNode.tabIndex=c)},k.prototype.setEditorReadOnly=function(y,c){c?y.disable():y.enable()},k.prototype.makeUnprivilegedEditor=function(y){var c=y;return{getHTML:function(){return c.root.innerHTML},getLength:c.getLength.bind(c),getText:c.getText.bind(c),getContents:c.getContents.bind(c),getSelection:c.getSelection.bind(c),getBounds:c.getBounds.bind(c)}},k.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var y=bd.default.findDOMNode(this.editingArea);if(!y)throw new Error("Cannot find element for editing area");if(y.nodeType===3)throw new Error("Editing area cannot be a text node");return y},k.prototype.renderEditingArea=function(){var y=this,c=this.props,p=c.children,A=c.preserveWhitespace,j=this.state.generation,g={key:j,ref:function(v){y.editingArea=v}};return Be.default.Children.count(p)?Be.default.cloneElement(Be.default.Children.only(p),g):A?Be.default.createElement("pre",Ct({},g)):Be.default.createElement("div",Ct({},g))},k.prototype.render=function(){var y;return Be.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(y=this.props.className,y??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},k.prototype.onEditorChangeText=function(y,c,p,A){var j,g;if(this.editor){var v=this.isDelta(this.value)?A.getContents():A.getHTML();v!==this.getEditorContents()&&(this.lastDeltaChangeSet=c,this.value=v,(g=(j=this.props).onChange)===null||g===void 0||g.call(j,y,c,p,A))}},k.prototype.onEditorChangeSelection=function(y,c,p){var A,j,g,v,m,d;if(this.editor){var s=this.getEditorSelection(),t=!s&&y,n=s&&!y;jt.default(y,s)||(this.selection=y,(j=(A=this.props).onChangeSelection)===null||j===void 0||j.call(A,y,c,p),t?(v=(g=this.props).onFocus)===null||v===void 0||v.call(g,y,c,p):n&&((d=(m=this.props).onBlur)===null||d===void 0||d.call(m,s,c,p)))}},k.prototype.focus=function(){this.editor&&this.editor.focus()},k.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},k.displayName="React Quill",k.Quill=Fr.default,k.defaultProps={theme:"snow",modules:{},readOnly:!1},k}(Be.default.Component);function $r(x){Promise.resolve().then(x)}var jd=_d;const Ed=Xn(jd);const Od=()=>{const{toast:x}=Ne(),[k,y]=G.useState([]),[c,p]=G.useState(!0),[A,j]=G.useState(!1),[g,v]=G.useState(null),[m,d]=G.useState(!1),[s,t]=G.useState(null),n={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["clean"]]},o=["header","bold","italic","underline","strike","color","background","list","bullet","align","link","image"],l=G.useCallback(async()=>{p(!0);try{const{data:r,error:f}=await ne.from("email_templates").select("*").order("name");if(f)throw f;y(r||[])}catch(r){x({title:"Erro ao buscar templates",description:r.message,variant:"destructive"})}finally{p(!1)}},[x]);G.useEffect(()=>{l()},[l]);const u=(r=null)=>{v(r||{name:"",trigger_identifier:"",subject:"",body_html:"",is_active:!0}),j(!0)},a=async()=>{d(!0);try{const{id:r,created_at:f,updated_at:b,...N}=g,{error:E}=await ne.from("email_templates").upsert(N,{onConflict:"trigger_identifier"});if(E)throw E;x({title:"Sucesso!",description:"Template de e-mail salvo."}),j(!1),l()}catch(r){x({title:"Erro ao salvar template",description:r.message,variant:"destructive"})}finally{d(!1)}},i=async()=>{if(s){d(!0);try{const{error:r}=await ne.from("email_templates").delete().eq("id",s.id);if(r)throw r;x({title:"Template excluído!",description:`O template "${s.name}" foi removido.`}),t(null),l()}catch(r){x({title:"Erro ao excluir",description:r.message,variant:"destructive"})}finally{d(!1)}}},h=()=>g?g.body_html.replace(/\{\{user_name\}\}/g,"João Silva").replace(/\{\{site_name\}\}/g,"Sua Plataforma").replace(/\{\{contractor_name\}\}/g,"Maria Santos").replace(/\{\{model_name\}\}/g,"Ana Costa").replace(/\{\{job_title\}\}/g,"Ensaio Fotográfico").replace(/\{\{amount\}\}/g,"500,00").replace(/\{\{profile_link\}\}/g,"#").replace(/\{\{dashboard_link\}\}/g,"#").replace(/\{\{reset_link\}\}/g,"#"):"";return e.jsxs(_e,{children:[e.jsxs(je,{className:"flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Ee,{children:"Templates de E-mail Transacionais"}),e.jsxs(we,{children:["Gerencie os e-mails automáticos enviados pela plataforma. Use variáveis como ","{{user_name}}, {{site_name}}, {{amount}}"," etc."]})]}),e.jsxs(re,{onClick:()=>u(),children:[e.jsx(Lt,{className:"mr-2 h-4 w-4"})," Novo Template"]})]}),e.jsxs(Oe,{children:[e.jsxs(Xe,{className:"mb-6",children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Gatilhos de E-mail Disponíveis"}),e.jsx(Ze,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Cadastro:"})," welcome_email, password_reset"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Perfil:"})," profile_verified, profile_favorited"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Assinatura:"})," subscription_activated, subscription_expiring"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Vagas:"})," new_job_application, job_invitation"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Financeiro:"})," cache_received, withdrawal_completed, low_balance_reminder"]})]})})]}),c?e.jsx("div",{className:"flex justify-center h-40 items-center",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):e.jsx("div",{className:"border rounded-md",children:k.map(r=>e.jsxs("div",{className:"flex justify-between items-center p-4 border-b last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Gatilho: ",e.jsx("code",{className:"bg-gray-100 p-1 rounded-sm text-xs",children:r.trigger_identifier})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Assunto: ",r.subject]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{variant:r.is_active?"default":"secondary",children:r.is_active?"Ativo":"Inativo"}),e.jsxs(re,{variant:"outline",size:"sm",onClick:()=>u(r),children:[e.jsx(Rt,{className:"mr-2 h-3 w-3"}),"Editar"]}),e.jsxs(nt,{children:[e.jsx(at,{asChild:!0,children:e.jsx(re,{variant:"destructive",size:"icon",onClick:()=>t(r),children:e.jsx(wt,{className:"h-4 w-4"})})}),s&&s.id===r.id&&e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(st,{children:"Confirmar Exclusão"}),e.jsxs(lt,{children:['Tem certeza que deseja excluir o template "',s.name,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(ut,{children:[e.jsx(ct,{onClick:()=>t(null),children:"Cancelar"}),e.jsx(dt,{onClick:i,disabled:m,className:"bg-red-600 hover:bg-red-700",children:m?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):"Excluir"})]})]})]})]})]},r.id))})]}),A&&g&&e.jsx(Fe,{open:A,onOpenChange:j,children:e.jsxs($e,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsxs(He,{children:[g.id?"Editar":"Criar"," Template de E-mail"]}),e.jsxs(Ke,{children:["Use variáveis como ","{{user_name}}, {{site_name}}, {{amount}}, {{job_title}}"," que serão substituídas dinamicamente."]})]}),e.jsxs(Ua,{defaultValue:"edit",className:"w-full",children:[e.jsxs(hn,{className:"grid w-full grid-cols-2",children:[e.jsxs(Qt,{value:"edit",className:"flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4"}),"Editor"]}),e.jsxs(Qt,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Visualizar"]})]}),e.jsxs(Jt,{value:"edit",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"template-name",children:"Nome do Template"}),e.jsx(ae,{id:"template-name",value:g.name,onChange:r=>v({...g,name:r.target.value})})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"template-trigger",children:"Identificador do Gatilho"}),e.jsx(ae,{id:"template-trigger",value:g.trigger_identifier,onChange:r=>v({...g,trigger_identifier:r.target.value}),placeholder:"ex: welcome_email"})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"template-subject",children:"Assunto"}),e.jsx(ae,{id:"template-subject",value:g.subject,onChange:r=>v({...g,subject:r.target.value})})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"template-body",children:"Corpo do E-mail"}),e.jsx("div",{className:"mt-2",style:{height:"300px"},children:e.jsx(Ed,{theme:"snow",value:g.body_html,onChange:r=>v({...g,body_html:r}),modules:n,formats:o,style:{height:"250px"}})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(Me,{id:"template-active",checked:g.is_active,onCheckedChange:r=>v({...g,is_active:r})}),e.jsx(J,{htmlFor:"template-active",children:"Ativo"})]})]}),e.jsx(Jt,{value:"preview",className:"mt-4",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("h3",{className:"font-semibold mb-2",children:["Assunto: ",g.subject.replace(/\{\{user_name\}\}/g,"João Silva").replace(/\{\{site_name\}\}/g,"Sua Plataforma")]}),e.jsx("div",{className:"bg-white p-4 rounded border min-h-[300px]",dangerouslySetInnerHTML:{__html:h()}})]})})]}),e.jsxs(We,{className:"mt-6",children:[e.jsx(re,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),e.jsxs(re,{onClick:a,disabled:m,children:[m?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"})," Salvar Template"]})]})]})})]})},Nd=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsx(qa,{}),e.jsx(Od,{})]}),wd=()=>{var r,f,b,N;const{user:x}=Je(),{toast:k}=Ne(),[y,c]=G.useState(null),[p,A]=G.useState(!0),[j,g]=G.useState(!1),[v,m]=G.useState(!1),d=G.useRef(null),s=[{label:"Pequeno (h-8)",value:"h-8"},{label:"Médio (h-10)",value:"h-10"},{label:"Grande (h-12)",value:"h-12"},{label:"Extra Grande (h-14)",value:"h-14"}],t=[{label:"Esquerda",value:"text-left"},{label:"Centro",value:"text-center"},{label:"Direita",value:"text-right"}],n=[{label:"Normal (lg)",value:"text-lg"},{label:"Grande (xl)",value:"text-xl"},{label:"2XL",value:"text-2xl"},{label:"3XL",value:"text-3xl"},{label:"4XL",value:"text-4xl"},{label:"5XL",value:"text-5xl"}],o=[{label:"Padrão (Poppins)",value:"'Poppins', sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Arial",value:"Arial, sans-serif"},{label:"Verdana",value:"Verdana, sans-serif"},{label:"Georgia",value:"Georgia, serif"}],l=[{label:"Normal",value:"400"},{label:"Médio",value:"500"},{label:"Semi-negrito",value:"600"},{label:"Negrito",value:"700"},{label:"Extra-negrito",value:"800"}],u=G.useCallback(async()=>{A(!0);try{const{data:E,error:S}=await ne.from("landing_pages").select("*").eq("slug","criar-modelo").single();if(S)throw S;c(E)}catch(E){k({title:"Erro ao buscar dados da página",description:E.message,variant:"destructive"})}finally{A(!1)}},[k]);G.useEffect(()=>{u()},[u]);const a=(E,S,w)=>{c(_=>({..._,content:{..._.content,[E]:{..._.content[E]||{},[S]:w}}}))},i=async E=>{const S=E.target.files[0];if(!S)return;if(!x){k({title:"Erro de Autenticação",description:"Você precisa estar logado para fazer upload.",variant:"destructive"});return}m(!0);const w=`${x.id}/landing_page_assets/logo-${Date.now()}`;try{const{error:_}=await ne.storage.from("user_media").upload(w,S,{cacheControl:"3600",upsert:!1});if(_)throw _;const{data:O}=ne.storage.from("user_media").getPublicUrl(w);a("logo","url",O.publicUrl),k({title:"Sucesso!",description:"Logo enviado com sucesso."})}catch(_){k({title:"Erro no Upload",description:_.message,variant:"destructive"})}finally{m(!1),d.current&&(d.current.value="")}},h=async()=>{g(!0);try{const{error:E}=await ne.from("landing_pages").update({content:y.content,is_published:y.is_published,title:y.title}).eq("slug","criar-modelo");if(E)throw E;k({title:"Sucesso!",description:"Página atualizada com sucesso."}),u()}catch(E){k({title:"Erro ao salvar",description:E.message,variant:"destructive"})}finally{g(!1)}};return p?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-pink-600"})}):y?e.jsxs(_e,{children:[e.jsxs(je,{children:[e.jsxs(Ee,{className:"flex items-center gap-2",children:[e.jsx(Zr,{})," Landing Page: Cadastro de Modelo"]}),e.jsx(we,{children:"Edite o conteúdo e a aparência da página de cadastro exclusiva para modelos."})]}),e.jsxs(Oe,{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(J,{htmlFor:"is_published",children:"Publicar Página"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Se desativado, a página não será acessível publicamente."})]}),e.jsx(Me,{id:"is_published",checked:y.is_published,onCheckedChange:E=>c(S=>({...S,is_published:E}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"pageTitle",children:"Título Interno da Página (para admin)"}),e.jsx(ae,{id:"pageTitle",value:y.title,onChange:E=>c(S=>({...S,title:E.target.value}))})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Logo"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{children:"Preview"}),e.jsx("div",{className:"p-4 bg-gray-100 rounded-md flex items-center justify-center min-h-[80px]",children:(f=(r=y.content)==null?void 0:r.logo)!=null&&f.url?e.jsx("img",{src:y.content.logo.url,alt:"Prévia do Logo",className:`${y.content.logo.size||"h-12"} w-auto object-contain`}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum logo definido."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"logo-upload",children:"Enviar Novo Logo"}),e.jsx(ae,{id:"logo-upload",type:"file",accept:"image/png, image/jpeg, image/svg+xml",onChange:i,ref:d,disabled:v}),v&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"logoSize",children:"Tamanho do Logo"}),e.jsxs(Ce,{value:(N=(b=y.content)==null?void 0:b.logo)==null?void 0:N.size,onValueChange:E=>a("logo","size",E),children:[e.jsx(Ie,{children:e.jsx(Le,{})}),e.jsx(Re,{children:s.map(E=>e.jsx(be,{value:E.value,children:E.label},E.value))})]})]})]})]}),[{key:"headline",title:"Headline (Título Principal)"},{key:"subheadline",title:"Sub-headline (Texto Secundário)"}].map(E=>{var S,w,_,O,T,L,M,q,U,W,H,D,P,C;return e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-lg",children:E.title}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:`${E.key}Text`,children:"Texto"}),e.jsx(ae,{id:`${E.key}Text`,value:((w=(S=y.content)==null?void 0:S[E.key])==null?void 0:w.text)||"",onChange:I=>a(E.key,"text",I.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:`${E.key}Font`,children:"Fonte"}),e.jsxs(Ce,{value:(O=(_=y.content)==null?void 0:_[E.key])==null?void 0:O.font_family,onValueChange:I=>a(E.key,"font_family",I),children:[e.jsx(Ie,{children:e.jsx(Le,{})}),e.jsx(Re,{children:o.map(I=>e.jsx(be,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:`${E.key}Weight`,children:"Peso da Fonte"}),e.jsxs(Ce,{value:(L=(T=y.content)==null?void 0:T[E.key])==null?void 0:L.font_weight,onValueChange:I=>a(E.key,"font_weight",I),children:[e.jsx(Ie,{children:e.jsx(Le,{})}),e.jsx(Re,{children:l.map(I=>e.jsx(be,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:`${E.key}Size`,children:"Tamanho da Fonte"}),e.jsxs(Ce,{value:(q=(M=y.content)==null?void 0:M[E.key])==null?void 0:q.font_size,onValueChange:I=>a(E.key,"font_size",I),children:[e.jsx(Ie,{children:e.jsx(Le,{})}),e.jsx(Re,{children:n.map(I=>e.jsx(be,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:`${E.key}Align`,children:"Alinhamento"}),e.jsxs(Ce,{value:(W=(U=y.content)==null?void 0:U[E.key])==null?void 0:W.alignment,onValueChange:I=>a(E.key,"alignment",I),children:[e.jsx(Ie,{children:e.jsx(Le,{})}),e.jsx(Re,{children:t.map(I=>e.jsx(be,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{className:"flex flex-col justify-end",children:[e.jsx(J,{htmlFor:`${E.key}Color`,children:"Cor da Fonte"}),e.jsxs("div",{className:"flex items-center gap-2 border rounded-md px-2 mt-1",children:[e.jsx(ae,{id:`${E.key}Color`,type:"color",value:((D=(H=y.content)==null?void 0:H[E.key])==null?void 0:D.color)||"#000000",onChange:I=>a(E.key,"color",I.target.value),className:"w-8 h-8 p-0 border-none"}),e.jsx("span",{className:"text-sm",children:((C=(P=y.content)==null?void 0:P[E.key])==null?void 0:C.color)||"#000000"})]})]})]})]},E.key)})]}),e.jsxs(pt,{className:"flex justify-between items-center",children:[e.jsxs(re,{variant:"outline",onClick:()=>window.open("/criar-modelo","_blank"),children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"})," Visualizar Página"]}),e.jsxs(re,{onClick:h,disabled:j,children:[j?e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(De,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(Gr,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Página não encontrada"}),e.jsx("p",{className:"text-muted-foreground",children:"A landing page com o slug 'criar-modelo' não foi encontrada no banco de dados."})]})},$d=()=>{const{user:x}=Je(),k=ir(),[y,c]=G.useState("overview"),p=[{id:"overview",label:"Visão Geral",icon:Yn,component:e.jsx(Ca,{})},{id:"users",label:"Usuários",icon:Et,component:e.jsx(ja,{})},{id:"user_verifications",label:"Verificações",icon:va,component:e.jsx(La,{})},{id:"withdrawals",label:"Pedidos de Saque",icon:ya,component:e.jsx(Ra,{})},{id:"jobs",label:"Vagas",icon:Xt,component:e.jsx(Na,{})},{id:"pages",label:"Páginas",icon:Ot,component:e.jsx(wa,{})},{id:"landing_pages",label:"Landing Pages",icon:Zr,component:e.jsx(wd,{})},{id:"menus",label:"Menus",icon:zr,component:e.jsx(Aa,{})},{id:"content_settings",label:"Conteúdo",icon:Rt,component:e.jsx(Ia,{})},{id:"logo_settings",label:"Logo",icon:Zn,component:e.jsx(Ma,{})},{id:"integrations",label:"Integrações e Pixels",icon:_a,component:e.jsx(Da,{})},{id:"emails_config",label:"Configurações de E-mail",icon:Xr,component:e.jsx(Nd,{})},{id:"payments_config",label:"Config. Pagamentos",icon:lr,component:e.jsx(hr,{part:"config"})},{id:"transactions_history",label:"Hist. Transações",icon:fa,component:e.jsx(hr,{part:"history"})},{id:"notifications_config",label:"Config. Notificações",icon:Yr,component:e.jsx(ka,{})},{id:"general_settings",label:"Config. Gerais",icon:Qn,component:e.jsx(Pa,{})}];return!x||x.user_type!=="admin"?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600",children:"Você não tem permissão para visualizar esta página."}),e.jsx(re,{onClick:()=>k("/"),className:"mt-4",children:"Voltar para Home"})]}):e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel do Administrador"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Gerencie todos os aspectos da plataforma."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"md:w-1/4 lg:w-1/5",children:e.jsx("nav",{className:"flex flex-col gap-2 bg-white p-4 rounded-xl shadow-md sticky top-24",children:p.map(A=>{const j=A.icon;return e.jsxs(re,{variant:y===A.id?"default":"ghost",className:`justify-start ${y===A.id?"btn-gradient text-white":""}`,onClick:()=>c(A.id),children:[e.jsx(j,{className:"mr-3 h-5 w-5"}),e.jsx("span",{children:A.label})]},A.id)})})}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md min-h-[60vh] relative",children:p.map(A=>e.jsx("div",{hidden:y!==A.id,className:"h-full",children:A.component},A.id))})})]})]})})};export{$d as default};
